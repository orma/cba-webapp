!function r(s,l,i){function c(t,e){if(!l[t]){if(!s[t]){var a="function"==typeof require&&require;if(!e&&a)return a(t,!0);if(u)return u(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var o=l[t]={exports:{}};s[t][0].call(o.exports,function(e){return c(s[t][1][e]||e)},o,o.exports,r,s,l,i)}return l[t].exports}for(var u="function"==typeof require&&require,e=0;e<i.length;e++)c(i[e]);return c}({"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/locales/source/en.json":[function(e,t,a){t.exports={Analytics:"Analytics",Assets:"Assets",Provinces:"Provinces",Explore:"Explore",Editor:"Editor",Tasks:"Tasks",Task:"Task",Province:"Province",Field:"Field",Done:"Done",Status:"Status",Total:"Total",Complete:"Complete","% Complete":"% Complete",Progress:"Progress",Language:"Language",Search:"Search",Options:"Options","Clear search":"Clear search",Loading:"Loading",Width:"Width",Condition:"Condition",Surface:"Surface",added:"added","not added":"not added","Back to overview":"Back to overview","Select language":"Select language","No data available":"No data available","Change Language":"Change Language",Menu:"Menu",Previous:"Previous",Next:"Next",PCS:"PCS","Tracking and visualizing road assets in Vietnam for inclusive growth.":"Tracking and visualizing road assets in Vietnam for inclusive growth.","Access and improve Road Networks":"Access and improve Road Networks","Work with the OpenRoads project to close this critical information gap and create a comprehensive road network of Vietnam":"Work with the OpenRoads project to close this critical information gap and create a comprehensive road network of Vietnam","View assets":"View assets","VPRoMMS Assets By Province":"VPRoMMS Assets By Province","of VPRoMMS Ids have field data collected":"of VPRoMMS Ids have field data collected","Visualized variable":"Visualized variable","Road without VPRoMMS ID":"Road without VPRoMMS ID","View analytics":"View analytics","Explore on map":"Explore on map","VPRoMMS Edits By Province":"VPRoMMS Edits By Province","of VPRoMMS Ids added":"of VPRoMMS Ids added","Show road without VPRoMMS ID":"Show road without VPRoMMS ID","Select visualized variable":"Select visualized variable","Page Not Found":"Page Not Found","Select an action":"Select an action","Information on VPRoMMS roads is not available":"Information on VPRoMMS roads is not available","of VPRoMMS Ids have field data":"of VPRoMMS Ids have field data",Download:"Download","Download Roads":"Download Roads","Download road network":"Download road network",Road:"Road",Roads:"Roads",Districts:"Districts","Performing action...":"Performing action...",Selected:"Selected","road selected":"road selected","roads selected":"roads selected","Select at least another one":"Select at least another one","No roads selected yet. Click a road to select it":"No roads selected yet. Click a road to select it","1 road selected. Select at least one more":"1 road selected. Select at least one more",Cancel:"Cancel",Confirm:"Confirm",Submit:"Submit",Delete:"Delete",Create:"Create","Confirm Delete":"Confirm Delete",Key:"Key",Value:"Value","Create New Property":"Create New Property","Remove Duplicates":"Remove Duplicates","Remove Duplicate Roads":"Remove Duplicate Roads","Click on a road to keep. The other roads here will be deleted.":"Click on a road to keep. The other roads here will be deleted.","Delete Road":"Delete Road","Edit Road":"Edit Road","Add Road":"Add Road","Create New Road":"Create New Road","New Road Id":"New Road Id","Invalid Road Id":"Invalid Road Id","Create Intersection":"Create Intersection","Finish task":"Finish task","Skip task":"Skip task",Show:"Show",Hide:"Hide",Upload:"Upload","Upload RoadLabPro ZIP files":"Upload RoadLabPro ZIP files","Road properties":"Road properties","Road geometries":"Road geometries",FAQ:"FAQ","Frequently Asked Questions":"Frequently Asked Questions","If you have any remaining questions":"If you have any remaining questions","email us":"email us","Question regarding ORMA, not answered in the FAQ":"Question regarding ORMA, not answered in the FAQ","Select roads to work on":"Select roads to work on","Choose an action to perform":"Choose an action to perform","Showing 1 Road":"Showing 1 Road","Showing 2 Roads":"Showing 2 Roads",Showing:"Showing",Admin:"Admin","Admin Level":"Admin Level","Search by Admin Area":"Search by Admin Area","Search by VPRoMMS ID":"Search by VPRoMMS ID","Please search for an Admin Area":"Please search for an Admin Area","No results available. Please refine your search":"No results available. Please refine your search.","No available data":"No available data",Highway:"Highway",Properties:"Properties","Field Data":"Field Data",View:"View","Field Data Sources":"Field Data Sources","Loading your first task":"Loading your first task","Tasks Remaining":"Tasks Remaining","No tasks remaining":"No tasks remaining",Error:"Error","Connection Error":"Connection Error","Already Exists":"Already Exists","Bad response":"Bad response","Data not available":"Data not available","Could not update task status":"Could not update task status","Are you sure you want to delete VPRoMMS":"Are you sure you want to delete VPRoMMS","Improve Map":"Improve Map","VPRoMMS ID":"VPRoMMS ID","Road Name":"Road Name","Road Type":"Road Type","Risk Score":"Risk Score","Road Number":"Road Number","End Latitude":"End Latitude","Surface Type":"Surface Type","Poverty Score":"Poverty Score","Terrain Class":"Terrain Class","Traffic Level":"Terrain Level","End Longitude":"End Longitude","End Point Name":"End Point Name","Moisture Class":"Moisture Class","Start Latitude":"Start Latitude","Road Class Code":"Road Class Code","Roughness (IRI)":"Roughness (IRI)",IRI:"IRI","No data":"No data","Roughness Score":"Roughness Score","Start Longitude":"Start Longitude","Start Point Name":"Start Point Name","Criticality Score":"Criticality Score","Structural Number":"Structural Number","Temperature Class":"Temperature Class",or_responsibility:"or_responsibility","Road Length (ORMA)":"Road Length (ORMA)","Road Length (VProMMS)":"Road Length (VProMMS)","Accessibility Score":"Accessibility Score","Large Bus (veh/day)":"Large Bus (veh/day)","Pavement Age (year)":"Pavement Age (year)","Small Bus (veh/day)":"Small Bus (veh/day)","Small Car (veh/day)":"Small Car (veh/day)","Embankment Width (m)":"Embankment Width (m)","Medium Bus (veh/day)":"Medium Bus (veh/day)","Medium Car (veh/day)":"Medium Car (veh/day)","Motorcycle (veh/day)":"Motorcycle (veh/day)","Carriageway Width (m)":"Carriageway Width (m)","Heavy Truck (veh/day)":"Heavy Truck (veh/day)","Light Truck (veh/day)":"Light Truck (veh/day)","Management Class Code":"Management Class Code","Number of Lanes Class":"Number of Lanes Class","Road Length (VPRoMMS)":"Road Length (VPRoMMS)","Medium Truck (veh/day)":"Medium Truck (veh/day)","4 Wheel Drive (veh/day)":"4 Wheel Drive (veh/day)","Total Traffic (veh/day)":"Total Traffic (veh/day)","Drainage Condition Class":"Drainage Condition Class","Pavement Condition Class":"Pavement Condition Class","Delivery Vehicle (veh/day)":"Delivery Vehicle (veh/day)","Articulated Truck (veh/day)":"Articulated Truck (veh/day)","Traffic Annual Growth Scenario":"Traffic Annual Growth Scenario","Length (ORMA)":"Length (ORMA)","Length (Tabular)":"Length (Tabular)","Filter tasks by province":"Filter tasks by province","Select a VPROMMID to apply":"Select a VPROMMID to apply",province:"province",commune:"commune",district:"district"}},{}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/locales/vi.json":[function(e,t,a){t.exports={Analytics:"Phân tích",Assets:"Tài sản",Provinces:"Các tỉnh",Explore:"Hiển thị",Editor:"Chỉnh sửa",Tasks:"Nhiệm vụ",Task:"Nhiệm vụ",Province:"Tỉnh",Field:"Trường dữ liệu",Done:"Hoàn thành",Status:"Tình trạng",Total:"Tổng",Complete:"Hoàn thành","% Complete":"% hoàn thành",Progress:"Tiến độ",Language:"Ngôn ngữ",Search:"Tìm kiếm",Options:"Tùy chọn","Clear search":"Xóa tìm kiếm",Loading:"Đang tải",Width:"Chiều rộng",Condition:"Tình trạng",Surface:"Mặt đường",added:"Đã có","not added":"Chưa có","Back to overview":"Quay về trang chủ","Select language":"Lựa chọn ngôn ngữ","No data available":"Không có dữ liệu","Change Language":"Đổi ngôn ngữ",Menu:"Mục chọn",Previous:"Trước",Next:"Tiếp",PCS:"Chỉ số dự án","Tracking and visualizing road assets in Vietnam for inclusive growth.":"Theo dõi và hiển thị tài sản đường bộ Việt Nam cho tăng trưởng chiều sâu","Access and improve Road Networks":"Truy cập và cải thiện mạng lưới đường bộ","Work with the OpenRoads project to close this critical information gap and create a comprehensive road network of Vietnam":"Làm việc với nền tảng OpenRoads để rút ngắn khoảng cách về thông tin và tạo ra một mạng lưới đường bộ toàn diện của Việt Nam","View assets":"Xem tài sản","VPRoMMS Assets By Province":"VProMMS theo Tỉnh","of VPRoMMS Ids have field data collected":"VProMMS Ids có dự liệu hiện trường","Visualized variable":"Thuộc tính hiển thị","Road without VPRoMMS ID":"Đường không có mã VProMMS","View analytics":"Xem phân tích","Explore on map":"Hiển thị bản đồ","VPRoMMS Edits By Province":"VProMMS theo Tỉnh","of VPRoMMS Ids added":"mã VProMMS đã được thêm vào","Show road without VPRoMMS ID":"Hiện đường không có mã VProMMS","Select visualized variable":"Lựa chọn thuộc tính hiển thị","Page Not Found":"Không tìm thấy trang","Select an action":"Chọn thao tác","Information on VPRoMMS roads is not available":"Không có dữ liệu VPRoMMS","of VPRoMMS Ids have field data":"VProMMS ID có dự liệu hiện trường",Download:"Tải về","Download Roads":"Tải dữ liệu đường","Download road network":"Tải xuống mạng lưới đường",Road:"Đường",Roads:"Các đường",Districts:"Huyện","Performing action...":"Chương trình đang chạy...",Selected:"Đã chọn","road selected":"đường đã chọn","roads selected":"đường đã chọn","Select at least another one":"Lựa chọn ít nhất một đối tượng nữa","No roads selected yet. Click a road to select it":"Chưa có đường nào được chọn. Ấn vào một đường để chọn","1 road selected. Select at least one more":"1 đường được chọn. Lựa chọn ít nhất một đối tượng nữa",Cancel:"Hủy",Confirm:"Xác nhận",Submit:"Gửi đi",Delete:"Xóa",Create:"Tạo","Confirm Delete":"Xác nhận xóa",Key:"Khóa",Value:"Giá trị","Create New Property":"Tạo thuộc tính mới","Remove Duplicates":"Xóa trùng lặp","Remove Duplicate Roads":"Xóa đường trùng lặp","Click on a road to keep. The other roads here will be deleted.":"Chọn một đường để giữ lại. Các đường khác sẽ bị xóa.","Delete Road":"Xóa đường","Edit Road":"Sửa đường","Add Road":"Thêm đường","Create New Road":"Tạo đường mới","New Road Id":"Mã đường mới","Invalid Road Id":"Mã đường không phù hợp","Create Intersection":"Tạo nút giao","Finish task":"Hoàn thành","Skip task":"Bỏ qua",Show:"Hiện",Hide:"Ẩn",Upload:"Tải lên","Upload RoadLabPro ZIP files":"Tải lên tập tin RoadLabPro ZIP","Road properties":"Thuộc tính đường","Road geometries":"Tọa độ đường",FAQ:"FAQ","Frequently Asked Questions":"Các câu hỏi thường gặp","If you have any remaining questions":"Nếu bạn còn câu hỏi nào","email us":"gửi thư cho chúng tôi","Question regarding ORMA, not answered in the FAQ":"Câu hỏi về ORMA, chưa được trả lời trong FAQ","Select roads to work on":"Lựa chọn đường để làm việc","Choose an action to perform":"Chọn thao tác","Showing 1 Road":"Đang hiện 1 đường","Showing 2 Roads":"Đang hiện 2 đường",Showing:"Đang hiện",Admin:"Hành chính","Admin Level":"Cấp hành chính","Search by Admin Area":"Tìm kiếm theo Địa giới hành chính","Search by VPRoMMS ID":"Tìm kiếm theo VProMMS ID","Please search for an Admin Area":"Tìm kiếm theo Địa giới hành chính","No results available. Please refine your search":"Không có kết quả. Vui lòng tìm lại.","No available data":"Không có dữ liệu",Highway:"Đường cao tốc",Properties:"Thuộc tính","Field Data":"Dữ liệu hiện trường",View:"Xem","Field Data Sources":"Nguồn của dữ liệu hiện trường","Loading your first task":"Đang tải nhiệm vụ đầu tiên","Tasks Remaining":"Nhiệm vụ còn lại","No tasks remaining":"Không còn nhiệm vụ nào",Error:"Lỗi","Connection Error":"Lỗi kết nối","Already Exists":"Đã tồn tại","Bad response":"Phản hồi kém","Data not available":"Không có dữ liệu","Could not update task status":"Không thể cập nhật trạng thái","Are you sure you want to delete VPRoMMS":"Bạn có chắc muốn xóa mã VPRoMMS?","Improve Map":"Cải thiện bản đồ","VPRoMMS ID":"Mã VProMMS","Road Name":"Tên đường","Road Type":"Loại đường","Risk Score":"Chỉ số rủi ro","Road Number":"Số hiệu đường","End Latitude":"Vĩ độ điểm cuối","Surface Type":"Loại mặt đường","Poverty Score":"Chỉ số đói nghèo","Terrain Class":"Loại địa hình","Traffic Level":"Loại địa hình","End Longitude":"Kinh độ điểm cuối","End Point Name":"Tên điểm cuối","Moisture Class":"Phân loại độ ẩm","Start Latitude":"Vĩ độ điểm đầu","Road Class Code":"Mã cấp đường","Roughness (IRI)":"Độ gồ ghề (IRI)",IRI:"IRI","No data":"Không có dữ liệu","Roughness Score":"Chỉ số độ gồ ghề","Start Longitude":"Kinh độ điểm đầu","Start Point Name":"Tên điểm đầu","Criticality Score":"Chỉ số tầm quan trọng","Structural Number":"Số kết cấu","Temperature Class":"Phân loại mức nhiệt",or_responsibility:"Cấp quản lý","Road Length (ORMA)":"Chiều dài đường (ORMA)","Road Length (VProMMS)":"Chiều dài đường (VProMMS)","Accessibility Score":"Chỉ số tiếp cận","Large Bus (veh/day)":"Xe buýt cỡ lớn (xe/ngày)","Pavement Age (year)":"Tuổi thọ mặt đường (năm)","Small Bus (veh/day)":"Xe buýt cỡ nhỏ (xe/ngày)","Small Car (veh/day)":"Ô tô cỡ nhỏ (xe/ngày)","Embankment Width (m)":"Chiều rộng nền (m)","Medium Bus (veh/day)":"Xe buýt cỡ trung (xe/ngày)","Medium Car (veh/day)":"Ô tô cỡ trung (xe/ngày)","Motorcycle (veh/day)":"Xe máy (xe/ngày)","Carriageway Width (m)":"Chiều rộng mặt (m)","Heavy Truck (veh/day)":"Xe tải hạng nặng (xe/ngày)","Light Truck (veh/day)":"Xe tải hạng nhẹ (xe/ngày)","Management Class Code":"Mã cấp quản lý","Number of Lanes Class":"Số làn đường","Road Length (VPRoMMS)":"Chiều dài đường (VProMMS)","Medium Truck (veh/day)":"Xe tải cỡ trung (xe/ngày)","4 Wheel Drive (veh/day)":"Xe hai cầu (xe/ngày)","Total Traffic (veh/day)":"Tổng lưu lượng (xe/ngày)","Drainage Condition Class":"Tình trạng thoát nước","Pavement Condition Class":"Tình trạng mặt đường","Delivery Vehicle (veh/day)":"Xe giao hàng (xe/ngày)","Articulated Truck (veh/day)":"Xe rơ-móoc (xe/ngày)","Traffic Annual Growth Scenario":"Kịch bản gia tăng lưu lượng hàng năm","Length (ORMA)":"Chiều dài (ORMA)","Length (Tabular)":"Chiều dài (Bảng)"}},{}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/actions/action-creators.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.fetchAdmins=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(a){a({type:o.REQUEST_ADMINS});var e=r.default.api+"/admin/units?name="+t+"&limit=10";return console.time("fetch subregions"),(0,n.default)(e).then(function(e){return e.json()}).then(function(e){var t;console.timeEnd("fetch subregions"),a((t=e,{type:o.RECEIVE_ADMINS,json:t,receivedAt:Date.now()}))})}},a.clearAdmins=function(){return{type:o.CLEAR_ADMINS}},a.fetchAdminInfo=function(t){return function(a){a({type:o.REQUEST_ADMIN_INFO});var e=r.default.api+"/admin/"+t+"/info";return(0,n.default)(e).then(function(e){return e.json()}).then(function(e){if(e.statusCode>=400)throw new Error("Bad Request");var t;a((t=e,{type:o.RECEIVE_ADMIN_INFO,json:t}))})}},a.removeAdminInfo=function(){return{type:o.REMOVE_ADMIN_INFO}},a.cleanSearchResults=function(){return{type:o.CLEAN_SEARCH_RESULTS}},a.fetchSearchResults=function(t){return function(a){var e;return a((e=t,{type:o.REQUEST_SEARCH_RESULTS,query:e})),console.time("fetch search results"),(0,n.default)(r.default.api+"/admin/search/"+t).then(function(e){return e.json()}).then(function(e){var t;console.timeEnd("fetch search results"),a((t=e,{type:o.RECEIVE_SEARCH_RESULTS,json:t,receivedAt:Date.now()}))})}},a.selectExploreMapLayer=function(e){return{type:o.SELECT_EXPLORE_MAP_LAYER,layer:e}},a.exploreMapShowNoVpromms=function(e){return{type:o.EXPLORE_MAP_SHOW_NO_VPROMMS,bool:e}},a.fetchFieldVProMMsIds=function(e){return function(a){a({type:o.REQUEST_VPROMMS_FIELD_IDS});var e=r.default.api+"/field/ids";return(0,n.default)(e).then(function(e){return e.json()}).then(function(e){if(e.statusCode>=400)throw new Error("Bad Response");var t;a((t=e,{type:o.RECEIVE_VPROMMS_FIELD_IDS,json:t}))})}},a.setSearchType=function(e){return{type:o.SET_SEARCH_TYPE,text:e}},a.setFilteredVProMMs=function(e){return{type:o.SET_FILTERED_VPROMMS,array:e}},a.fetchAdminBbox=function(t){return function(a){a({type:o.REQUEST_ADMIN_BBOX});var e=r.default.api+"/admin/"+t+"/info";return(0,n.default)(e).then(function(e){return e.json()}).then(function(e){if(e.statusCode>=400)throw new Error("Bad response");var t;a((t=e,{type:o.RECEIVE_ADMIN_BBOX,json:t}))})}},a.fetchProvinces=function(){return function(a){a({type:o.REQUEST_PROVINCES});var e=r.default.api+"/admin/province/units";return(0,n.default)(e).then(function(e){return e.json()}).then(function(e){if(e.statusCode>=400)throw new Error("Bad response");var t;a((t=e,{type:o.RECEIVE_PROVINCES,json:t}))})}};var n=s(e("isomorphic-fetch")),o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}}(e("./action-types")),r=s(e("../config"));function s(e){return e&&e.__esModule?e:{default:e}}},{"../config":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/config.js","./action-types":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/actions/action-types.js","isomorphic-fetch":"isomorphic-fetch"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/actions/action-types.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.REQUEST_ADMIN_INFO="REQUEST_ADMIN_INFO",a.RECEIVE_ADMIN_INFO="RECEIVE_ADMIN_INFO",a.REMOVE_ADMIN_INFO="REMOVE_ADMIN_INFO",a.REQUEST_ADMINS="REQUEST_ADMINS",a.RECEIVE_ADMINS="RECEIVE_ADMINS",a.CLEAR_ADMINS="CLEAR_ADMINS",a.REQUEST_SEARCH_RESULTS="REQUEST_ADMIN_SEARCH_RESULTS",a.RECEIVE_SEARCH_RESULTS="RECEIVE_ADMIN_SEARCH_RESULTS",a.CLEAN_SEARCH_RESULTS="CLEAN_SEARCH_RESULTS",a.SET_FILTERED_VPROMMS="SET_FILTERED_VPROMMS",a.REQUEST_VPROMMS_BBOX="REQUEST_VPROMMS_BBOX",a.RECIEVE_VPROMMS_BBOX="RECIEVE_VPROMMS_BBOX",a.REQUEST_VPROMMS_FIELD_IDS="REQUEST_VPROMMS_FIELD_IDS",a.RECEIVE_VPROMMS_FIELD_IDS="RECEIVE_VPROMMS_FIELD_IDS",a.SELECT_EXPLORE_MAP_LAYER="SELECT_EXPLORE_MAP_LAYER",a.EXPLORE_MAP_SHOW_NO_VPROMMS="EXPLORE_MAP_SHOW_NO_VPROMMS",a.REQUEST_ADMIN_BBOX="REQUEST_ADMIN_BBOX",a.RECEIVE_ADMIN_BBOX="RECEIVE_ADMIN_BBOX",a.SET_SEARCH_TYPE="SET_SEARCH_TYPE",a.REQUEST_PROVINCES="REQUEST_PROVINCES",a.RECEIVE_PROVINCES="RECEIVE_PROVINCES"},{}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/assets-create.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}(),r=e("react"),s=_(r),l=_(e("classnames")),i=e("react-redux"),c=e("recompose"),u=e("redux-fractal"),d=e("redux"),p=e("react-router"),m=e("../redux/modules/roads"),f=e("../config"),h=e("../components/t"),E=_(h),g=e("./modal");function _(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function R(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var S=function(e){function a(e){v(this,a);var t=y(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.onSave=t.onSave.bind(t),t.onCloseClick=t.onCloseClick.bind(t),t.state=t.prepareState(e),t}var t,n;return R(a,s.default.Component),o(a,[{key:"componentWillReceiveProps",value:function(e){!this.props.revealed&&e.revealed&&this.setState(this.prepareState(e))}},{key:"prepareState",value:function(e){return{vpromm:""}}},{key:"onValueChange",value:function(e,t){var a,n,o;this.setState((a={},n=e,o=t.target.value,n in a?Object.defineProperty(a,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[n]=o,a))}},{key:"onCloseClick",value:function(e){this.props.roadPropsOp.processing||this.props.onCloseClick()}},{key:"onSave",value:(t=regeneratorRuntime.mark(function e(t){var a,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.state.vpromm,e.prev=2,e.next=5,this.props.createRoad(a);case 5:if(!(n=e.sent).error){e.next=8;break}throw new Error(n.error);case 8:this.props.onCloseClick({action:"redirect",vpromm:a}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),alert((0,h.translate)(this.props.language,"The Vpromm Id id not valid. Please try again."));case 14:case"end":return e.stop()}},e,this,[[2,11]])}),n=function(){var l=t.apply(this,arguments);return new Promise(function(r,s){return function t(e,a){try{var n=l[e](a),o=n.value}catch(e){return void s(e)}if(!n.done)return Promise.resolve(o).then(function(e){t("next",e)},function(e){t("throw",e)});r(o)}("next")})},function(e){return n.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.roadPropsOp.processing;return s.default.createElement(g.Modal,{id:"assets-edit-modal",className:"modal--medium",onCloseClick:this.onCloseClick,revealed:this.props.revealed},s.default.createElement(g.ModalHeader,null,s.default.createElement("div",{className:"modal__headline"},s.default.createElement("h1",{className:"modal__title"},s.default.createElement(E.default,null,"Add new asset")))),s.default.createElement(g.ModalBody,null,s.default.createElement("form",{className:(0,l.default)("form",{disabled:e}),disabled:e,onSubmit:this.onSave},s.default.createElement("div",{className:"inner"},s.default.createElement("fieldset",{className:"form__fieldset"},s.default.createElement("legend",{className:"form__legend"},s.default.createElement(E.default,null,"Meta")),s.default.createElement("div",{className:"form__group"},s.default.createElement("label",{className:"form__label",htmlFor:"vpromm"},"VPRoMM ID"),s.default.createElement("input",{type:"text",id:"vpromm",name:"vpromm",className:"form__control",value:this.state.vpromm,onChange:this.onValueChange.bind(this,"vpromm")})))))),s.default.createElement(g.ModalFooter,null,s.default.createElement("button",{className:(0,l.default)("mfa-xmark",{disabled:e}),disabled:e,type:"button",onClick:this.onCloseClick},s.default.createElement("span",null,"Cancel")),s.default.createElement("button",{className:(0,l.default)("mfa-main mfa-tick",{disabled:e}),disabled:e,type:"submit",onClick:this.onSave},s.default.createElement("span",null,"Save"))))}}]),a}();"production"!==f.environment&&(S.propTypes={revealed:r.PropTypes.bool,roadPropsOp:r.PropTypes.object,onCloseClick:r.PropTypes.func,createRoad:r.PropTypes.func,language:r.PropTypes.string});var O=function(e){function a(e){v(this,a);var t=y(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.onCreateAssetClick=t.onCreateAssetClick.bind(t),t.onModalClose=t.onModalClose.bind(t),t.state={createModalOpen:!1},t}return R(a,s.default.Component),o(a,[{key:"onModalClose",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState({createModalOpen:!1}),"redirect"===t.action&&setTimeout(function(){e.props.router.push({pathname:"/"+e.props.language+"/assets/road/"+t.vpromm+"/"})},0)}},{key:"onCreateAssetClick",value:function(e){e.preventDefault(),this.setState({createModalOpen:!0})}},{key:"render",value:function(){return s.default.createElement("div",null,s.default.createElement("a",{href:"#",className:"ica-plus ica-main",onClick:this.onCreateAssetClick},s.default.createElement(E.default,null,"Add asset")),s.default.createElement(S,{revealed:this.state.createModalOpen,language:this.props.language,onCloseClick:this.onModalClose,createRoad:this.props.createRoad,roadPropsOp:this.props.roadPropsOp}))}}]),a}();"production"!==f.environment&&(O.propTypes={router:r.PropTypes.object,createRoad:s.default.PropTypes.func,language:s.default.PropTypes.string,roadPropsOp:s.default.PropTypes.object});var C={processing:!1,data:{}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments[1];switch(t.type){case m.CREATE_ROAD:return n({},e,{processing:!0,error:!1});case m.CREATE_ROAD_SUCCESS:return n({},e,{processing:!1,error:!1,data:t.data});case m.CREATE_ROAD_ERROR:return n({},e,{processing:!1,error:!0})}return e};a.default=(0,c.compose)(p.withRouter,(0,c.getContext)({language:s.default.PropTypes.string}),(0,u.local)({key:function(e){e.vpromm;return"create-road"},createStore:function(){return(0,d.createStore)(T)},mapStateToProps:function(e){return{roadPropsOp:e}},filterGlobalActions:function(e){var t=e.type;return[m.CREATE_ROAD,m.CREATE_ROAD_SUCCESS,m.CREATE_ROAD_ERROR].indexOf(t)>-1}}),(0,i.connect)(function(e,t){return{}},function(e){return{createRoad:function(){return e(m.createRoadEpic.apply(void 0,arguments))}}}))(O)},{"../components/t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js","../config":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/config.js","../redux/modules/roads":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/roads.js","./modal":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/modal.js",classnames:"classnames",react:"react","react-redux":"react-redux","react-router":"react-router",recompose:"recompose",redux:"redux","redux-fractal":"redux-fractal"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/assets-edit-modal.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}(),n=e("react"),r=d(n),s=d(e("classnames")),l=e("lodash"),i=d(e("../components/t")),c=e("./modal"),u=e("../config");function d(e){return e&&e.__esModule?e:{default:e}}var p=0,m=function(e){return e+"-"+ ++p},f=function(e){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.addProperty=t.addProperty.bind(t),t.renderExistingProperties=t.renderExistingProperties.bind(t),t.renderNewProperties=t.renderNewProperties.bind(t),t.onSave=t.onSave.bind(t),t.onCloseClick=t.onCloseClick.bind(t),t.state=t.prepareState(e),t}var t,n;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,r.default.Component),o(a,[{key:"componentWillReceiveProps",value:function(e){!this.props.revealed&&e.revealed&&this.setState(this.prepareState(e))}},{key:"prepareState",value:function(e){var t=e.roadProps.data.properties,a=Object.keys(t);return a.sort(function(e,t){return e.toLowerCase()>t.toLowerCase()?1:-1}),{vpromm:e.vpromm,properties:a.map(function(e){return{id:m("property"),key:e,value:t[e],valueOriginal:t[e],existing:!0}}),propertiesToRemove:[]}}},{key:"getBaseProperty",value:function(){return{id:m("property"),key:"",value:"",existing:!1}}},{key:"addProperty",value:function(){var e=this.state.properties.concat(this.getBaseProperty());this.setState({properties:e})}},{key:"removeProperty",value:function(t){var e=this.state.properties.find(function(e){return e.id===t}),a=this.state.properties.filter(function(e){return e.id!==t}),n=this.state.propertiesToRemove;e.existing&&(n=n.concat(e)),this.setState({properties:a,propertiesToRemove:n})}},{key:"onValueChange",value:function(e,t){var a,n,o;this.setState((a={},n=e,o=t.target.value,n in a?Object.defineProperty(a,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[n]=o,a))}},{key:"onPropertyChange",value:function(e,t,a){var n=(0,l.clone)(this.state.properties),o=(0,l.findIndex)(n,["id",e]),r=a.target.value;n[o][t]=r,this.setState({properties:n})}},{key:"onCloseClick",value:function(e){this.props.roadPropsOp.processing||this.props.onCloseClick()}},{key:"onSave",value:(t=regeneratorRuntime.mark(function e(t){var a,n,o,r,s,l,i,c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=this.state.properties.filter(function(e){return!e.existing&&""!==e.key}),n=this.state.properties.filter(function(e){return e.existing&&e.value!==e.valueOriginal}),o=this.state.propertiesToRemove,r=this.props.vpromm,s=this.state.vpromm,l=s!==r,e.prev=7,i={},!(a.length||n.length||o.length)){e.next=16;break}return e.next=12,this.props.opOnRoadProperty(this.props.vpromm,{add:a,replace:n,remove:o});case 12:if(!(c=e.sent).error){e.next=15;break}throw new Error(c.error);case 15:i={action:"refresh"};case 16:if(!l){e.next=23;break}return e.next=19,this.props.editRoad(r,s);case 19:if(!(u=e.sent).error){e.next=22;break}throw new Error(u.error);case 22:i={action:"redirect",vpromm:s};case 23:this.props.onCloseClick(i),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(7),alert("An error occurred while saving. Please try again.");case 29:case"end":return e.stop()}},e,this,[[7,26]])}),n=function(){var l=t.apply(this,arguments);return new Promise(function(r,s){return function t(e,a){try{var n=l[e](a),o=n.value}catch(e){return void s(e)}if(!n.done)return Promise.resolve(o).then(function(e){t("next",e)},function(e){t("throw",e)});r(o)}("next")})},function(e){return n.apply(this,arguments)})},{key:"renderExistingProperties",value:function(e){var t=e.id,a=e.key,n=e.value;return r.default.createElement("div",{className:"form__group",key:t},r.default.createElement("div",{className:"form__inner-header"},r.default.createElement("div",{className:"form__inner-headline"},r.default.createElement("label",{className:"form__label",htmlFor:t},a)),r.default.createElement("div",{className:"form__inner-actions"},r.default.createElement("button",{type:"button",className:"fia-trash",title:"Delete property",onClick:this.removeProperty.bind(this,t)},r.default.createElement("span",null,"Delete")))),r.default.createElement("input",{type:"text",id:t,name:t,className:"form__control",value:n,onChange:this.onPropertyChange.bind(this,t,"value")}))}},{key:"renderNewProperties",value:function(e){var t=e.id,a=e.key,n=e.value;return r.default.createElement("fieldset",{className:"form__fieldset",key:t},r.default.createElement("div",{className:"form__inner-header"},r.default.createElement("div",{className:"form__inner-headline"},r.default.createElement("legend",{className:"form__legend"},r.default.createElement(i.default,null,"New attribute"))),r.default.createElement("div",{className:"form__inner-actions"},r.default.createElement("button",{type:"button",className:(0,s.default)("fia-trash"),title:"Delete property",onClick:this.removeProperty.bind(this,t)},r.default.createElement("span",null,"Delete")))),r.default.createElement("div",{className:"form__hascol form__hascol--2"},r.default.createElement("div",{className:"form__group"},r.default.createElement("label",{className:"form__label",htmlFor:"key-"+t},"Name"),r.default.createElement("input",{type:"text",id:"key-"+t,name:"key-"+t,className:"form__control",value:a,onChange:this.onPropertyChange.bind(this,t,"key")})),r.default.createElement("div",{className:"form__group"},r.default.createElement("label",{className:"form__label",htmlFor:"value-"+t},"Value"),r.default.createElement("input",{type:"text",id:"value-"+t,name:"value-"+t,className:"form__control",value:n,onChange:this.onPropertyChange.bind(this,t,"value")}))))}},{key:"render",value:function(){var e=this.props.roadPropsOp.processing;return r.default.createElement(c.Modal,{id:"assets-edit-modal",className:"modal--medium",onCloseClick:this.onCloseClick,revealed:this.props.revealed},r.default.createElement(c.ModalHeader,null,r.default.createElement("div",{className:"modal__headline"},r.default.createElement("h1",{className:"modal__title"},r.default.createElement(i.default,null,"Edit attributes of")," ",this.props.vpromm))),r.default.createElement(c.ModalBody,null,r.default.createElement("form",{className:(0,s.default)("form",{disabled:e}),disabled:e,onSubmit:this.onSave},r.default.createElement("div",{className:"inner"},r.default.createElement("fieldset",{className:"form__fieldset"},r.default.createElement("legend",{className:"form__legend"},r.default.createElement(i.default,null,"Meta")),r.default.createElement("div",{className:"form__group"},r.default.createElement("label",{className:"form__label",htmlFor:"vpromm"},"VPRoMM ID"),r.default.createElement("input",{type:"text",id:"vpromm",name:"vpromm",className:"form__control",value:this.state.vpromm,onChange:this.onValueChange.bind(this,"vpromm")}))),r.default.createElement("fieldset",{className:"form__fieldset"},r.default.createElement("legend",{className:"form__legend"},r.default.createElement(i.default,null,"Attributes")),this.state.properties.filter(function(e){return e.existing}).map(this.renderExistingProperties)),this.state.properties.filter(function(e){return!e.existing}).map(this.renderNewProperties),r.default.createElement("div",{className:"form__extra-actions"},r.default.createElement("button",{type:"button",className:"fea-plus",title:"Add new file",onClick:this.addProperty},r.default.createElement("span",null,"New attribute")))))),r.default.createElement(c.ModalFooter,null,r.default.createElement("button",{className:(0,s.default)("mfa-xmark",{disabled:e}),disabled:e,type:"button",onClick:this.onCloseClick},r.default.createElement("span",null,"Cancel")),r.default.createElement("button",{className:(0,s.default)("mfa-main mfa-tick",{disabled:e}),disabled:e,type:"submit",onClick:this.onSave},r.default.createElement("span",null,"Save"))))}}]),a}();"production"!==u.environment&&(f.propTypes={vpromm:n.PropTypes.string,revealed:n.PropTypes.bool,roadProps:n.PropTypes.object,roadPropsOp:n.PropTypes.object,onCloseClick:n.PropTypes.func,opOnRoadProperty:n.PropTypes.func,editRoad:n.PropTypes.func}),a.default=f},{"../components/t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js","../config":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/config.js","./modal":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/modal.js",classnames:"classnames",lodash:"lodash",react:"react"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/confirmation-prompt.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.showConfirm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;if(null===i)throw new Error("<ConfirmationPrompt /> component not mounted");i.setState(Object.assign({},e,{revealed:!0,onConfirm:t,onCancel:a}))};var n,o=e("react"),r=(n=o)&&n.__esModule?n:{default:n},s=e("./modal");var l=function(){},i=null,c=r.default.createClass({displayName:"ConfirmationPrompt",getInitialState:function(){return{onConfirm:l,onCancel:l,revealed:!1,title:"Confirm",description:null,body:r.default.createElement("p",null,"Are you sure")}},keyListener:function(e){this.state.revealed&&13===e.keyCode&&(e.preventDefault(),this.onConfirm())},onConfirm:function(){this.setState({revealed:!1}),this.state.onConfirm()},onCancel:function(){this.setState({revealed:!1}),this.state.onCancel()},componentDidMount:function(){if(null!==i)throw new Error("<ConfirmationPrompt /> component was already mounted. Only 1 is allowed.");i=this,document.addEventListener("keyup",this.keyListener)},componentWillUnmount:function(){document.removeEventListener("keyup",this.keyListener)},render:function(){return r.default.createElement(s.Modal,{id:"confirmation-prompt",className:"modal--small modal--prompt",onCloseClick:this.onCancel,revealed:this.state.revealed},r.default.createElement(s.ModalHeader,null,r.default.createElement("div",{className:"modal__headline"},r.default.createElement("h1",{className:"modal__title"},this.state.title),r.default.createElement("div",{className:"modal__description"},this.state.description))),r.default.createElement(s.ModalBody,null,this.state.body),r.default.createElement(s.ModalFooter,null,r.default.createElement("button",{className:"mfa-xmark",type:"button",onClick:this.onCancel},r.default.createElement("span",null,"Cancel")),r.default.createElement("button",{className:"mfa-main mfa-tick",type:"submit",onClick:this.onConfirm},r.default.createElement("span",null,"Confirm"))))}});a.default=c},{"./modal":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/modal.js",react:"react"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/district-list.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=n(e("react")),r=e("react-router"),s=n(e("./t")),l=e("../constants");function n(e){return e&&e.__esModule?e:{default:e}}a.default=function(e){var t=e.districts,a=e.aaId,n=e.language;return o.default.createElement("nav",{className:"a-subnav"},o.default.createElement("h2",null,o.default.createElement(s.default,null,"Districts")),o.default.createElement("ul",{className:"a-children"},t.filter(function(e){var t=e.id;return void 0!==l.ADMIN_MAP.district[t]}).map(function(e,t){return o.default.createElement("li",{key:e.id},o.default.createElement(r.Link,{className:""===l.ADMIN_MAP.district[e.id]?"disabled":"",to:"/"+n+"/assets/"+a+"/"+e.id},e.name_en))})))}},{"../constants":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/constants.js","./t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js",react:"react","react-router":"react-router"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/dropdown.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}(),o=e("react"),u=r(o),s=r(e("react-tether")),l=e("react-transition-group");function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=[],m=function(e){function a(e){i(this,a);var t=c(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={open:!1},t._bodyListener=t._bodyListener.bind(t),t._toggleDropdown=t._toggleDropdown.bind(t),t}return d(a,u.default.Component),n(a,[{key:"_bodyListener",value:function(e){var t=e.target;if("BODY"!==t.tagName&&"HTML"!==t.tagName&&"dropdown:close"!==e.target.getAttribute("data-hook")){if("SPAN"!==t.tagName||t.parentNode!==this.triggerRef||"dropdown:btn"!==t.parentNode.getAttribute("data-hook"))if("SPAN"!==t.tagName||"dropdown:close"!==t.parentNode.getAttribute("data-hook"))if(t&&"dropdown:btn"===t.getAttribute("data-hook"))t!==this.triggerRef&&this.close();else{do{if(t&&"dropdown:content"===t.getAttribute("data-hook"))break;t=t.parentNode}while(t&&"BODY"!==t.tagName&&"HTML"!==t.tagName);t!==this.dropdownRef&&this.close()}else this.close()}else this.close()}},{key:"_toggleDropdown",value:function(e){e.preventDefault(),this.toggle()}},{key:"componentDidMount",value:function(){p.push(this),window.addEventListener("click",this._bodyListener)}},{key:"componentWillUnmount",value:function(){p.splice(p.indexOf(this),1),window.removeEventListener("click",this._bodyListener)}},{key:"toggle",value:function(){this.setState({open:!this.state.open})}},{key:"open",value:function(){!this.state.open&&this.setState({open:!0})}},{key:"close",value:function(){this.state.open&&this.setState({open:!1})}},{key:"renderTriggerElement",value:function(){var t=this,e=this.props,a=e.id,n=e.triggerTitle,o=e.triggerText,r=e.triggerClassName,s=e.triggerActiveClassName,l=e.triggerElement,i=["drop__toggle"],c={onClick:this._toggleDropdown,"data-hook":"dropdown:btn",ref:function(e){t.triggerRef=e}};return r&&i.push(r),this.state.open&&s&&i.push(s),c.className=i.join(" "),"button"===l?c.type="button":(c.href="#",a&&(c.href+=a)),n&&(c.title=n),u.default.createElement(l,c,u.default.createElement("span",null,o))}},{key:"renderContent",value:function(){var t=this,e=this.props,a=e.id,n=e.direction,o=e.className,r=["drop__content","drop__content--react","drop-trans--"+n],s={ref:function(e){t.dropdownRef=e},"data-hook":"dropdown:content"};return o&&r.push(o),s.className=r.join(" "),a&&(s.id=a),u.default.createElement(l.CSSTransition,{in:this.state.open,appear:!0,unmountOnExit:!0,classNames:"drop-trans",timeout:{enter:300,exit:300}},u.default.createElement(f,{props:s,onChange:this.props.onChange},this.props.children))}},{key:"render",value:function(){var e=this.props,t=e.alignment,a=e.direction,n=void 0;if("up"===a||"down"===a)n=["left","center","right"];else{if("left"!==a&&"right"!==a)throw new Error('Dropdown: direction "'+a+'" is not supported. Use one of: up, down, left, right');n=["top","middle","bottom"]}if(-1===n.indexOf(t))throw new Error('Dropdown: alignment "'+t+'" is not supported when direction is '+a+". Use one of: "+n.join(", "));var o=void 0,r=void 0;switch(a){case"up":o="bottom "+t,r="top "+t;break;case"down":o="top "+t,r="bottom "+t;break;case"right":o=t+" left",r=t+" right";break;case"left":o=t+" right",r=t+" left"}return u.default.createElement(s.default,{attachment:o,targetAttachment:r,constraints:[{to:"scrollParent",attachment:"together"}]},this.renderTriggerElement(),this.renderContent())}}],[{key:"closeAll",value:function(){p.forEach(function(e){return e.close()})}}]),a}();(a.default=m).defaultProps={triggerElement:"button",direction:"down",alignment:"center"};var f=function(e){function t(){return i(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,u.default.Component),n(t,[{key:"componentDidMount",value:function(){this.props.onChange&&this.props.onChange(!0)}},{key:"componentWillUnmount",value:function(){this.props.onChange&&this.props.onChange(!1)}},{key:"render",value:function(){return u.default.createElement("div",this.props.props,this.props.children)}}]),t}()},{react:"react","react-tether":"react-tether","react-transition-group":"react-transition-group"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/map-legend.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=o(e("react")),n=e("recompose"),c=o(e("../utils/line-colors")),u=o(e("./t"));function o(e){return e&&e.__esModule?e:{default:e}}var r=function(e){var t,a=e.layer,n=c.default[a],o="categorical"!==n.type,r=n.stops,s=void 0,l=void 0;return o&&(s=r[0][0],l=r[r.length-1][0]),i.default.createElement("figcaption",{className:"panel legend-panel"},i.default.createElement("div",{className:"panel__body"},i.default.createElement("h3",{className:"map-legend-title"},"iri"===(t=a)?i.default.createElement(u.default,null,"IRI"):"or_width"===t?i.default.createElement(u.default,null,"Width"):"or_condition"===t?i.default.createElement(u.default,null,"Condition"):"or_surface"===t?i.default.createElement(u.default,null,"Surface"):void 0),i.default.createElement("div",null,i.default.createElement("div",{className:"map-legend-scale-container"},i.default.createElement("div",{className:"map-legend-scale"}),i.default.createElement("span",{className:"map-legend-scale-label"},s),i.default.createElement("span",{className:"map-legend-scale-label"},l)),i.default.createElement("div",{className:"map-legend-nodata-container"},i.default.createElement("div",{className:"map-legend-nodata"}),i.default.createElement("span",{className:"map-legend-nodata-label"},i.default.createElement(u.default,null,"No data"))))))};r.propTypes={layer:i.default.PropTypes.string,language:i.default.PropTypes.string},a.default=(0,n.getContext)({language:i.default.PropTypes.string})(r)},{"../utils/line-colors":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/utils/line-colors.js","./t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js",react:"react",recompose:"recompose"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/map-options.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=l(e("react")),n=e("recompose"),r=e("./t"),s=l(r);function l(e){return e&&e.__esModule?e:{default:e}}var i=function(e){var t=e.language,a=e.handleLayerChange,n=e.handleShowNoVpromms;return o.default.createElement("div",{className:"panel options-panel"},o.default.createElement("div",{className:"panel__body"},o.default.createElement("form",{className:"form"},o.default.createElement("div",{className:"form__group"},o.default.createElement("label",{className:"form__label"},o.default.createElement(s.default,null,"Visualized variable")),o.default.createElement("select",{className:"form__control",onChange:function(e){return a(e)}},o.default.createElement("option",{value:"iri"},(0,r.translate)(t,"IRI")))),o.default.createElement("div",{className:"form__group"},o.default.createElement("label",{className:"form__label"},(0,r.translate)(t,"Options")),o.default.createElement("label",{className:"form__option form__option--switch option fos-io",htmlFor:"show-no-vpromms"},o.default.createElement("input",{type:"checkbox",defaultChecked:!0,name:"show-no-vpromms",id:"show-no-vpromms",value:"show-no-vpromms",onChange:function(e){return n(e)}}),o.default.createElement("span",{className:"form__option__ui"}),o.default.createElement("span",{className:"form__option__text"},o.default.createElement(s.default,null,"Road without VPRoMMS ID")," ",o.default.createElement("b",null,"----")))))))};i.propTypes={layer:o.default.PropTypes.string,handleLayerChange:o.default.PropTypes.func,handleShowNoVpromms:o.default.PropTypes.func,language:o.default.PropTypes.string},a.default=(0,n.getContext)({language:o.default.PropTypes.string})(i)},{"./t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js",react:"react",recompose:"recompose"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/map-search.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=m(e("react")),n=m(e("lodash")),o=e("recompose"),s=e("react-redux"),l=e("react-router-redux"),i=e("./t"),c=m(i),u=e("../actions/action-creators"),d=e("../redux/modules/roads"),p=e("react-router");function m(e){return e&&e.__esModule?e:{default:e}}var f=r.default.createClass({displayName:"MapSearch",propTypes:{searchType:r.default.PropTypes.string,fetching:r.default.PropTypes.bool,vpromms:r.default.PropTypes.array,admins:r.default.PropTypes.array,filteredVProMMs:r.default.PropTypes.array,language:r.default.PropTypes.string,_setSearchType:r.default.PropTypes.func,_fetchAdmins:r.default.PropTypes.func,_clearAdmins:r.default.PropTypes.func,_setFilteredVProMMs:r.default.PropTypes.func,fetchRoadBbox:r.default.PropTypes.func,_fetchFieldVProMMsIds:r.default.PropTypes.func,_fetchAdminBbox:r.default.PropTypes.func,fetchRoadProperty:r.default.PropTypes.func},getInitialState:function(){return{searchVal:"",showResults:!0}},componentDidMount:function(){this.props._fetchFieldVProMMsIds(),this.search=n.default.debounce(this.search,300)},componentWillUnmount:function(){this.props._clearAdmins(),this.props._setFilteredVProMMs([])},componentWillReceiveProps:function(e){this.props.language!==e.language&&(this.setState({searchVal:"",showResults:!1}),this.props._clearAdmins(),this.props._setFilteredVProMMs([]))},onClearSearch:function(e){this.setState({searchVal:"",showResults:!1}),this.props._clearAdmins(),this.props._setFilteredVProMMs([])},onSearchTypeChange:function(e){this.props._setSearchType(e.target.value),this.setState({searchVal:"",showResults:!0}),this.props._clearAdmins(),this.props._setFilteredVProMMs([])},onSearchQueryChange:function(e){var t=e.target.value;this.setState({searchVal:t,showResults:!0}),this.search(n.default.trim(t))},onSearchSubmit:function(e){e.preventDefault(),this.setState({showResults:!0}),this.state.searchVal.length&&("Admin"===this.props.searchType&&this.props.admins[0]?(this.searchAdminArea(this.props.admins[0].id),this.setState({searchVal:this.props.admins[0].name_en})):this.props.filteredVProMMs[0]&&(this.searchVProMMsID(this.props.filteredVProMMs[0]),this.setState({searchVal:this.props.filteredVProMMs[0]})))},search:function(t){if("Admin"===this.props.searchType)t.length>0?this.props._fetchAdmins(t):this.props._clearAdmins();else if(t.length>=2){var e=this.props.vpromms.filter(function(e){return e.slice(0,t.length)===t.toUpperCase()});this.props._setFilteredVProMMs(e.slice(0,10))}else this.props._setFilteredVProMMs([])},searchVProMMsID:function(e){var t=this;this.setState({showResults:!1},function(){t.props.fetchRoadBbox(e),t.props.fetchRoadProperty(e)})},searchAdminArea:function(e){var t=this;this.setState({showResults:!1},function(){t.props._fetchAdminBbox(e)})},onAAClick:function(e,t){t.preventDefault(),this.searchAdminArea(e.id),this.setState({searchVal:"en"===this.props.language?e.name_en:e.name_vn})},onVprommClick:function(e,t){t.preventDefault(),this.searchVProMMsID(e),this.setState({searchVal:e})},renderResults:function(){var o=this;if(!this.state.showResults)return null;if(this.props.fetching)return r.default.createElement("div",{className:"search-results"},r.default.createElement("p",{className:"info"},r.default.createElement(c.default,null,"Loading"),"..."));var e="Admin"===this.props.searchType?this.props.admins:this.props.filteredVProMMs,t=null;if("Admin"===this.props.searchType)e.length?t=(0,n.default)(e).groupBy(function(e){return e.level}).reduce(function(e,t,a){e.push(r.default.createElement("h4",{key:"aa-type-admin-"+a},r.default.createElement(c.default,null,"Admin Level")," - ",r.default.createElement(c.default,null,a)));var n=t.reduce(function(e,t){return e.concat(r.default.createElement("li",{key:t.id},r.default.createElement("a",{href:"#",onClick:o.onAAClick.bind(null,t)},"en"===o.props.language?t.name_en:t.name_vn)))},[]);return e.push(r.default.createElement("ul",{key:"aa-admins-"+a},n)),e},[]):this.state.searchVal&&(t=r.default.createElement("p",{className:"info",key:"no-results"},r.default.createElement(c.default,null,"No results available. Please refine your search")));else if("VProMMs"===this.props.searchType&&this.state.searchVal.length>=2)if(e.length){t=[r.default.createElement("h4",{key:"vpromms-title"},"VProMMs")];var a=e.reduce(function(e,t,a){return e.concat(r.default.createElement("li",{key:t},r.default.createElement("a",{href:"#",onClick:o.onVprommClick.bind(null,t)},t)))},[]);t.push(r.default.createElement("ul",{key:"vpromms-list"},a))}else t=r.default.createElement("p",{className:"info",key:"no-results"},r.default.createElement(c.default,null,"No results available. Please refine your search"));return null===t?null:r.default.createElement("div",{className:"search-results"},r.default.createElement("div",{className:"inner"},t))},render:function(){var e=this.props,t=e.language,a=e.searchType;return r.default.createElement("form",{className:"form search",onSubmit:this.onSearchSubmit},r.default.createElement("div",{className:"form__group"},r.default.createElement("label",{className:"form__label",htmlFor:"search-field"},r.default.createElement(c.default,null,"Search")),r.default.createElement("div",{className:"form__input-group form__input-group--medium"},r.default.createElement("select",{className:"form__control",onChange:this.onSearchTypeChange,value:a},r.default.createElement("option",{value:"Admin"},(0,i.translate)(t,"Admin")),r.default.createElement("option",{value:"VProMMs"},"VProMMs")),r.default.createElement("input",{type:"text",id:"search-field",name:"search-field",className:"form__control",placeholder:(0,i.translate)(t,"Search"),value:this.state.searchVal,onChange:this.onSearchQueryChange}),r.default.createElement("button",{type:"button",className:"search__button",onClick:this.onSearchSubmit},r.default.createElement("span",null,r.default.createElement(c.default,null,"Search")))),""!==this.state.searchVal&&r.default.createElement("button",{type:"button",className:"search__clear",title:(0,i.translate)(t,"Clear search"),onClick:this.onClearSearch},r.default.createElement("span",null,r.default.createElement(c.default,null,"Clear search"))),this.renderResults()))}});a.default=(0,o.compose)((0,o.getContext)({language:r.default.PropTypes.string}),p.withRouter,(0,s.connect)(function(e){return{searchType:e.setSearchType.searchType,admins:e.admins.units,vpromms:e.fieldVProMMsids.ids,filteredVProMMs:e.setFilteredVProMMs,fetching:e.admins.fetching}},function(t,e){var a=e.location;return{_fetchFieldVProMMsIds:function(){return t(u.fetchFieldVProMMsIds.apply(void 0,arguments))},_setSearchType:function(){return t(u.setSearchType.apply(void 0,arguments))},_setFilteredVProMMs:function(e){return t((0,u.setFilteredVProMMs)(e))},_clearAdmins:function(){return t((0,u.clearAdmins)())},_fetchAdmins:function(e){return t((0,u.fetchAdmins)(e))},_fetchAdminBbox:function(e){return t((0,u.fetchAdminBbox)(e))},fetchRoadBbox:function(e){t((0,l.push)(Object.assign({},a,{query:Object.assign({},a.query,{activeRoad:e})}))),t((0,d.fetchRoadBboxEpic)(e))},fetchRoadProperty:function(e){t((0,d.fetchRoadPropertyEpic)(e))}}}))(f)},{"../actions/action-creators":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/actions/action-creators.js","../redux/modules/roads":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/roads.js","./t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js",lodash:"lodash",react:"react","react-redux":"react-redux","react-router":"react-router","react-router-redux":"react-router-redux",recompose:"recompose"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/modal.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.ModalFooter=a.ModalBody=a.ModalHeader=a.Modal=void 0;var n,o=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}(),r=e("react"),s=(n=r)&&n.__esModule?n:{default:n},l=e("react-portal"),i=e("react-transition-group");function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=a.Modal=function(e){function a(e){c(this,a);var t=u(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));if(t.componentAddedBodyClass=!1,t.onOverlayClick=t.onOverlayClick.bind(t),t.onCloseClick=t.onCloseClick.bind(t),t.keyListener=t.keyListener.bind(t),t.el=document.createElement("div"),t.el.className="modal-portal-"+Math.random().toString(),t.rootEl=document.querySelector("#site-canvas"),!t.rootEl)throw new Error("Portal root element does not exist.");return t}return d(a,s.default.Component),o(a,[{key:"keyListener",value:function(e){this.props.revealed&&27===e.keyCode&&(e.preventDefault(),this.props.onCloseClick())}},{key:"toggleBodyClass",value:function(e){var t=document.getElementsByTagName("body")[0];e?(this.componentAddedBodyClass=!0,t.classList.add("modal__unscrollable-y")):this.componentAddedBodyClass&&(this.componentAddedBodyClass=!1,t.classList.remove("modal__unscrollable-y"))}},{key:"componentDidUpdate",value:function(){this.toggleBodyClass(this.props.revealed)}},{key:"componentDidMount",value:function(){document.addEventListener("keyup",this.keyListener),this.toggleBodyClass(this.props.revealed),this.rootEl.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.keyListener),this.toggleBodyClass(!1),this.rootEl.removeChild(this.el)}},{key:"onOverlayClick",value:function(e){e.target,e.currentTarget}},{key:"onCloseClick",value:function(e){e.preventDefault(),this.props.onCloseClick(e)}},{key:"getChild",value:function(t){var a=null;return s.default.Children.forEach(this.props.children,function(e){a||e.type!==t||(a=e)}),a}},{key:"render",value:function(){var e=["modal"];return this.props.className&&e.push(this.props.className),s.default.createElement(l.Portal,{node:this.el&&this.el},s.default.createElement(i.CSSTransition,{in:this.props.revealed,appear:!0,unmountOnExit:!0,classNames:"modal",timeout:{enter:300,exit:300}},s.default.createElement("section",{className:e.join(" "),key:"modal-"+this.props.id,onClick:this.onOverlayClick,id:this.props.id},s.default.createElement("div",{className:"modal__inner"},this.getChild(m),this.getChild(f),this.getChild(h)),s.default.createElement("button",{className:"modal__button-dismiss",title:"Close",onClick:this.onCloseClick},s.default.createElement("span",null,"Dismiss")))))}}]),a}();p.defaultProps={revealed:!1,onOverlayClick:function(e){0},onCloseClick:function(e){0}};var m=a.ModalHeader=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,s.default.Component),o(t,[{key:"render",value:function(){return s.default.createElement("header",{className:"modal__header"},this.props.children)}}]),t}();var f=a.ModalBody=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,s.default.Component),o(t,[{key:"render",value:function(){return s.default.createElement("div",{className:"modal__body"},this.props.children)}}]),t}();var h=a.ModalFooter=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,s.default.Component),o(t,[{key:"render",value:function(){return s.default.createElement("footer",{className:"modal__footer"},this.props.children)}}]),t}()},{react:"react","react-portal":"react-portal","react-transition-group":"react-transition-group"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/province-table-column-header.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=n(e("react")),l=n(e("./t")),i=n(e("classnames"));function n(e){return e&&e.__esModule?e:{default:e}}var o=(0,e("recompose").withHandlers)({sortLink:function(e){var t=e.columnKey,a=e.sortLinkHandler;return function(){return a(t)}}})(function(e){var t=e.columnKey,a=e.label,n=e.sortField,o=e.sortOrder,r=e.sortLink;return s.default.createElement("th",{className:"table-properties-head sortable",onClick:r},s.default.createElement("i",{className:(0,i.default)({"collecticon-sort-none":n!==t,"collecticon-sort-asc":n===t&&"asc"===o,"collecticon-sort-desc":n===t&&"desc"===o})}),s.default.createElement(l.default,null,a))});a.default=o},{"./t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js",classnames:"classnames",react:"react",recompose:"recompose"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/province-table-row.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n,o=e("react"),l=(n=o)&&n.__esModule?n:{default:n},i=e("react-router");a.default=function(e){e.id;var t=e.name,a=e.routeId,n=e.osmCount,o=e.count,r=e.percentageComplete,s=e.language;return l.default.createElement("tr",null,l.default.createElement("td",null,l.default.createElement(i.Link,{to:s+"/assets/"+a},l.default.createElement("strong",null,t))),l.default.createElement("td",null,n),l.default.createElement("td",null,o),l.default.createElement("td",null,l.default.createElement("div",{className:"meter"},l.default.createElement("div",{className:"meter__internal",style:{width:r+"%"}}))))}},{react:"react","react-router":"react-router"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/province-table.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,o=!1,r=void 0;try{for(var s,l=e[Symbol.iterator]();!(n=(s=l.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw r}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=o(e("react")),n=e("lodash"),u=o(e("./province-table-row")),d=o(e("./province-table-column-header"));function o(e){return e&&e.__esModule?e:{default:e}}a.default=function(e){var t=e.provinces,l=e.language,o=e.sortField,r=e.sortOrder,s=e.sortHandler;return c.default.createElement("div",{className:"table"},c.default.createElement("table",null,c.default.createElement("thead",null,c.default.createElement("tr",null,[["name","Province"],["osmCount","Field"],["count","Total"],["percentageComplete","Progress"]].map(function(e){var t=i(e,2),a=t[0],n=t[1];return c.default.createElement(d.default,{key:n,columnKey:a,label:n,sortField:o,sortOrder:r,sortLinkHandler:s})}))),c.default.createElement("tbody",null,(0,n.map)((0,n.orderBy)(t,[o],[r]),function(e){var t=e.id,a=e.name,n=e.routeId,o=e.osmCount,r=e.count,s=e.percentageComplete;return c.default.createElement(u.default,{key:t,id:t,name:a,routeId:n,osmCount:o,count:r,percentageComplete:s,language:l})}))))}},{"./province-table-column-header":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/province-table-column-header.js","./province-table-row":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/province-table-row.js",lodash:"lodash",react:"react"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/road-pagination.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=o(e("react")),c=e("lodash"),n=e("recompose"),u=o(e("./t"));function o(e){return e&&e.__esModule?e:{default:e}}var d=(0,n.withHandlers)({buttonClick:function(e){var t=e.setPage,a=e.page;return function(){return t(a)}}})(function(e){var t=e.page,a=e.currentPage,n=e.buttonClick;return i.default.createElement("li",null,t===a?i.default.createElement("strong",null,t):i.default.createElement("button",{className:"button button-base-light",onClick:n},t))});a.default=(0,n.compose)((0,n.withProps)(function(e){var t=e.page,a=e.roadPageCount,n=Math.max(t-10,1);return{start:n,end:Math.min(n+10,a)}}),(0,n.withHandlers)({nextPage:function(e){var t=e.page,a=e.setPage;return function(){return a(Math.max(t+1,1))}},previousPage:function(e){var t=e.page,a=e.roadPageCount,n=e.setPage;return function(){return n(Math.min(t-1,a))}}}))(function(e){var t=e.start,a=e.end,n=e.page,o=e.roadPageCount,r=e.setPage,s=e.nextPage,l=e.previousPage;return i.default.createElement("div",{className:"a-paginator"},i.default.createElement("ul",null,(0,c.range)(t,a+1).map(function(e){return i.default.createElement(d,{key:e,page:e,currentPage:n,setPage:r})})),i.default.createElement("button",{className:"button button-base-light",onClick:l,disabled:1===n},i.default.createElement(u.default,null,"Previous")),i.default.createElement("button",{className:"button button-base-light",onClick:s,disabled:n===o},i.default.createElement(u.default,null,"Next")))})},{"./t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js",lodash:"lodash",react:"react",recompose:"recompose"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/road-progress-bar.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=s(e("react")),n=e("recompose"),r=s(e("./t"));function s(e){return e&&e.__esModule?e:{default:e}}a.default=(0,n.withProps)(function(e){var t=e.roadOsmCount,a=void 0===t?0:t,n=e.roadCount;return{percent:0===n?0:(a/n*100).toFixed(2)}})(function(e){var t=e.percent,a=e.roadOsmCount,n=e.roadCount;return o.default.createElement("div",{className:"a-main__status"},o.default.createElement("h2",null,o.default.createElement("strong",null,t),o.default.createElement("span",null,"% ",o.default.createElement(r.default,null,"of VPRoMMS Ids have field data")," ",o.default.createElement("em",null,"(",a," / ",n,")"))),o.default.createElement("div",{className:"meter"},o.default.createElement("div",{className:"meter__internal",style:{width:t+"%"}})))})},{"./t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js",react:"react",recompose:"recompose"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/road-table-row.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.TableErrorRow=void 0;var o=n(e("react")),r=e("react-router"),s=n(e("classnames")),l=e("../config"),i=n(e("./t"));function n(e){return e&&e.__esModule?e:{default:e}}var c=function(e){var t=e.vpromm,a=(e.properties,e.hasOSMData),n=e.language;e.shouldShowProperties,e.toggleProperties,e.showDeleteView,e.showEditView;return o.default.createElement("tr",null,o.default.createElement("td",null,o.default.createElement(r.Link,{to:"/"+n+"/assets/road/"+t+"/"},o.default.createElement("strong",null,t))),o.default.createElement("td",{className:a?"added":"not-added"},o.default.createElement("div",{className:"a-table-actions"},o.default.createElement(r.Link,{className:"a-table-action",to:"/"+n+"/assets/road/"+t+"/"},o.default.createElement(i.default,null,"View")),o.default.createElement("a",{className:(0,s.default)("a-table-action",{disabled:!a}),href:l.api+"/properties/roads/"+t+".geojson?download",disabled:!a},o.default.createElement(i.default,null,"Download")))))},u=function(e){if("read"===e.viewState)return o.default.createElement(c,e)};u.propTypes={viewState:o.default.PropTypes.string.isRequired};a.TableErrorRow=function(){return o.default.createElement("tr",{className:"error-row"},o.default.createElement("td",null),o.default.createElement("td",{colSpan:"3"},o.default.createElement("p",{className:"invalid"},o.default.createElement("strong",null,o.default.createElement(i.default,null,"Error")))))};a.default=u},{"../config":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/config.js","./t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js",classnames:"classnames",react:"react","react-router":"react-router"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/road-table.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var c=n(e("react")),u=n(e("lodash")),d=n(e("../containers/road-table-row-container")),p=n(e("./road-pagination")),m=n(e("./road-progress-bar")),f=n(e("./t"));function n(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t=e.roadsPage,a=e.roadsPageStatus,n=e.roadCount,o=e.roadPageCount,r=e.roadOsmCount,s=e.roadCountStatus,l=e.page,i=(e.sortField,e.sortOrder,e.sortColumnAction,e.setPage);return c.default.createElement("div",{className:"table-container"},"complete"===s&&n>0&&c.default.createElement(m.default,{roadOsmCount:r,roadCount:n}),"pending"===a?c.default.createElement("div",{className:"a-subnav loading"},c.default.createElement("h2",null,c.default.createElement(f.default,null,"Loading"))):"error"===a?c.default.createElement("div",{className:"a-subnav error"},c.default.createElement("h2",null,c.default.createElement(f.default,null,"Error"))):c.default.createElement("div",{className:"table a-table"},c.default.createElement("table",null,c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("th",{className:"table-properties-head"},c.default.createElement(f.default,null,"VPRoMMS ID")),c.default.createElement("th",{className:"table-properties-head"},c.default.createElement(f.default,null,"Field Data")))),c.default.createElement("tbody",null,u.default.map(t,function(e){return c.default.createElement(d.default,{key:e,vpromm:e})})))),"complete"===s&&c.default.createElement(p.default,{page:l,roadPageCount:o,setPage:i}))};o.propTypes={roadsPage:c.default.PropTypes.array,roadPageCount:c.default.PropTypes.number},a.default=o},{"../containers/road-table-row-container":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/containers/road-table-row-container.js","./road-pagination":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/road-pagination.js","./road-progress-bar":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/road-progress-bar.js","./t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js",lodash:"lodash",react:"react"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/site-header.js":[function(e,t,a){"use strict";var n=u(e("react")),o=e("recompose"),r=e("react-router"),s=u(e("classnames")),l=e("./t"),i=u(l),c=u(e("./dropdown"));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(e,t){return(0,s.default)("drop__menu-item",{"drop__menu-item--active":e===t})},p=function(e){var t=e.language,a=e.pathname;return n.default.createElement("header",{className:"site__header"},n.default.createElement("div",{className:"inner"},n.default.createElement("div",{className:"site__headline"},n.default.createElement("h1",{className:"site__title"},n.default.createElement(r.Link,{to:"/"+t},n.default.createElement("img",{src:"assets/graphics/layout/openroads-vn-logo-hor-neg.svg",width:"736",height:"96",alt:"OpenRoads Vietnam logo"}),n.default.createElement("span",null,"OpenRoads")," ",n.default.createElement("strong",null,"Vietnam")))),n.default.createElement("nav",{className:"site__nav",role:"navigation"},n.default.createElement(c.default,{className:"site__menu-language",triggerClassName:"button-language",triggerActiveClassName:"button--active",triggerText:"en"===t?"English":"Tiếng Việth",triggerTitle:(0,l.translate)(t,"Change Language"),direction:"down",alignment:"center"},n.default.createElement("h3",{className:"drop__title"},n.default.createElement(i.default,null,"Select language")),n.default.createElement("ul",{className:"drop__menu drop__menu--select"},n.default.createElement("li",null,n.default.createElement(r.Link,{to:a.replace(/^\/[a-z]+/,"/en"),className:d(t,"en")},"English")),n.default.createElement("li",null,n.default.createElement(r.Link,{to:a.replace(/^\/[a-z]+/,"/vi"),className:d(t,"vi")},"Tiếng Việt")))),n.default.createElement("ul",{className:"site__menu-global"},n.default.createElement("li",null,n.default.createElement(r.Link,{to:"/"+t+"/assets",className:"site__menu-global-item",activeClassName:"site__menu-global-item--active"},n.default.createElement(i.default,null,"Assets"))),n.default.createElement("li",null,n.default.createElement(r.Link,{to:"/"+t+"/explore",className:"site__menu-global-item",activeClassName:"site__menu-global-item--active"},n.default.createElement(i.default,null,"Explore"))),n.default.createElement("li",null,n.default.createElement(r.Link,{to:"/"+t+"/editor",className:"site__menu-global-item",activeClassName:"site__menu-global-item--active"},n.default.createElement(i.default,null,"Editor"))),n.default.createElement("li",null,n.default.createElement(r.Link,{to:"/"+t+"/tasks",className:"site__menu-global-item",activeClassName:"site__menu-global-item--active"},n.default.createElement(i.default,null,"Tasks"))),n.default.createElement("li",null,n.default.createElement(r.Link,{to:"/"+t+"/upload",className:"site__menu-global-item",activeClassName:"site__menu-global-item--active"},n.default.createElement(i.default,null,"Upload"))),n.default.createElement("li",null,n.default.createElement(r.Link,{to:"/"+t+"/faq",className:"site__menu-global-item",activeClassName:"site__menu-global-item--active"},n.default.createElement(i.default,null,"FAQ")))))))};p.propTypes={language:n.default.PropTypes.string.isRequired,pathname:n.default.PropTypes.string.isRequired},t.exports=(0,o.compose)((0,o.getContext)({language:n.default.PropTypes.string}),r.withRouter,(0,o.mapProps)(function(e){return{language:e.language,pathname:e.router.location.pathname}}))(p)},{"./dropdown":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/dropdown.js","./t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js",classnames:"classnames",react:"react","react-router":"react-router",recompose:"recompose"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.translate=void 0;var n=e("react"),o=i(n),r=e("recompose"),s=i(e("../../locales/source/en.json")),l=i(e("../../locales/vi.json"));function i(e){return e&&e.__esModule?e:{default:e}}a.translate=function(e,t){return"en"===e&&s.default[t]?s.default[t]:"vi"===e&&l.default[t]?l.default[t]:("en"===e&&console.warn("No english translation for",t),t)};var c=function(e){var t=e.language,a=e.children;return"en"===t&&s.default[a]?o.default.createElement("span",null,s.default[a]):"vi"===t&&l.default[a]?o.default.createElement("span",null,l.default[a]):("en"===t&&console.warn("No english translation for",a),o.default.createElement("span",null,a))};c.propTypes={language:n.PropTypes.string.isRequired,children:n.PropTypes.string.isRequired},a.default=(0,r.getContext)({language:n.PropTypes.string})(c)},{"../../locales/source/en.json":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/locales/source/en.json","../../locales/vi.json":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/locales/vi.json",react:"react",recompose:"recompose"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/task-list-item.js":[function(e,t,a){"use strict";var s=o(e("react")),l=e("../components/t"),n=o(l);function o(e){return e&&e.__esModule?e:{default:e}}var r=s.default.createClass({displayName:"TaskListItem",propTypes:{_id:s.default.PropTypes.string,vpromm:s.default.PropTypes.string,province:s.default.PropTypes.object,mode:s.default.PropTypes.string,type:s.default.PropTypes.string,language:s.default.PropTypes.string,selected:s.default.PropTypes.bool,isHighlighted:s.default.PropTypes.bool,toggleSelect:s.default.PropTypes.func,onMouseOver:s.default.PropTypes.func,onMouseOut:s.default.PropTypes.func},toggleSelect:function(){var e=this.props,t=e._id,a=e.toggleSelect;a(t)},handleMouseOver:function(){var e=this.props,t=e._id;(0,e.onMouseOver)(t)},handleMouseOut:function(){var e=this.props,t=e._id;(0,e.onMouseOut)(t)},renderCheckbox:function(){var e=this.props,t=e._id,a=e.selected;return s.default.createElement("label",{className:"form__option form__option--custom-checkbox"},s.default.createElement("input",{type:"checkbox",name:"road-"+t+"--checkbox",id:"road-"+t+"--checkbox",value:"road-"+t,onChange:this.toggleSelect,checked:a}),s.default.createElement("span",{className:"form__option__ui"}),s.default.createElement("span",{className:"form__option__text visually-hidden"},s.default.createElement(n.default,null,"Selected")))},renderRadio:function(){var e=this.props,t=e._id,a=e.selected;return s.default.createElement("label",{className:"form__option form__option--custom-radio"},s.default.createElement("input",{type:"radio",name:"road-group--radio",id:"road-"+t+"--radio",value:"road-"+t,onChange:this.toggleSelect,checked:a}),s.default.createElement("span",{className:"form__option__ui"}),s.default.createElement("span",{className:"form__option__text visually-hidden"},s.default.createElement(n.default,null,"Selected")))},render:function(){var e=this.props,t=e.vpromm,a=e.language,n=e.type,o=e.isHighlighted,r=e.province;return s.default.createElement("li",{className:"road-list__item",onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},s.default.createElement("article",{className:"road "+(o?"road--highlight":""),id:"road-{_id}"},s.default.createElement("header",{className:"road__header"},s.default.createElement("div",{className:"road__headline"},s.default.createElement("h1",{className:"road__title"},t||(0,l.translate)(a,"No ID")),t&&s.default.createElement("p",{className:"road__subtitle"},r.name_en)),s.default.createElement("div",{className:"road__h-actions"},"checkbox"===n&&this.renderCheckbox(),"radio"===n&&this.renderRadio()))))}});t.exports=r},{"../components/t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js",react:"react"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/config.js":[function(e,t,a){"use strict";var n=e("lodash"),o={local:e("./config/local.js"),production:e("./config/production.js"),staging:e("./config/staging.js")},r=o.local||{};(0,n.defaultsDeep)(r,o.staging),(0,n.defaultsDeep)(r,o.production),t.exports=r},{"./config/local.js":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/config/local.js","./config/production.js":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/config/production.js","./config/staging.js":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/config/staging.js",lodash:"lodash"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/config/local.js":[function(e,t,a){"use strict";t.exports={}},{}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/config/production.js":[function(e,t,a){"use strict";t.exports={environment:"production",api:"http://api.openroads-vn.com",mbToken:"pk.eyJ1Ijoib3BlbnJvYWRzIiwiYSI6InJ0aUQ2N3MifQ.R3hdFqriZr6kEUr-j_FYpg",editorUrl:"//editor.openroads-vn.com",roadNetTileLayerUrl:"http://api.openroads-vn.com:3000/dashboard/{z}/{x}/{y}.png",provinceDumpBaseUrl:"https:/openroads-vn-dumps-prod.s3.amazonaws.com/by-province-id/"}},{}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/config/staging.js":[function(e,t,a){"use strict";t.exports={environment:"staging"}},{}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/constants.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.ADMIN_MAP={province:{101:"",103:"",104:"",106:"",107:"",109:"",111:"",113:{id:"67",name:"Nam Dinh"},115:"",117:"",201:{id:"03",name:"Ha Giang"},203:{id:"04",name:"Cao Bang"},205:{id:"02",name:"Lao Cai"},207:{id:"53",name:"Bac Kan"},209:{id:"09",name:"Lang Son"},401:{id:"21",name:"Thanh Hoa"},403:{id:"22",name:"Nghe An"},405:{id:"23",name:"Ha Tinh"},407:"",409:{id:"25",name:"Quang Tri"},411:{id:"26",name:"Thua Thien Hue"},501:"",503:{id:"27",name:"Quang Nam"},505:"",507:{id:"31",name:"Binh Dinh"},509:"",511:"",601:"",603:"",605:"",606:"",607:"",701:"",705:"",707:"",709:"",711:"",713:"",715:"",717:"",801:"",803:"",805:"",807:"",809:"",810:"",811:"",813:"",814:{id:"24",name:"Quang Binh"},815:"",816:"",817:"",819:"",821:"",823:""},district:{40319:"TK",40305:"QP",40329:"DL",40313:"NG",40309:"KS",40331:"TC",40315:"TD",40335:"ND",40337:"HN",40317:"QL",40323:"YT",40303:"CL",40314:"",40307:"QC",40325:"DC",40333:"NL",40327:"AS",40311:"QH",40321:"CC",40301:"VI",40507:"DT",40501:"HT",40515:"CX",40517:"HK",40503:"HL",40519:"KA",40512:"",40513:"TH",40509:"HS",40505:"NX",40510:"VQ",40511:"CL",81410:"DH",40913:"HL",40905:"VL",40915:"HH",40917:"DA",40901:"DH",40906:"CC",40909:"CL",40903:"QT",40911:"TP",40907:"GL",41115:"AL",41105:"QD",41117:"ND",41109:"PV",41103:"PD",41101:"HE",41111:"HU",41107:"HR",41113:"PL",50315:"TB",50325:"NT",50305:"DG",50304:"TG",50319:"HD",50321:"TP",50309:"DB",50318:"",50327:"BT",50311:"DX",50313:"NG",50328:"NM",50317:"QS",50329:"PN",50303:"HA",50323:"PS",50307:"DL",50301:"TK",50715:"TS",50721:"VC",50709:"MN",50711:"VT",50703:"AL",50705:"HN",50719:"TP",50707:"HA",50713:"PC",50701:"QN",50717:"AN",11309:"",11305:"",11315:"",11307:"",11319:"",11303:"",11301:"",11311:"",11313:"",20513:"SP",20509:"BH",20508:"SM",20519:"VB",20507:"BX",20501:"LC",20505:"MK",20511:"BT",20111:"BM",20105:"MV",20107:"YM",20103:"DV",20120:"QG",20101:"HG",20109:"QB",20119:"BQ",20115:"VX",20117:"XM",20113:"HS",20303:"BC",20321:"TA",20311:"TK",20307:"TN",20301:"CB",20318:"PH",20304:"BM",20317:"QY",20315:"HA",20309:"TL",20319:"HL",20313:"NB",20305:"HQ",20911:"VQ",20905:"VL",20917:"CH",20909:"BS",20915:"LB",20901:"LS",20921:"HL",20903:"TD",20907:"BG",20919:"DL",20913:"CA",10133:"",10145:"",10125:"",10115:"",10135:"",10111:"",10131:"",10149:"",10151:"",10109:"",10123:"",10141:"",10108:"",10119:"",10139:"",10103:"",10113:"",10129:"",10153:"",10105:"",10121:"",10147:"",10101:"",10137:"",10117:"",10107:"",10114:"",10127:"",10143:"",10310:"",10323:"",10321:"",10307:"",10315:"",10325:"",10317:"",10305:"",10311:"",10313:"",10309:"",10303:"",10301:"",10314:"",10319:"",10407:"",10401:"",10403:"",10406:"",10402:"",10405:"",10404:"",10409:"",10601:"",10611:"",10612:"",10607:"",10608:"",10609:"",10605:"",10603:"",10723:"",10711:"",10705:"",10713:"",10721:"",10703:"",10717:"",10715:"",10719:"",10701:"",10709:"",10707:"",10907:"",10911:"",10904:"",10902:"",10913:"",10901:"",10905:"",10906:"",10903:"",10909:"",11107:"",11111:"",11103:"",11109:"",11105:"",11101:"",11505:"HH",11515:"TH",11501:"TB",11513:"KX",11509:"NH",11503:"QP",11511:"VT",11507:"TT",11701:"NB",11705:"NQ",11711:"YM",11703:"TD",11709:"HL",11713:"TK",11707:"GV",20515:"BY",20709:"",20704:"",20711:"",20712:"",20703:"",20705:"",20707:"",20701:"",21107:"HY",21105:"CH",21111:"SD",21101:"TQ",21109:"YS",21103:"NH",21309:"MC",21315:"VC",21301:"YB",21313:"",21317:"TT",21311:"TY",21307:"VC",21303:"NL",21305:"LC",21511:"",21513:"",21501:"",21509:"",21503:"",21515:"",21517:"",21507:"",21505:"",21703:"",21719:"",21707:"",21709:"",21718:"",21715:"",21701:"",21720:"",21712:"",21717:"",21713:"",21711:"",21705:"",22109:"",22119:"",22103:"",22113:"",22105:"",22111:"",22117:"",22115:"",22107:"",22101:"",22521:"DT",22512:"DH",22513:"TY",22503:"CP",22517:"VP",22507:"BL",22515:"BC",22505:"UB",22525:"YH",22511:"HH",22501:"HL",22519:"HB",22523:"CT",22506:"MC",30117:"TU",30107:"PT",30105:"MT",30109:"SH",30108:"TD",30103:"LC",30211:"",30201:"",30219:"",30203:"",30216:"",30217:"",30215:"",30204:"",30213:"",30315:"SM",30309:"BY",30307:"TC",30303:"QN",30319:"MC",30305:"ML",30301:"SL",30317:"YC",30313:"MS",30316:"SC",30311:"PY",30507:"KS",30510:"CP",30501:"HB",30515:"LC",30513:"TL",30509:"LG",30503:"DR",30517:"LT",30511:"KB",30519:"YT",30505:"MC",40143:"HH",40147:"TS",40107:"ML",40137:"TX",40111:"QS",40145:"DS",40123:"TN",40101:"TH",40125:"NX",40149:"QX",40135:"YD",40151:"NC",40131:"HT",40129:"VL",40153:"TG",40121:"NL",40119:"TT",40141:"TU",40139:"HL",40103:"BS",40133:"NS",40115:"CT",40127:"NT",40105:"SS",40109:"QH",40117:"LC",40113:"BT",40703:"TH",40707:"QT",40713:"LT",40709:"BT",40705:"MH",40701:"DH",40711:"QN",50109:"",50112:"",50103:"",50105:"",50111:"",50107:"",50101:"",50501:"QN",50517:"NH",50519:"ML",50509:"SN",50525:"BT",50511:"SY",50513:"SH",50505:"BS",50503:"LS",50523:"DP",50508:"TT",50507:"TB",50521:"MD",50515:"TN",50912:"SH",50910:"PH",50905:"SC",50901:"TH",50903:"DX",50907:"TA",50909:"SO",50911:"TH",50913:"SH",51108:"",51103:"VN",51107:"DK",51113:"KS",51105:"NH",51102:"CR",51101:"NT",51111:"KV",60114:"",60107:"DT",60111:"DH",60113:"ST",60103:"DG",60109:"KP",60108:"KR",60101:"KT",60105:"NH",60307:"CH",60303:"KB",60315:"DC",60322:"IP",60317:"CG",60319:"CS",60321:"AP",60313:"KC",60309:"IG",60306:"MY",60311:"AK",60324:"",60301:"PL",60305:"DD",60323:"KP",60312:"DP",60513:"BD",60507:"KN",60525:"KB",60517:"MD",60531:"LA",60523:"KA",60503:"EH",60511:"BD",60509:"KK",60515:"EK",60501:"BM",60519:"KP",60524:"",60505:"ES",60629:"",60621:"",60633:"",60632:"",60627:"",60611:"",60634:"",60635:"",60709:"",60713:"",60715:"",60707:"",60719:"",60701:"",60711:"",60705:"",60717:"",60723:"",60703:"",60721:"",70140:"",70119:"",70139:"",70121:"",70101:"",70137:"",70123:"",70135:"",70111:"",70131:"",70105:"",70107:"",70109:"",70129:"",70128:"",70103:"",70113:"",70115:"",70133:"",70117:"",70125:"",70141:"",70127:"",70143:"",70506:"",70501:"",70504:"",70505:"",70503:"",70507:"",70709:"",70708:"",70702:"",70705:"",70703:"",70706:"",70701:"",70707:"",70917:"",70905:"",70903:"",70913:"",70901:"",70911:"",70907:"",70909:"",70915:"",71103:"",71108:"",71102:"",71105:"",71104:"",71101:"",71107:"",71309:"",71310:"",71311:"",71313:"",71305:"",71317:"",71315:"",71307:"",71301:"",71312:"",71303:"",71511:"",71509:"",71507:"",71505:"",71501:"",71513:"",71515:"",71503:"",71502:"",71517:"",71711:"",71705:"",71709:"",71714:"",71703:"",71701:"",71712:"",71707:"",80115:"",80101:"",80127:"",80117:"",80109:"",80107:"",80111:"",80123:"",80105:"",80113:"",80125:"",80103:"",80121:"",80119:"",80313:"",80321:"",80307:"",80317:"",80301:"",80305:"",80319:"",80315:"",80303:"",80309:"",80311:"",80515:"",80517:"",80503:"",80501:"",80511:"",80519:"",80521:"",80509:"",80513:"",80505:"",80507:"",80717:"",80701:"",80707:"",80715:"",80703:"",80711:"",80705:"",80709:"",80713:"",80718:"",80909:"",80911:"",80913:"",80903:"",80908:"",80901:"",80905:"",80907:"",81014:"DT",81105:"",81115:"",81103:"",81113:"",81101:"",81109:"",81111:"",81107:"",81313:"",81311:"",81303:"",81321:"",81304:"",81309:"",81323:"",81305:"",81319:"",81301:"",81317:"",81307:"",81315:"",81325:"",81509:"",81515:"",81511:"",81507:"",81503:"",81501:"",81513:"",81505:"",81603:"",81611:"",81601:"",81602:"",81609:"",81607:"",81605:"",81713:"",81703:"",81715:"",81705:"",81711:"",81709:"",81701:"",81707:"",81907:"",81911:"",81903:"",81901:"",81909:"",81905:"",81912:"",81906:"",81913:"",82109:"",82103:"",82106:"",82105:"",82104:"",82107:"",82101:"",82309:"",82314:"",82305:"",82310:"",82313:"",82311:"",82301:"",82307:"",82303:""}}},{}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/containers/province-table-container.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=s(e("react")),o=e("recompose"),r=s(e("../components/province-table")),i=e("../constants");function s(e){return e&&e.__esModule?e:{default:e}}var l=(0,o.compose)((0,o.getContext)({language:n.default.PropTypes.string}),(0,o.withStateHandlers)({sortField:"name",sortOrder:"asc"},{sortHandler:function(e){var t=e.sortField,a=e.sortOrder;return function(e){return t===e?{sortOrder:"asc"===a?"desc":"asc"}:{sortField:e,sortOrder:"asc"}}}}),(0,o.withProps)(function(e){var t=e.provinces,l=e.provincesRoadCount;return{provinces:t.map(function(e){var t=i.ADMIN_MAP.province[e.id],a=t.id,n=t.name,o=l[a],r=o.count,s=o.osmCount;return{name:n,id:a,routeId:e.id,osmCount:s,count:r,percentageComplete:r>0?s/r*100:0}})}}))(r.default);a.default=l},{"../components/province-table":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/province-table.js","../constants":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/constants.js",react:"react",recompose:"recompose"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/containers/road-table-container.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=d(e("react")),o=e("react-router"),r=e("recompose"),f=e("lodash"),s=e("redux-fractal"),l=e("redux"),i=e("react-redux"),c=d(e("../components/road-table")),h=e("../redux/modules/roads"),E=e("../redux/modules/roadCount"),u=e("../constants");function d(e){return e&&e.__esModule?e:{default:e}}var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sortOrder:"asc",sortField:"id",page:1},t=arguments[1];return"SORT_COLUMN"===t.type?Object.assign({},e,{sortOrder:t.sortOrder,sortField:t.sortField}):"SET_PAGE"===t.type?Object.assign({},e,{page:t.page}):e},m=function(e){var t=e.roadsPage,a=e.roadsPageStatus,n=e.roadPageCount,o=e.roadCountStatus,r=e.province,s=e.district,l=e.page,i=e.sortField,c=e.sortOrder,u=e.fetchRoads,d=e.fetchRoadCount;t||"pending"===a||"error"===a||u(r,s,l,i,c),n||"pending"===o||"error"===o||d(r,s)},g=(0,r.compose)((0,r.getContext)({language:n.default.PropTypes.string}),o.withRouter,(0,s.local)({key:function(e){var t=e.router.params,a=t.aaId,n=void 0===a?"":a,o=t.aaIdSub;return"road-table-"+n+"-"+(void 0===o?"":o)},createStore:function(){return(0,l.createStore)(p)},mapDispatchToProps:function(a,e){e.sortOrder;return{sortColumn:function(e,t){return a({type:"SORT_COLUMN",sortField:e,sortOrder:t})},setPage:function(e){return a({type:"SET_PAGE",page:e})}}},filterGlobalActions:function(e){e.type;return!1}}),(0,r.withProps)(function(e){var t=e.router.params,a=t.aaId,n=t.aaIdSub;return{province:u.ADMIN_MAP.province[a]&&u.ADMIN_MAP.province[a].id,district:u.ADMIN_MAP.district[n]}}),(0,i.connect)(function(e,t){var a=t.province,n=t.district,o=t.page,r=t.sortField,s=t.sortOrder,l=(0,h.getRoadPageKey)(a,n,o,r,s),i=e.roads.roadsByPage[l]&&e.roads.roadsByPage[l].roads,c=e.roads.roadsByPage[l]&&e.roads.roadsByPage[l].status,u=void 0,d=void 0,p=void 0;if(n){var m=(0,E.getRoadCountKey)(a,n);u=(0,f.at)(e,["roadCount.districts."+m+".count"])[0],d=(0,f.at)(e,["roadCount.districts."+m+".osmCount"])[0],p=e.roadCount.districts[m]&&e.roadCount.districts[m].status}else u=(0,f.at)(e,"roadCount.provinces.provinceCount."+a+".count")[0],d=(0,f.at)(e,"roadCount.provinces.provinceCount."+a+".osmCount")[0],p=e.roadCount.provinces.status;return{roadsPage:i,roadsPageStatus:c,roadCount:u,roadPageCount:Math.ceil(u/20),roadOsmCount:d,roadCountStatus:p}},function(r){return{fetchRoads:function(e,t,a,n,o){return r((0,h.fetchRoadsEpic)(e,t,a,n,o))},fetchRoadCount:function(e,t){return r(t?(0,E.fetchDistrictRoadCountEpic)(e,t):(0,E.fetchProvincesRoadCountEpic)())}}}),(0,r.withHandlers)({sortColumnAction:function(e){var t=e.sortField,a=e.sortOrder,n=e.sortColumn;return function(e){n(e,t===e&&"asc"===a?"desc":"asc")}}}),(0,r.lifecycle)({componentWillMount:function(){m(this.props)},componentWillReceiveProps:function(e){m(e)}}))(c.default);a.default=g},{"../components/road-table":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/road-table.js","../constants":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/constants.js","../redux/modules/roadCount":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/roadCount.js","../redux/modules/roads":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/roads.js",lodash:"lodash",react:"react","react-redux":"react-redux","react-router":"react-router",recompose:"recompose",redux:"redux","redux-fractal":"redux-fractal"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/containers/road-table-row-container.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=m(e("react")),o=e("recompose"),r=e("react-router"),s=e("react-redux"),l=e("redux-fractal"),i=e("redux"),c=e("../components/road-table-row"),u=m(c),d=e("../redux/modules/roads"),p=e("../constants");function m(e){return e&&e.__esModule?e:{default:e}}var f=(0,o.compose)((0,o.getContext)({language:n.default.PropTypes.string}),r.withRouter,(0,l.local)({key:function(e){return e.vpromm+"-table-row"},createStore:function(e){return(0,i.createStore)((a=e.vpromm,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{viewState:"read",newRoadId:"",shouldShowProperties:!1,formIsInvalid:!1,status:"complete",error:!1,vpromm:a},t=arguments[1];return"SHOW_READ_VIEW"===t.type?Object.assign({},e,{viewState:"read",newRoadId:"",formIsInvalid:!1,status:"complete",error:!1}):"SHOW_EDIT_VIEW"===t.type?Object.assign({},e,{viewState:"edit"}):"SHOW_DELETE_VIEW"===t.type?Object.assign({},e,{viewState:"delete"}):"SHOW_PROPERTIES"===t.type?Object.assign({},e,{shouldShowProperties:!0}):"HIDE_PROPERTIES"===t.type?Object.assign({},e,{shouldShowProperties:!1}):"UPDATE_NEW_ROAD_ID"===t.type?Object.assign({},e,{newRoadId:t.id,formIsInvalid:!1,status:"complete",error:!1}):"FORM_IS_INVALID"===t.type?Object.assign({},e,{formIsInvalid:!0}):t.type===d.EDIT_ROAD&&t.id===e.vpromm?Object.assign({},e,{status:"pending",formIsInvalid:!1}):t.type===d.EDIT_ROAD_SUCCESS&&t.id===e.vpromm?Object.assign({},e,{status:"complete",newRoadId:""}):t.type===d.EDIT_ROAD_ERROR&&t.id===e.vpromm?Object.assign({},e,{status:"error",error:t.error}):t.type===d.DELETE_ROAD&&t.id===e.vpromm?Object.assign({},e,{status:"pending",formIsInvalid:!1}):t.type===d.DELETE_ROAD_SUCCESS&&t.id===e.vpromm?Object.assign({},e,{status:"complete"}):t.type===d.DELETE_ROAD_ERROR&&t.id===e.vpromm?Object.assign({},e,{status:"error",error:t.error}):e}));var a},mapDispatchToProps:function(a,e){var t=e.vpromm;return{showProperties:function(){return a({type:"SHOW_PROPERTIES"})},hideProperties:function(){return a({type:"HIDE_PROPERTIES"})},showReadView:function(e){e.preventDefault(),a({type:"SHOW_READ_VIEW"})},showEditView:function(e){e.preventDefault(),a({type:"SHOW_EDIT_VIEW"})},showDeleteView:function(e){e.preventDefault(),a({type:"SHOW_DELETE_VIEW"})},updateNewRoadId:function(e){var t=e.target.value;return a({type:"UPDATE_NEW_ROAD_ID",id:t})},invalidateForm:function(){return a({type:"FORM_IS_INVALID"})},confirmDelete:function(){return a((0,d.deleteRoadEpic)(t))},submitEdit:function(e){return a((0,d.editRoadEpic)(t,e))}}},filterGlobalActions:function(e){var t=e.type;return[d.EDIT_ROAD,d.EDIT_ROAD_SUCCESS,d.EDIT_ROAD_ERROR,d.DELETE_ROAD,d.DELETE_ROAD_SUCCESS,d.DELETE_ROAD_ERROR].indexOf(t)>-1}}),(0,o.withProps)(function(e){var t=e.router.params,a=t.aaId,n=t.aaIdSub;return{province:p.ADMIN_MAP.province[a]&&p.ADMIN_MAP.province[a].id,district:p.ADMIN_MAP.district[n]}}),(0,s.connect)(function(e,t){var a=t.vpromm;return{road:e.roads.roadsById[a]}}),(0,o.branch)(function(e){return!e.road},(0,o.renderComponent)(c.TableErrorRow)),(0,o.withProps)(function(e){var t=e.road;return{properties:t.properties,hasOSMData:t.hasOSMData}}),(0,o.withHandlers)({toggleProperties:function(e){var t=e.shouldShowProperties,a=e.showProperties,n=e.hideProperties;return function(){return t?n():a()}},confirmEdit:function(e){var t=e.newRoadId,a=e.province,n=e.district,o=e.submitEdit,r=e.invalidateForm;return function(e){if(e.preventDefault(),!(0,d.roadIdIsValid)(t,a,n))return r();o(t)}}}))(u.default);a.default=f},{"../components/road-table-row":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/road-table-row.js","../constants":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/constants.js","../redux/modules/roads":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/roads.js",react:"react","react-redux":"react-redux","react-router":"react-router",recompose:"recompose",redux:"redux","redux-fractal":"redux-fractal"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/main.js":[function(e,t,a){"use strict";e("babel-polyfill");var n=y(e("react")),o=e("react-dom"),r=e("react-redux"),s=e("react-router"),l=y(e("./redux/store")),i=y(e("./views/uhoh")),c=y(e("./views/app")),u=y(e("./views/home")),d=y(e("./views/editor")),p=y(e("./views/tasks")),m=y(e("./views/explore")),f=y(e("./views/assets")),h=y(e("./views/assets-index")),E=y(e("./views/assets-admin-area")),g=y(e("./views/assets-detail")),_=y(e("./views/upload")),v=y(e("./views/faq"));function y(e){return e&&e.__esModule?e:{default:e}}(0,o.render)(n.default.createElement(r.Provider,{store:l.default},n.default.createElement(s.Router,{history:s.hashHistory},n.default.createElement(s.Redirect,{from:"/",to:"/en"}),n.default.createElement(s.Route,{path:"/:lang",component:c.default,onEnter:function(e,t){var a=e.params.lang;"en"!==a&&"vi"!==a&&t("/en/404")}},n.default.createElement(s.Route,{path:"tasks",component:p.default,pageClass:"tasks"}),n.default.createElement(s.Route,{path:"upload",component:_.default,pageClass:"upload"}),n.default.createElement(s.Route,{path:"editor",component:d.default,pageClass:"editor"}),n.default.createElement(s.Route,{path:"editor/*",component:d.default,pageClass:"editor"}),n.default.createElement(s.Route,{path:"explore",component:m.default,pageClass:"explore"}),n.default.createElement(s.Route,{path:"faq",component:v.default,pageClass:"faq"}),n.default.createElement(s.Route,{path:"assets",component:f.default},n.default.createElement(s.IndexRoute,{component:h.default,pageClass:"assets"}),n.default.createElement(s.Route,{path:"road/:vpromm",component:g.default,pageClass:"assets-inner-canvas"}),n.default.createElement(s.Route,{path:":aaId",component:E.default,pageClass:"assets-inner-canvas"}),n.default.createElement(s.Route,{path:":aaId/:aaIdSub",component:E.default,pageClass:"assets-inner-canvas"})),n.default.createElement(s.IndexRoute,{component:u.default,pageClass:"page--landing"}),n.default.createElement(s.Route,{path:"*",component:i.default})))),document.querySelector(".site-canvas"))},{"./redux/store":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/store.js","./views/app":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/app.js","./views/assets":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/assets.js","./views/assets-admin-area":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/assets-admin-area.js","./views/assets-detail":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/assets-detail.js","./views/assets-index":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/assets-index.js","./views/editor":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/editor.js","./views/explore":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/explore.js","./views/faq":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/faq.js","./views/home":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/home.js","./views/tasks":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/tasks.js","./views/uhoh":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/uhoh.js","./views/upload":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/upload.js","babel-polyfill":"babel-polyfill",react:"react","react-dom":"react-dom","react-redux":"react-redux","react-router":"react-router"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/map.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.setMapPosition=a.SET_MAP_POSITION=void 0;var d=e("../../actions/action-types"),p=e("../../utils/zoom"),m=e("./roads"),f=a.SET_MAP_POSITION="SET_MAP_POSITION";a.setMapPosition=function(e,t,a,n){return{type:f,lng:e,lat:t,zoom:a,waySlug:n}};a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{waySlug:null,lat:20.029,lng:105.73,zoom:6},t=arguments[1];if(t.type===f)return Object.assign({},e,{lat:t.lat,lng:t.lng,zoom:t.zoom,way:t.waySlug});if(t.type===d.RECEIVE_ADMIN_BBOX){var a=(0,p.bboxToLngLatZoom)(t.json.bbox),n=a.lng,o=a.lat,r=a.zoom;return Object.assign({},e,{lng:n,lat:o,zoom:r})}if(t.type===m.FETCH_ROAD_BBOX_SUCCESS){var s=(0,p.bboxToLngLatZoom)(t.bbox),l=s.lng,i=s.lat,c=s.zoom;return Object.assign({},e,{lng:l,lat:i,zoom:c})}if(t.type===m.FETCH_ROAD_PROPERTY_SUCCESS){var u="w"+t.properties.way_id;return Object.assign({},e,{waySlug:u})}return e}},{"../../actions/action-types":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/actions/action-types.js","../../utils/zoom":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/utils/zoom.js","./roads":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/roads.js"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/osm.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.deleteEntireWaysEpic=a.queryOsmEpic=a.requestOsmChangeError=a.requestOsmChangeSuccess=a.requestOsmChange=a.REQUEST_OSM_CHANGE_ERROR=a.REQUEST_OSM_CHANGE_SUCCESS=a.REQUEST_OSM_CHANGE=void 0;var s=n(e("xml-reader")),l=e("./tasks"),i=n(e("../../config"));function n(e){return e&&e.__esModule?e:{default:e}}var o=function(e){return new Blob([JSON.stringify(e,null,2)],{type:"application/json"})},c=function(e,t){return fetch(i.default.api+"/changeset/create",{method:"PUT",body:o({uid:555555,user:"Openroads Tasks"})}).then(function(e){if(e.status>=400)throw new Error(e.textStatus);return e.text()})},u=function(e,t,a){return fetch(i.default.api+"/changeset/"+e+"/upload",{method:"POST",body:o({osmChange:a})}).then(function(e){if(e.status>=400)throw new Error(e.textStatus)})},r=a.REQUEST_OSM_CHANGE="REQUEST_OSM_CHANGE",d=a.REQUEST_OSM_CHANGE_SUCCESS="REQUEST_OSM_CHANGE_SUCCESS",p=a.REQUEST_OSM_CHANGE_ERROR="REQUEST_OSM_CHANGE_ERROR",m=a.requestOsmChange=function(e){return{type:r,taskId:e}},f=a.requestOsmChangeSuccess=function(e){return{type:d,taskId:e}},h=a.requestOsmChangeError=function(e){return{type:p,taskId:e}};a.queryOsmEpic=function(a,n){return function(t){t(m(a)),c().then(function(e){return u(e,0,n)}).then(function(){t((0,l.fetchWayTaskEpic)(a)),t(f(a))}).catch(function(e){console.error("Error querying Osm",e),t(h(a))})}},a.deleteEntireWaysEpic=function(o,r){return function(n){return n(m(o)),fetch(i.default.api+"/api/0.6/ways?nodes=true&excludeDoubleLinkedNodes=true&ways="+r.join(",")).then(function(e){if(e.status>=400)throw new Error(e.statusText);return e.text()}).then(function(e){var t=s.default.create({stream:!0}),a=[];t.on("tag:node",function(e){e.attributes.id&&a.push(e.attributes.id)}),t.on("done",function(){var t={delete:{node:a.map(function(e){return{id:e}}),way:r.map(function(e){return{id:e}})}};c().then(function(e){return u(e,0,t)}).then(function(){n((0,l.fetchWayTaskEpic)(o)),n(f(o))}).catch(function(e){console.error("Error Deleting Way",e),n(h(o))})}),t.parse(e)})}};a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:"complete"};switch(arguments[1].type){case r:return Object.assign({},e,{status:"pending"});case d:return Object.assign({},e,{status:"complete"});case p:return Object.assign({},e,{status:"error"})}return e}},{"../../config":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/config.js","./tasks":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/tasks.js","xml-reader":"xml-reader"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/roadCount.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.fetchDistrictRoadCountEpic=a.fetchProvincesRoadCountEpic=a.clearRoadCount=a.fetchDistrictRoadCountError=a.fetchDistrictRoadCountSuccess=a.fetchDistrictRoadCount=a.fetchProvincesRoadCountError=a.fetchProvincesRoadCountSuccess=a.fetchProvincesRoadCount=a.CLEAR_ROAD_COUNT=a.FETCH_DISTRICT_ROAD_COUNT_ERROR=a.FETCH_DISTRICT_ROAD_COUNT_SUCCESS=a.FETCH_DISTRICT_ROAD_COUNT=a.FETCH_PROVINCES_ROAD_COUNT_ERROR=a.FETCH_PROVINCES_ROAD_COUNT_SUCCESS=a.FETCH_PROVINCES_ROAD_COUNT=a.getRoadCountKey=void 0;var n,s=e("url"),o=e("../../config"),l=(n=o)&&n.__esModule?n:{default:n};function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var f=a.getRoadCountKey=function(e,t){return t?e+"-"+t:e},h=a.FETCH_PROVINCES_ROAD_COUNT="FETCH_PROVINCES_ROAD_COUNT",E=a.FETCH_PROVINCES_ROAD_COUNT_SUCCESS="FETCH_PROVINCES_ROAD_COUNT_SUCCESS",g=a.FETCH_PROVINCES_ROAD_COUNT_ERROR="FETCH_PROVINCES_ROAD_COUNT_ERROR",_=a.FETCH_DISTRICT_ROAD_COUNT="FETCH_DISTRICT_ROAD_COUNT",v=a.FETCH_DISTRICT_ROAD_COUNT_SUCCESS="FETCH_DISTRICT_ROAD_COUNT_SUCCESS",y=a.FETCH_DISTRICT_ROAD_COUNT_ERROR="FETCH_DISTRICT_ROAD_COUNT_ERROR",R=a.CLEAR_ROAD_COUNT="CLEAR_ROAD_COUNT",r=a.fetchProvincesRoadCount=function(){return{type:h}},i=a.fetchProvincesRoadCountSuccess=function(e){return{type:E,provinces:e}},c=a.fetchProvincesRoadCountError=function(e){return{type:g,error:e}},u=a.fetchDistrictRoadCount=function(e,t){return{type:_,province:e,district:t}},d=a.fetchDistrictRoadCountSuccess=function(e,t,a,n){return{type:v,province:e,district:t,count:a,osmCount:n}},p=a.fetchDistrictRoadCountError=function(e,t,a){return{type:y,province:e,district:t,error:a}};a.clearRoadCount=function(){return{type:R}},a.fetchProvincesRoadCountEpic=function(){return function(t){return t(r()),fetch(l.default.api+"/admin/roads/total").then(function(e){if(!e.ok)throw new Error(e.status);return e.json()}).then(function(e){t(i(e))}).catch(function(e){return t(c(e))})}},a.fetchDistrictRoadCountEpic=function(o,r){return function(n){return n(u(o,r)),fetch((0,s.format)({pathname:l.default.api+"/properties/roads/count",query:{province:o,district:r}})).then(function(e){if(!e.ok)throw new Error(e.status);return e.json()}).then(function(e){var t=e.count,a=e.osmCount;n(d(o,r,t,a))}).catch(function(e){return n(p(o,r,e))})}};a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{provinces:{},districts:{}},t=arguments[1];if(t.type===h)return Object.assign({},e,{provinces:Object.assign({},e.provinces,{status:"pending"})});if(t.type===E)return Object.assign({},e,{provinces:Object.assign({},e.provinces,{status:"complete",provinceCount:t.provinces})});if(t.type===g)return Object.assign({},e,{provinces:Object.assign({},e.provinces,{status:"error"})});if(t.type===_){var a=t.province,n=t.district,o=f(a,n);return Object.assign({},e,{districts:Object.assign({},e.districts,m({},o,Object.assign({},e.districts[o]||{},{status:"pending"})))})}if(t.type===v){var r=t.province,s=t.district,l=t.count,i=t.osmCount,c=f(r,s);return Object.assign({},e,{districts:Object.assign({},e.districts,m({},c,{status:"complete",count:l,osmCount:i}))})}if(t.type===y){var u=t.province,d=t.district,p=f(u,d);return Object.assign({},e,{districts:Object.assign({},e.districts,m({},p,{status:"error",count:void 0,osmCount:void 0}))})}return t.type===R?{provinces:{},districts:{}}:e}},{"../../config":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/config.js",url:"url"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/roads.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.editRoadIdEpic=a.fetchRoadPropertyEpic=a.fetchRoadBboxEpic=a.deleteRoadPropertyEpic=a.editRoadPropertyEpic=a.opOnRoadPropertyEpic=a.createRoadPropertyEpic=a.deleteRoadEpic=a.editRoadStatusEpic=a.editRoadEpic=a.createRoadEpic=a.fetchRoadGeometryEpic=a.fetchRoadsEpic=a.editRoadIdError=a.editRoadIdSucess=a.editRoadId=a.fetchRoadPropertyError=a.fetchRoadPropertySuccess=a.fetchRoadProperty=a.fetchRoadBboxError=a.fetchRoadBboxSuccess=a.fetchRoadBbox=a.opOnRoadPropertyError=a.opOnRoadPropertySuccess=a.opOnRoadProperty=a.deleteRoadPropertyError=a.deleteRoadPropertySuccess=a.deleteRoadProperty=a.editRoadStatusError=a.editRoadStatusSuccess=a.editRoadStatus=a.editRoadPropertyError=a.editRoadPropertySuccess=a.editRoadProperty=a.createRoadPropertyError=a.createRoadPropertySuccess=a.createRoadProperty=a.createRoadError=a.createRoadSuccess=a.createRoad=a.deleteRoadError=a.deleteRoadSuccess=a.deleteRoad=a.editRoadError=a.editRoadSuccess=a.editRoad=a.fetchRoadGeometryError=a.fetchRoadGeometrySuccess=a.fetchRoadGeometry=a.clearRoadsPages=a.fetchRoadsError=a.fetchRoadsSuccess=a.fetchRoads=a.EDIT_ROAD_ID_ERROR=a.EDIT_ROAD_ID_SUCCESS=a.EDIT_ROAD_ID=a.FETCH_ROAD_PROPERTY_SUCCESS=a.FETCH_ROAD_PROPERTY_ERROR=a.FETCH_ROAD_PROPERTY=a.FETCH_ROAD_BBOX_ERROR=a.FETCH_ROAD_BBOX_SUCCESS=a.FETCH_ROAD_BBOX=a.OP_ON_ROAD_PROPERTY_ERROR=a.OP_ON_ROAD_PROPERTY_SUCCESS=a.OP_ON_ROAD_PROPERTY=a.DELETE_ROAD_PROPERTY_ERROR=a.DELETE_ROAD_PROPERTY_SUCCESS=a.DELETE_ROAD_PROPERTY=a.EDIT_ROAD_STATUS_ERROR=a.EDIT_ROAD_STATUS_SUCCESS=a.EDIT_ROAD_STATUS=a.EDIT_ROAD_PROPERTY_ERROR=a.EDIT_ROAD_PROPERTY_SUCCESS=a.EDIT_ROAD_PROPERTY=a.CREATE_ROAD_PROPERTY_ERROR=a.CREATE_ROAD_PROPERTY_SUCCESS=a.CREATE_ROAD_PROPERTY=a.DELETE_ROAD_ERROR=a.DELETE_ROAD_SUCCESS=a.DELETE_ROAD=a.EDIT_ROAD_ERROR=a.EDIT_ROAD_SUCCESS=a.EDIT_ROAD=a.CREATE_ROAD_ERROR=a.CREATE_ROAD_SUCCESS=a.CREATE_ROAD=a.FETCH_ROAD_GEOMETRY_ERROR=a.FETCH_ROAD_GEOMETRY_SUCCESS=a.FETCH_ROAD_GEOMETRY=a.CLEAR_ROADS_PAGES=a.FETCH_ROADS_ERROR=a.FETCH_ROADS_SUCCESS=a.FETCH_ROADS=a.getRoadPageKey=a.roadIdIsValid=void 0;var n,c=e("url"),S=e("lodash"),o=e("./roadCount"),r=e("../../config"),u=(n=r)&&n.__esModule?n:{default:n};function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.roadIdIsValid=function(e,t,a){return/^\d{3}([A-ZĐ]{2}|00)\d{5}$/.test(e)&&(!t||e.substring(0,2)===t)&&(!a||e.substring(3,5)===a)};var C=a.getRoadPageKey=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")+"-"+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")+"-"+arguments[2]+"-"+arguments[3]+"-"+arguments[4]},T=a.FETCH_ROADS="FETCH_ROADS",P=a.FETCH_ROADS_SUCCESS="FETCH_ROADS_SUCCESS",b=a.FETCH_ROADS_ERROR="FETCH_ROADS_ERROR",k=a.CLEAR_ROADS_PAGES="CLEAR_ROADS_PAGES",s=a.FETCH_ROAD_GEOMETRY="FETCH_ROAD_GEOMETRY",D=a.FETCH_ROAD_GEOMETRY_SUCCESS="FETCH_ROAD_GEOMETRY_SUCCESS",l=a.FETCH_ROAD_GEOMETRY_ERROR="FETCH_ROAD_GEOMETRY_ERROR",i=a.CREATE_ROAD="CREATE_ROAD",d=a.CREATE_ROAD_SUCCESS="CREATE_ROAD_SUCCESS",p=a.CREATE_ROAD_ERROR="CREATE_ROAD_ERROR",m=a.EDIT_ROAD="EDIT_ROAD",f=a.EDIT_ROAD_SUCCESS="EDIT_ROAD_SUCCESS",h=a.EDIT_ROAD_ERROR="EDIT_ROAD_ERROR",E=a.DELETE_ROAD="DELETE_ROAD",N=a.DELETE_ROAD_SUCCESS="DELETE_ROAD_SUCCESS",g=a.DELETE_ROAD_ERROR="DELETE_ROAD_ERROR",_=a.CREATE_ROAD_PROPERTY="CREATE_ROAD_PROPERTY",M=a.CREATE_ROAD_PROPERTY_SUCCESS="CREATE_ROAD_PROPERTY_SUCCESS",v=a.CREATE_ROAD_PROPERTY_ERROR="CREATE_ROAD_PROPERTY_ERROR",y=a.EDIT_ROAD_PROPERTY="EDIT_ROAD_PROPERTY",A=a.EDIT_ROAD_PROPERTY_SUCCESS="EDIT_ROAD_PROPERTY_SUCCESS",R=a.EDIT_ROAD_PROPERTY_ERROR="EDIT_ROAD_PROPERTY_ERROR",w=a.EDIT_ROAD_STATUS="EDIT_ROAD_STATUS",I=a.EDIT_ROAD_STATUS_SUCCESS="EDIT_ROAD_STATUS_SUCCESS",j=a.EDIT_ROAD_STATUS_ERROR="EDIT_ROAD_STATUS_ERROR",x=a.DELETE_ROAD_PROPERTY="DELETE_ROAD_PROPERTY",V=a.DELETE_ROAD_PROPERTY_SUCCESS="DELETE_ROAD_PROPERTY_SUCCESS",L=a.DELETE_ROAD_PROPERTY_ERROR="DELETE_ROAD_PROPERTY_ERROR",H=a.OP_ON_ROAD_PROPERTY="OP_ON_ROAD_PROPERTY",F=a.OP_ON_ROAD_PROPERTY_SUCCESS="OP_ON_ROAD_PROPERTY_SUCCESS",U=a.OP_ON_ROAD_PROPERTY_ERROR="OP_ON_ROAD_PROPERTY_ERROR",B=a.FETCH_ROAD_BBOX="FETCH_ROAD_BBOX",W=a.FETCH_ROAD_BBOX_SUCCESS="FETCH_ROAD_BBOX_SUCCESS",Y=a.FETCH_ROAD_BBOX_ERROR="FETCH_ROAD_BBOX_ERROR",K=a.FETCH_ROAD_PROPERTY="FETCH_ROAD_PROPERTY",G=a.FETCH_ROAD_PROPERTY_ERROR="FETCH_ROAD_PROPERTY",Q=a.FETCH_ROAD_PROPERTY_SUCCESS="FETCH_ROAD_PROPERTY_SUCCESS",q=a.EDIT_ROAD_ID="EDIT_ROAD_ID",X=a.EDIT_ROAD_ID_SUCCESS="EDIT_ROAD_ID_SUCCESS",z=a.EDIT_ROAD_ID_ERROR="EDIT_ROAD_ID_ERROR",J=a.fetchRoads=function(e,t,a,n,o){return{type:T,province:e,district:t,page:a,sortField:n,sortOrder:o}},Z=a.fetchRoadsSuccess=function(e,t,a,n,o,r,s){return{type:P,roadsById:e,roadsByPage:t,province:a,district:n,page:o,sortField:r,sortOrder:s}},$=a.fetchRoadsError=function(e,t,a,n,o,r){return{type:b,error:e,province:t,district:a,page:n,sortField:o,sortOrder:r}},ee=a.clearRoadsPages=function(){return{type:k}},te=a.fetchRoadGeometry=function(e){return{type:s,id:e}},ae=a.fetchRoadGeometrySuccess=function(e,t){return{type:D,id:e,geoJSON:t}},ne=a.fetchRoadGeometryError=function(e,t){return{type:l,id:e,error:t}},oe=a.editRoad=function(e,t){return{type:m,id:e,newId:t}},re=a.editRoadSuccess=function(e,t){return{type:f,id:e,newId:t}},se=a.editRoadError=function(e,t,a){return{type:h,id:e,newId:t,error:a}},le=a.deleteRoad=function(e){return{type:E,id:e}},ie=a.deleteRoadSuccess=function(e){return{type:N,id:e}},ce=a.deleteRoadError=function(e,t){return{type:g,id:e,error:t}},ue=a.createRoad=function(e){return{type:i,id:e}},de=a.createRoadSuccess=function(){return{type:d}},pe=a.createRoadError=function(e){return{type:p,error:e}},me=a.createRoadProperty=function(e,t,a){return{type:_,id:e,key:t,value:a}},fe=a.createRoadPropertySuccess=function(e,t,a){return{type:M,id:e,key:t,value:a}},he=a.createRoadPropertyError=function(e,t,a,n){return{type:v,id:e,key:t,value:a,error:n}},Ee=a.editRoadProperty=function(e,t,a){return{type:y,id:e,key:t,value:a}},ge=a.editRoadPropertySuccess=function(e,t,a){return{type:A,id:e,key:t,value:a}},_e=a.editRoadPropertyError=function(e,t,a,n){return{type:R,id:e,key:t,value:a,error:n}},ve=(a.editRoadStatus=function(e,t){return{type:w,id:e,value:t}},a.editRoadStatusSuccess=function(e,t){return{type:I,id:e,value:t}}),ye=a.editRoadStatusError=function(e,t,a){return{type:j,id:e,value:t,error:a}},Re=a.deleteRoadProperty=function(e,t){return{type:x,id:e,key:t}},Se=a.deleteRoadPropertySuccess=function(e,t){return{type:V,id:e,key:t}},Oe=a.deleteRoadPropertyError=function(e,t,a){return{type:L,id:e,key:t,error:a}},Ce=a.opOnRoadProperty=function(){return{type:H}},Te=a.opOnRoadPropertySuccess=function(e){return{type:F,data:e}},Pe=a.opOnRoadPropertyError=function(e){return{type:U,error:e}},be=a.fetchRoadBbox=function(e){return{type:B,roadId:e}},ke=a.fetchRoadBboxSuccess=function(e,t){return{type:W,roadId:e,bbox:t}},De=a.fetchRoadBboxError=function(e,t){return{type:Y,roadId:e,error:t}},Ne=a.fetchRoadProperty=function(e){return{type:K,roadId:e}},Me=a.fetchRoadPropertySuccess=function(e,t){return{type:Q,roadId:e,properties:t}},Ae=a.fetchRoadPropertyError=function(e,t){return{type:G,roadId:e,error:t}},we=a.editRoadId=function(e,t){return{type:q,wayId:e,vprommId:t}},Ie=a.editRoadIdSucess=function(e,t){return{type:X,wayId:e}};a.editRoadIdError=function(e,t){return{type:z,wayId:e,error:t}},a.fetchRoadsEpic=function(o,r,s,l,i){return function(n){return n(J(o,r,s,l,i)),fetch((0,c.format)({pathname:u.default.api+"/properties/roads",query:{province:o,district:r,page:s,sortField:l,sortOrder:i}})).then(function(e){if(!e.ok)throw new Error(e.status);return e.json()}).then(function(e){var t=(0,S.reduce)(e,function(e,t){return e[t.id]=(0,S.omit)(t,["id"]),e},{}),a=(0,S.map)(e,(0,S.property)("id"));n(Z(t,a,o,r,s,l,i))}).catch(function(e){return n($(e,o,r,s,l,i))})}},a.fetchRoadGeometryEpic=function(a){return function(t){return t(te(a)),fetch(u.default.api+"/properties/roads/"+a+".geojson").then(function(e){if(!e.ok)throw new Error(e.status);return e.json()}).then(function(e){return t(ae(a,e))}).catch(function(e){return t(ne(a,e))})}},a.createRoadEpic=function(e){return function(t){return t(ue()),fetch(u.default.api+"/properties/roads/"+e,{method:"PUT"}).then(function(e){if(!e.ok)throw new Error(e.status);return e.json()}).then(function(e){return Promise.all([t(de(e)),t(ee()),t((0,o.clearRoadCount)())])},function(e){return t(pe(e.message))})}},a.editRoadEpic=function(n,t){return function(a){return a(oe(n,t)),fetch(u.default.api+"/properties/roads/"+n+"/move",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})}).then(function(e){if(!e.ok)throw new Error(e.status);return e.json()}).then(function(e){var t=e.id;return Promise.all([a(re(n,t)),a(ee()),a((0,o.clearRoadCount)())])},function(e){return a(se(n,t,e.message))})}},a.editRoadStatusEpic=function(a,n){return function(t){return t(oe(a,n)),fetch(u.default.api+"/properties/roads/"+a+"/status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:n})}).then(function(e){if(!e.ok)throw new Error(e.status);return e.json()}).then(function(){return Promise.all([t(ve(a,n)),t(ee()),t((0,o.clearRoadCount)())])},function(e){return t(ye(a,n,e.message))})}},a.deleteRoadEpic=function(a){return function(t){return t(le(a)),fetch(u.default.api+"/properties/roads/"+a,{method:"DELETE"}).then(function(e){if(!e.ok)throw new Error(e.status);t(ie(a)),t(ee()),t((0,o.clearRoadCount)())}).catch(function(e){return t(ce(a,e.message))})}},a.createRoadPropertyEpic=function(a,n,o){return function(t){return t(me(a,n,o)),fetch(u.default.api+"/properties/roads/"+a,{method:"PATCH",headers:{"Content-Type":"application/json-patch+json"},body:JSON.stringify([{op:"add",path:"/"+n,value:o}])}).then(function(e){if(!e.ok)throw new Error(e.status);t(fe(a,n,o))}).catch(function(e){return t(he(a,n,o,e))})}},a.opOnRoadPropertyEpic=function(n,o){return function(t){t(Ce());var e=function(a,e){return(e[a]||[]).map(function(e){var t=e.key.replace(/~/g,"~0").replace(/\//g,"~1");return{op:a,path:"/"+t,value:e.value}})},a=e("add",o).concat(e("replace",o)).concat(e("remove",o));return fetch(u.default.api+"/properties/roads/"+n,{method:"PATCH",headers:{"Content-Type":"application/json-patch+json"},body:JSON.stringify(a)}).then(function(e){if(!e.ok)throw new Error(e.status);return{ok:!0}}).then(function(e){return t(Te(e))},function(e){return t(Pe(e))})}},a.editRoadPropertyEpic=function(a,n,o){return function(t){return t(Ee(a,n,o)),fetch(u.default.api+"/properties/roads/"+a,{method:"PATCH",headers:{"Content-Type":"application/json-patch+json"},body:JSON.stringify([{op:"replace",path:"/"+n,value:o}])}).then(function(e){if(!e.ok)throw new Error(e.status);t(ge(a,n,o))}).catch(function(e){return t(_e(a,n,o,e))})}},a.deleteRoadPropertyEpic=function(a,n){return function(t){return t(Re(a,n)),fetch(u.default.api+"/properties/roads/"+a,{method:"PATCH",headers:{"Content-Type":"application/json-patch+json"},body:JSON.stringify([{op:"remove",path:"/"+n}])}).then(function(e){if(!e.ok)throw new Error(e.status);t(Se(a,n))}).catch(function(e){return t(Oe(a,n,e))})}},a.fetchRoadBboxEpic=function(a){return function(t){return t(be()),fetch(u.default.api+"/way/"+a+"/bbox").then(function(e){return e.ok?e.json():new Error(e.status)}).then(function(e){return t(ke(a,e))}).catch(function(e){return t(De(a,e))})}},a.fetchRoadPropertyEpic=function(a){return function(t){return t(Ne()),fetch(u.default.api+"/properties/roads/"+a).then(function(e){return e.ok?e.json():new Error(e.status)}).then(function(e){return t(Me(a,e))}).catch(function(e){return t(Ae(a,e))})}},a.editRoadIdEpic=function(e,a){return function(t){return t(we(e,a)),fetch(u.default.api+"/way/tags/vprommid/"+e,{method:"PATCH",headers:{"Content-Type":"application/json-patch+json"},body:JSON.stringify({vprommid:a})}).then(function(e){if(!e.ok)throw new Error(e.status);return e.json()}).then(function(e){return t(Ie(e))}).catch(function(e){return t(se(e))})}};a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{roadsById:{},roadsByPage:{}},t=arguments[1];if(t.type===T){var a=t.province,n=t.district,o=t.page,r=t.sortField,s=t.sortOrder,l=C(a,n,o,r,s);return Object.assign({},e,{roadsByPage:Object.assign({},e.roadsByPage,O({},l,{status:"pending",roads:e.roadsByPage[l]?e.roadsByPage[l].roads:[]}))})}if(t.type===P){var i=t.roadsById,c=t.roadsByPage,u=t.province,d=t.district,p=t.page,m=t.sortField,f=t.sortOrder,h=C(u,d,p,m,f);return Object.assign({},e,{roadsById:(0,S.merge)({},e.roadsById,i),roadsByPage:Object.assign({},e.roadsByPage,O({},h,{status:"complete",roads:c}))})}if(t.type===b){var E=t.province,g=t.district,_=t.page,v=t.sortField,y=t.sortOrder,R=C(E,g,_,v,y);return Object.assign({},e,{roadsByPage:Object.assign({},e.roadsByPage,O({},R,{status:"error",roads:[]}))})}return t.type===k?Object.assign({},e,{roadsByPage:{}}):t.type===D?Object.assign({},e,{roadsById:Object.assign({},e.roadsById,O({},t.id,Object.assign({},e.roadsById[t.id]||{},{geoJSON:t.geoJSON})))}):t.type===M?Object.assign({},e,{roadsById:Object.assign({},e.roadsById,O({},t.id,Object.assign({},e.roadsById[t.id],{properties:Object.assign({},e.roadsById[t.id].properties,O({},t.key,t.value))})))}):t.type===A?Object.assign({},e,{roadsById:Object.assign({},e.roadsById,O({},t.id,Object.assign({},e.roadsById[t.id],{properties:Object.assign({},e.roadsById[t.id].properties,O({},t.key,t.value))})))}):t.type===V?Object.assign({},e,{roadsById:Object.assign({},e.roadsById,O({},t.id,Object.assign({},e.roadsById[t.id],{properties:(0,S.omit)(e.roadsById[t.id].properties,[t.key])})))}):t.type===I?Object.assign({},e,{roadsById:Object.assign({},e.roadsById,O({},t.id,Object.assign({},e.roadsById[t.id],{status:t.value})))}):t.type===Q?Object.assign({},e,{roadsById:Object.assign({},e.roadsById,O({},t.roadId,Object.assign({},e.roadsById[t.roadId],{properties:t.properties})))}):t.type===X?Object.assign({},e):t.type===N?Object.assign({},e,{roadsById:Object.assign({},e.roadsById,delete e.roadsById[t.id])}):e}},{"../../config":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/config.js","./roadCount":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/roadCount.js",lodash:"lodash",url:"url"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/tasks.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.dedupeWayTaskEpic=a.markWayTaskPendingEpic=a.fetchWayTaskCountEpic=a.fetchWayTaskEpic=a.fetchNextWayTaskEpic=a.dedupeWayTaskError=a.dedupeWayTaskSuccess=a.dedupeWayTask=a.selectWayTaskProvince=a.skipTask=a.markWayTaskPendingError=a.markWayTaskPendingSuccess=a.markWayTaskPending=a.fetchWayTaskCountError=a.fetchWayTaskCountSuccess=a.fetchWayTaskCount=a.fetchWayTaskError=a.fetchWayTaskSuccess=a.fetchNextWayTask=a.fetchWayTask=a.DEDUPE_WAY_TASK_ERROR=a.DEDUPE_WAY_TASK_SUCCESS=a.DEDUPE_WAY_TASK=a.SELECT_NEXT_WAY_TASK_PROVINCE=a.SKIP_TASK=a.MARK_WAY_TASK_PENDING_ERROR=a.MARK_WAY_TASK_PENDING_SUCCESS=a.MARK_WAY_TASK_PENDING=a.FETCH_WAY_TASK_COUNT_ERROR=a.FETCH_WAY_TASK_COUNT_SUCCESS=a.FETCH_WAY_TASK_COUNT=a.FETCH_WAY_TASK_ERROR=a.FETCH_WAY_TASK_SUCCESS=a.FETCH_NEXT_WAY_TASK=a.FETCH_WAY_TASK=void 0;var n,o=e("../../config"),s=(n=o)&&n.__esModule?n:{default:n},l=e("./osm"),i=e("./roads");var r=a.FETCH_WAY_TASK="FETCH_WAY_TASK",c=a.FETCH_NEXT_WAY_TASK="FETCH_NEXT_WAY_TASK",u=a.FETCH_WAY_TASK_SUCCESS="FETCH_WAY_TASK_SUCCESS",d=a.FETCH_WAY_TASK_ERROR="FETCH_WAY_TASK_ERROR",p=a.FETCH_WAY_TASK_COUNT="FETCH_WAY_TASK_COUNT",m=a.FETCH_WAY_TASK_COUNT_SUCCESS="FETCH_WAY_TASK_COUNT_SUCCESS",f=a.FETCH_WAY_TASK_COUNT_ERROR="FETCH_WAY_TASK_COUNT_ERROR",h=a.MARK_WAY_TASK_PENDING="MARK_WAY_TASK_PENDING",E=a.MARK_WAY_TASK_PENDING_SUCCESS="MARK_WAY_TASK_PENDING_SUCCESS",g=a.MARK_WAY_TASK_PENDING_ERROR="MARK_WAY_TASK_PENDING_ERROR",_=a.SKIP_TASK="SKIP_TASK",v=a.SELECT_NEXT_WAY_TASK_PROVINCE="SELECT_NEXT_WAY_TASK_PROVINCE",y=a.DEDUPE_WAY_TASK="DEDUPE_WAY_TASK",R=a.DEDUPE_WAY_TASK_SUCCESS="DEDUPE_WAY_TASK_SUCCESS",S=a.DEDUPE_WAY_TASK_ERROR="DEDUPE_WAY_TASK_ERROR",O=a.fetchWayTask=function(e){return{type:r,id:e}},C=a.fetchNextWayTask=function(){return{type:c}},T=a.fetchWayTaskSuccess=function(e,t,a){return{type:u,id:e,updatedAt:t,geoJSON:a}},P=a.fetchWayTaskError=function(e){return{type:d,error:e}},b=a.fetchWayTaskCount=function(){return{type:p}},k=a.fetchWayTaskCountSuccess=function(e){return{type:m,count:e}},D=a.fetchWayTaskCountError=function(e){return{type:f}},N=a.markWayTaskPending=function(){return{type:h}},M=a.markWayTaskPendingSuccess=function(){return{type:E}},A=a.markWayTaskPendingError=function(){return{type:g}},w=(a.skipTask=function(e){return{type:_,id:e}},a.selectWayTaskProvince=function(e){return{type:v,selectedProvince:e}},a.dedupeWayTask=function(e,t,a,n){return{type:y,taskId:e,wayIdsToDelete:t,wayIdToKeep:a,dedupeIdToApply:n}}),I=a.dedupeWayTaskSuccess=function(){return{type:R}},j=a.dedupeWayTaskError=function(e){return{type:S,error:e}},x=(a.fetchNextWayTaskEpic=function(){return function(a,e){a(C());var t=e().waytasks.skipped,n=e().waytasks.selectedProvince,o={};t.length&&(o.skip=t),n&&(o.province=n);var r=s.default.api+"/tasks/next";return Object.keys(o).length&&(r=r+"?"+Object.keys(o).map(function(e){return e+"="+o[e]}).join("&")),fetch(r).then(function(e){if(404===e.status)throw new Error("No tasks remaining");if(e.status>=400)throw new Error(e.statusText);return e.json()}).then(function(t){return t.data.features.forEach(function(e){e.properties._id=e.meta.id,e.properties.province=t.province}),a(x()),a(T(t.id,t.updated_at,t.data))},function(e){return console.error("Error requesting task",e),a(P(e))})}},a.fetchWayTaskEpic=function(t){return function(n,e){return n(O(t)),fetch(s.default.api+"/tasks/"+t).then(function(e){if(e.status>=400)throw new Error(e.statusText);return e.json()}).then(function(e){var t=e.id,a=e.data;return a.features.forEach(function(e){e.properties._id=e.meta.id}),n(T(t,a.updated_at,a))},function(e){return console.error("Error reloading task",e),n(P())})}},a.fetchWayTaskCountEpic=function(){return function(a,e){a(b());var t=e().waytasks.selectedProvince,n=t?s.default.api+"/tasks/count?province="+t:s.default.api+"/tasks/count";fetch(n).then(function(e){if(e.status>=400)throw new Error(e.statusText);return e.json()}).then(function(e){var t=e.count;a(k(t))},function(e){console.error("Error requesting task count",e),a(D())})}});a.markWayTaskPendingEpic=function(e){return function(t){return t(N()),fetch(s.default.api+"/tasks/pending",{method:"PUT",body:new Blob([JSON.stringify({way_ids:e})],{type:"application/json"})}).then(function(e){e.status>=400&&(console.error("Error marking task as pending",e.statusText),t(A())),t(M())})}},a.dedupeWayTaskEpic=function(a,n,o,r){return function(t,e){t(w(a,n,o,r)),t((0,l.deleteEntireWaysEpic)(a,n)).then(function(){t((0,i.editRoadIdEpic)(o,r)).then(function(){t(I)}).catch(function(e){t(j(e))})})}};a.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:"complete",countStatus:"complete",id:null,geoJSON:null,skipped:[],provinces:[],selectedProvince:null,dedupeTaskId:null,wayIdsToDelete:[],dedupeIdToApply:null,wayIdToKeep:null,osmChangeTaskId:null},t=arguments[1];return t.type===r?Object.assign({},e,{status:"pending"}):t.type===c?Object.assign({},e,{status:"pending"}):t.type===u?Object.assign({},e,{geoJSON:t.geoJSON,id:t.id,updatedAt:t.updatedAt,status:"complete"}):t.type===d?Object.assign({},e,{status:"No tasks remaining"===t.error.message?"No tasks remaining":"error"}):t.type===p?Object.assign({},e,{taskCount:t.count,countStatus:"pending"}):t.type===m?Object.assign({},e,{taskCount:t.count,countStatus:"complete"}):t.type===f?Object.assign({},e,{countStatus:"error"}):t.type===_?Object.assign({},e,{skipped:e.skipped.concat(t.id)}):t.type===v?Object.assign({},e,{selectedProvince:t.selectedProvince}):t.type===y?Object.assign({},e,{dedupeTaskId:t.taskId,wayIdsToDelete:t.wayIdsToDelete,dedupeIdToApply:t.dedupeIdToApply,wayIdToKeep:t.wayIdToKeep}):t.type===l.REQUEST_OSM_CHANGE_SUCCESS?Object.assign({},e,{osmChangeTaskId:t.taskId}):e}},{"../../config":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/config.js","./osm":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/osm.js","./roads":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/roads.js"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/reducer.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("redux"),o=e("react-router-redux"),r=e("redux-fractal"),s=m(e("lodash")),l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}}(e("../actions/action-types")),i=m(e("./modules/tasks")),c=m(e("./modules/osm")),u=m(e("./modules/roads")),d=m(e("./modules/roadCount")),p=m(e("./modules/map"));function m(e){return e&&e.__esModule?e:{default:e}}var f={fetching:!1,fetched:!1,ids:[]},h={layer:"iri",showNoVpromms:!0},E={searchType:"Admin"},g={fetching:!1,fetched:!1,data:{}},_={fetched:!1,fetching:!1,data:{}};a.default=(0,n.combineReducers)({routing:o.routeReducer,local:r.localReducer,admins:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{units:[],fetching:!1,fetched:!1},t=arguments[1];switch(t.type){case l.REQUEST_ADMINS:console.log("REQUEST_ADMINS"),(e=s.default.cloneDeep(e)).fetching=!0;break;case l.RECEIVE_ADMINS:console.log("RECEIVE_ADMINS"),(e=s.default.cloneDeep(e)).units=t.json,e.fetching=!1,e.fetched=!0;break;case l.CLEAR_ADMINS:(e=s.default.cloneDeep(e)).units=[]}return e},adminInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments[1];switch(t.type){case l.REQUEST_ADMIN_INFO:(e=s.default.cloneDeep(e)).fetching=!0;break;case l.RECEIVE_ADMIN_INFO:(e=s.default.cloneDeep(e)).fetching=!1,e.fetched=!0,e.data=t.json;break;case l.REMOVE_ADMIN_INFO:e=_}return e},roads:u.default,roadCount:d.default,map:p.default,waytasks:i.default,osmChange:c.default,search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{results:[],fetching:!1,fetched:!1,query:"",searching:!1},t=arguments[1];switch(t.type){case l.REQUEST_SEARCH_RESULTS:console.log("REQUEST_SEARCH_RESULTS"),(e=s.default.cloneDeep(e)).fetching=!0,e.query=t.query,e.searching=!0;break;case l.RECEIVE_SEARCH_RESULTS:console.log("RECEIVE_SEARCH_RESULTS"),(e=s.default.cloneDeep(e)).results=t.json,e.fetching=!1;break;case l.CLEAN_SEARCH_RESULTS:console.log("CLEAN_SEARCH_RESULTS"),(e=s.default.cloneDeep(e)).results=[],e.fetching=!1,e.fetched=!0,e.query="",e.searching=!1}return e},exploreMap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments[1],a=s.default.cloneDeep(e);switch(t.type){case l.SELECT_EXPLORE_MAP_LAYER:a.layer=t.layer;break;case l.EXPLORE_MAP_SHOW_NO_VPROMMS:a.showNoVpromms=t.bool}return a},provinces:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments[1];switch(t.type){case l.REQUEST_PROVINCES:(e=s.default.cloneDeep(e)).fetching=!0;break;case l.RECEIVE_PROVINCES:(e=s.default.cloneDeep(e)).fetching=!1,e.fetched=!0,e.data=t.json}return e},setSearchType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments[1];switch(t.type){case l.SET_SEARCH_TYPE:(e=s.default.cloneDeep(e)).searchType=t.text}return e},setFilteredVProMMs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case l.SET_FILTERED_VPROMMS:e=s.default.cloneDeep(e),e=t.array}return e},fieldVProMMsids:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments[1];switch(t.type){case l.REQUEST_VPROMMS_FIELD_IDS:(e=s.default.cloneDeep(e)).fetching=!0;break;case l.RECEIVE_VPROMMS_FIELD_IDS:(e=s.default.cloneDeep(e)).fetching=!1,e.fetched=!0,e.ids=t.json;break;case l.REMOVE_VPROMMS_FIELD_IDS:return f}return e}})},{"../actions/action-types":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/actions/action-types.js","./modules/map":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/map.js","./modules/osm":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/osm.js","./modules/roadCount":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/roadCount.js","./modules/roads":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/roads.js","./modules/tasks":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/tasks.js",lodash:"lodash","react-router-redux":"react-router-redux",redux:"redux","redux-fractal":"redux-fractal"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/store.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("redux"),o=c(e("redux-thunk")),r=e("react-router-redux"),s=c(e("./reducer")),l=e("react-router"),i=c(e("redux-logger"));function c(e){return e&&e.__esModule?e:{default:e}}var u=[(0,r.syncHistory)(l.hashHistory),o.default];u.push(i.default);var d=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||n.compose;a.default=(0,n.createStore)(s.default,d(n.applyMiddleware.apply(null,u)))},{"./reducer":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/reducer.js","react-router":"react-router","react-router-redux":"react-router-redux",redux:"redux","redux-logger":"redux-logger","redux-thunk":"redux-thunk"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/utils/line-colors.js":[function(e,t,a){"use strict";t.exports={iri:{property:"iri",type:"exponential",colorSpace:"lab",stops:[[3,"#8CCA1B"],[16,"#DA251D"]]},RouteShoot:{property:"RouteShoot",type:"nominal",stops:[!1,"#808080"]},RoadLabPro:{property:"RoadLabPro",type:"nominal",stops:[!1,"#808080"]}}},{}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/utils/to-osm.js":[function(e,t,a){"use strict";t.exports.createModifyLineString=function(e){var n=[],o=[],r={};e.forEach(function(e){var t=e.geometry,a=e.properties;!function(e,t,a,r,s){var n=Object.assign({},t),o=n._id;delete n._id;var l={tags:n,nodes:[],id:o};a.push(l),e.forEach(function(e){var t,a,n=(t=e,JSON.stringify(t)),o=s[n];o||(o={lat:(a=e)[1],lon:a[0]},r.push(o),s[n]=o),l.nodes.push(o)})}(t.coordinates,a,o,n,r)});var t=-1;return{create:{node:n.map(function(e){return e.id=t--,{id:e.id,lat:e.lat,lon:e.lon}})},modify:{way:o.map(function(e){return{id:e.id,nd:e.nodes.map(function(e){return{ref:e.id}}),tag:function(e){var t=[];for(var a in e)t.push({k:a,v:e[a]});return t}(e.tags)}})}}}},{}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/utils/zoom.js":[function(e,t,a){"use strict";var p=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,o=!1,r=void 0;try{for(var s,l=e[Symbol.iterator]();!(n=(s=l.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw r}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=e("global-mercator"),o=n.lngLatToMeters,r=n.metersToPixels,m=a.transformGeoToPixel=function(e,t){var a=o([e.lng,e.lat]),n=r(a,t);return{x:n[0],y:n[1]}},f=a.pixelDistances=function(e,t){return{x:Math.abs(e.x-t.x),y:Math.abs(e.y-t.y)}},h=a.makeNewZoom=function(e,t){var a=e*(256*Math.pow(2,t)),n=Math.log(a/256)/Math.LN2;return n>24?24:n};a.bboxToLngLatZoom=function(e){var t=p(e,4),a=t[0],n=t[1],o=t[2],r=t[3],s=a+(o-a)/2,l=n+(r-n)/2,i=f(m({lng:a,lat:r},6),m({lng:o,lat:n},6)),c=i.x,u=i.y,d=Math.min(1e3/(c+5),500/(u+5));return{lng:s,lat:l,zoom:h(d,6)}}},{"global-mercator":"global-mercator"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/app.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=u(e("react")),o=e("react-redux"),r=u(e("lodash")),s=e("recompose"),l=e("../actions/action-creators"),i=u(e("../components/site-header")),c=u(e("../components/confirmation-prompt"));function u(e){return e&&e.__esModule?e:{default:e}}var d=n.default.createClass({displayName:"App",propTypes:{_fetchSearchResults:n.default.PropTypes.func,_cleanSearchResults:n.default.PropTypes.func,search:n.default.PropTypes.object,routes:n.default.PropTypes.array,children:n.default.PropTypes.object,location:n.default.PropTypes.object},render:function(){var e=r.default.get(r.default.last(this.props.routes),"pageClass","");return n.default.createElement("div",{className:"site-canvas-inner "+e},n.default.createElement(i.default,null),n.default.createElement("main",{className:"site-body"},this.props.children),n.default.createElement(c.default,null))}});a.default=(0,s.compose)((0,o.connect)(function(e){return{subregions:e.adminSubregions,search:e.search}},function(t){return{_fetchSearchResults:function(e){return t((0,l.fetchSearchResults)(e))},_cleanSearchResults:function(){return t((0,l.cleanSearchResults)())}}}),(0,s.withContext)({language:n.default.PropTypes.string},function(e){return{language:e.params.lang}}))(d)},{"../actions/action-creators":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/actions/action-creators.js","../components/confirmation-prompt":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/confirmation-prompt.js","../components/site-header":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/site-header.js",lodash:"lodash",react:"react","react-redux":"react-redux",recompose:"recompose"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/assets-admin-area.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}(),d=l(e("react")),o=e("react-redux"),r=e("recompose"),p=l(e("../components/t")),m=e("react-router"),f=l(e("../containers/road-table-container")),h=l(e("../components/district-list")),s=e("../actions/action-creators"),E=l(e("../config")),g=e("../constants"),_=l(e("../components/assets-create"));function l(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.onCreateAssetClick=t.onCreateAssetClick.bind(t),t.state={createModalOpen:!1},t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,d.default.Component),n(a,[{key:"componentWillMount",value:function(){this.props._fetchAdminInfo(this.props.params.aaId)}},{key:"componentWillReceiveProps",value:function(e){this.props.params.aaId!==e.params.aaId&&this.props._fetchAdminInfo(e.params.aaId)}},{key:"onModalClose",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState({createModalOpen:!1})}},{key:"onCreateAssetClick",value:function(e){e.preventDefault(),this.setState({createModalOpen:!0})}},{key:"render",value:function(){var e,t,a,n,o=this.props,r=o.adminInfoFetched,s=o.language,l=o.adminInfo.children,i=o.params,c=i.aaId,u=i.aaIdSub;return d.default.createElement("div",{className:"incontainer"},d.default.createElement("div",{className:"incontainer__header"},d.default.createElement("div",{className:"incontainer__headline"},l&&(e=l,t=c,n=(a=u)?e.find(function(e){return e.id===Number(a)}).name_en:g.ADMIN_MAP.province[t].name,d.default.createElement("h2",{className:"incontainer__title"},n)),d.default.createElement("ol",{className:"incontainer__breadcrumb"},d.default.createElement("li",null,d.default.createElement(m.Link,{title:"View",to:s+"/assets"},"Overview")),u&&d.default.createElement("li",null,d.default.createElement(m.Link,{title:"View",to:s+"/assets/"+c},g.ADMIN_MAP.province[c].name)))),d.default.createElement("div",{className:"incontainer__hactions"},!u&&c&&d.default.createElement("a",{href:""+E.default.provinceDumpBaseUrl+c+".csv",className:"ica-download"},d.default.createElement(p.default,null,"Download")),d.default.createElement(_.default,null))),d.default.createElement("div",null,!u&&r&&d.default.createElement(h.default,{districts:l,aaId:c,language:s})),d.default.createElement(f.default,null))}}]),a}();"production"!==E.default.environment&&(i.propTypes={_fetchAdminInfo:d.default.PropTypes.func,params:d.default.PropTypes.object,language:d.default.PropTypes.string,adminInfo:d.default.PropTypes.object,adminInfoFetched:d.default.PropTypes.bool}),a.default=(0,r.compose)((0,r.getContext)({language:d.default.PropTypes.string}),(0,o.connect)(function(e){return{adminInfo:e.adminInfo.data,adminInfoFetched:e.adminInfo.fetched}},function(a){return{_fetchAdminInfo:function(e,t){return a((0,s.fetchAdminInfo)(e,t))}}}))(i)},{"../actions/action-creators":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/actions/action-creators.js","../components/assets-create":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/assets-create.js","../components/district-list":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/district-list.js","../components/t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js","../config":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/config.js","../constants":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/constants.js","../containers/road-table-container":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/containers/road-table-container.js",react:"react","react-redux":"react-redux","react-router":"react-router",recompose:"recompose"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/assets-detail.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,o=!1,r=void 0;try{for(var s,l=e[Symbol.iterator]();!(n=(s=l.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw r}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}(),r=e("react"),c=T(r),l=e("react-redux"),u=e("lodash"),i=e("recompose"),d=e("redux-fractal"),p=e("redux"),m=e("react-router"),f=T(e("@turf/bbox")),h=T(e("mapbox-gl")),E=T(e("classnames")),g=e("../components/t"),_=T(g),v=T(e("../components/dropdown")),y=T(e("../components/assets-edit-modal")),R=e("../redux/modules/roads"),S=e("../constants"),O=e("../config"),C=e("../components/confirmation-prompt");function T(e){return e&&e.__esModule?e:{default:e}}h.default.accessToken=O.mbToken;var P=function(e){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.onEditDelete=t.onEditDelete.bind(t),t.onEditProperties=t.onEditProperties.bind(t),t.onModalClose=t.onModalClose.bind(t),t.state={layerRendered:!1,editModalOpen:!1},t}var t,n;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,c.default.Component),o(a,[{key:"componentWillMount",value:function(){var e=this.props,t=e.vpromm,a=e.fetchRoadProperty,n=e.fetchRoadGeometry;a(t),n(t)}},{key:"componentDidMount",value:function(){var e=this;this.map=new h.default.Map({container:"asset-map",center:[106.12774207395364,16.185396038978936],zoom:4,style:"mapbox://styles/mapbox/light-v9",failIfMajorPerformanceCaveat:!1}),this.map.addControl(new h.default.ScaleControl({unit:"metric"})),this.map.addControl(new h.default.NavigationControl,"top-left"),this.map.on("load",function(){e.setupMapStyle()}),this.map.dragRotate.disable(),this.map.touchZoomRotate.disableRotation(),document.querySelector(".mapboxgl-ctrl .mapboxgl-ctrl-compass").remove()}},{key:"componentWillReceiveProps",value:function(e){this.props.vpromm!==e.vpromm&&(this.props.fetchRoadProperty(e.vpromm),this.props.fetchRoadGeometry(e.vpromm)),!this.props.roadGeo.fetching||e.roadGeo.fetching||e.roadGeo.error||this.setupMapStyle()}},{key:"setupMapStyle",value:function(){var e=this.props.roadGeo,t=e.fetched,a=e.data;t&&!this.map.getSource("road-geometry")&&(this.map.addSource("road-geometry",{type:"geojson",data:a}),this.map.addLayer({id:"road-geometry-layer",type:"line",source:"road-geometry",paint:{"line-width":4,"line-color":"#da251d"}}),a.features.length>0&&this.map.fitBounds((0,f.default)(a),{padding:20}))}},{key:"onModalClose",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState({editModalOpen:!1}),"refresh"===t.action?setTimeout(function(){e.props.fetchRoadProperty(e.props.vpromm)},0):"redirect"===t.action&&setTimeout(function(){e.props.router.push({pathname:"/"+e.props.language+"/assets/road/"+t.vpromm+"/"})},0)}},{key:"onEditProperties",value:function(e){e.preventDefault(),this.setState({editModalOpen:!0})}},{key:"onEditDelete",value:function(e){var t=this;e.preventDefault(),(0,C.showConfirm)({title:"Delete asset",body:c.default.createElement("div",null,c.default.createElement("p",null,c.default.createElement(_.default,null,"Are you sure you want to delete road ",c.default.createElement("strong",null,this.props.vpromm),"?",c.default.createElement("br",null)," Note that this action is irreversible.")))},function(){t.props.deleteRoad(t.props.vpromm),t.props.router.push({pathname:"/"+t.props.language+"/assets"})})}},{key:"onStateChange",value:(t=regeneratorRuntime.mark(function e(t,a){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,this.props.editRoadStatus(this.props.vpromm,t);case 4:if(!(n=e.sent).error){e.next=7;break}throw new Error(n.error);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),alert("An error occurred while saving. Please try again.");case 12:case"end":return e.stop()}},e,this,[[1,9]])}),n=function(){var l=t.apply(this,arguments);return new Promise(function(r,s){return function t(e,a){try{var n=l[e](a),o=n.value}catch(e){return void s(e)}if(!n.done)return Promise.resolve(o).then(function(e){t("next",e)},function(e){t("throw",e)});r(o)}("next")})},function(e,t){return n.apply(this,arguments)})},{key:"hasGeometry",value:function(){var e=this.props.roadGeo;return!e.fetched||(0,u.get)(e,"data.features",[]).length>0}},{key:"renderProperties",value:function(){var e=this.props.roadProps,t=e.fetched,a=e.data;if(!t)return null;var n=Object.keys(a.properties);n.sort(function(e,t){return e.toLowerCase()>t.toLowerCase()?1:-1});return c.default.createElement("section",null,c.default.createElement("h3",null,"Attributes"),n.length?c.default.createElement("dl",{className:"attributes-list"},n.map(function(e){return[c.default.createElement("dt",{key:"dt-"+e},e),c.default.createElement("dd",{key:"dd-"+e},a.properties[e]||"-")]})):c.default.createElement("div",{className:"no-content no-content--attributes"},c.default.createElement("p",null,c.default.createElement(_.default,null,"This asset doesn't have any attributes.")),c.default.createElement("p",null,c.default.createElement("a",{className:"button button--base-raised-light",href:"#",onClick:this.onEditProperties},c.default.createElement(_.default,null,"Edit attributes")))))}},{key:"renderReviewStatus",value:function(){var e={pending:(0,g.translate)(this.props.language,"Pending"),reviewed:(0,g.translate)(this.props.language,"Reviewed")},t=this.props.roadProps.data.status||"pending",a=this.props.roadProps.fetched?e[t]:"Loading",n=function(e){return(0,E.default)("drop__menu-item",{"drop__menu-item--active":t===e})};return c.default.createElement(v.default,{className:"review-status-menu",triggerClassName:"button-review-status",triggerActiveClassName:"button--active",triggerText:a,triggerTitle:"Change review state",direction:"down",alignment:"left"},c.default.createElement("h3",{className:"drop__title"},c.default.createElement(_.default,null,"Review status")),c.default.createElement("ul",{className:"drop__menu drop__menu--select"},c.default.createElement("li",null,c.default.createElement("a",{href:"#",className:n("pending"),onClick:this.onStateChange.bind(this,"pending"),"data-hook":"dropdown:close"},e.pending)),c.default.createElement("li",null,c.default.createElement("a",{href:"#",className:n("reviewed"),onClick:this.onStateChange.bind(this,"reviewed"),"data-hook":"dropdown:close"},e.reviewed))))}},{key:"render",value:function(){var e=this.props,t=e.vpromm,a=e.language,n=e.roadProps,o=(0,u.get)(n,"data.district.id",null),r=(0,u.get)(n,"data.district.name",null),s=(0,u.get)(n,"data.province.id",null),l=(0,u.get)(n,"data.province.name",null),i=this.hasGeometry();return c.default.createElement("div",{className:"incontainer"},c.default.createElement("div",{className:"incontainer__header"},c.default.createElement("div",{className:"incontainer__headline"},c.default.createElement("h2",{className:"incontainer__title"},t),c.default.createElement("ol",{className:"incontainer__breadcrumb"},c.default.createElement("li",null,c.default.createElement(m.Link,{title:"View assets page",to:"/"+a+"/assets"},"Overview")),s&&c.default.createElement("li",null,c.default.createElement(m.Link,{title:"View province page",to:"/"+a+"/assets/"+s},l)),o&&c.default.createElement("li",null,c.default.createElement(m.Link,{title:"View district page",to:"/"+a+"/assets/"+s+"/"+o},r)))),c.default.createElement("div",{className:"incontainer__hactions"},this.renderReviewStatus(),c.default.createElement("a",{href:O.api+"/properties/roads/"+t+".geojson?download",className:"ica-download"},c.default.createElement(_.default,null,"Download")),c.default.createElement(v.default,{className:"browse-menu",triggerClassName:"ica-pencil ica-main",triggerActiveClassName:"button--active",triggerText:"Edit",triggerTitle:"Toggle menu options",direction:"down",alignment:"right"},c.default.createElement("ul",{className:"drop__menu drop__menu--iconified edit-menu"},c.default.createElement("li",null,c.default.createElement("a",{href:"#",className:"drop__menu-item em-attributes",onClick:this.onEditProperties},"Attributes")),c.default.createElement("li",null,c.default.createElement(m.Link,{to:"/"+a+"/editor?way=w"+n.data.way_id,className:(0,E.default)("drop__menu-item em-geometry",{disabled:!i}),disabled:!i},"Geometry"))),c.default.createElement("ul",{className:"drop__menu drop__menu--iconified"},c.default.createElement("li",null,c.default.createElement("a",{href:"#",className:"drop__menu-item em-delete",onClick:this.onEditDelete},"Delete")))))),c.default.createElement("figure",{className:"map map--detail"},c.default.createElement("div",{className:"map__media",id:"asset-map"}),i?null:c.default.createElement("div",{className:"no-content no-content--geometry"},c.default.createElement("p",null,c.default.createElement(_.default,null,"This asset doesn't have geometry.")),c.default.createElement("p",null,c.default.createElement(m.Link,{to:"/"+a+"/upload",className:"button button--achromic-glass"},c.default.createElement(_.default,null,"Upload geometry")))),c.default.createElement("figcaption",{className:"map__caption"},c.default.createElement("p",null,c.default.createElement(_.default,null,"Asset geometry")))),this.renderProperties(),this.props.roadProps.fetched?c.default.createElement(y.default,{revealed:this.state.editModalOpen,onCloseClick:this.onModalClose,opOnRoadProperty:this.props.opOnRoadProperty,editRoad:this.props.editRoad,vpromm:t,roadPropsOp:this.props.roadPropsOp,roadProps:this.props.roadProps}):null)}}]),a}();"production"!==O.environment&&(P.propTypes={vpromm:r.PropTypes.string,router:r.PropTypes.object,roadGeo:r.PropTypes.object,roadProps:r.PropTypes.object,roadPropsOp:r.PropTypes.object,language:r.PropTypes.string,fetchRoadProperty:r.PropTypes.func,fetchRoadGeometry:r.PropTypes.func,deleteRoad:r.PropTypes.func,opOnRoadProperty:r.PropTypes.func,editRoad:r.PropTypes.func,editRoadStatus:r.PropTypes.func});var b={fetched:!1,fetching:!1,data:{}},k={fetched:!1,fetching:!1,data:{}},D={processing:!1,data:{}},N=(0,p.combineReducers)({properties:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments[1];switch(t.type){case R.FETCH_ROAD_PROPERTY:return n({},e,{fetching:!0,fetched:!1,error:!1});case R.FETCH_ROAD_PROPERTY_ERROR:return n({},e,{fetching:!1,fetched:!0,error:!0});case R.FETCH_ROAD_PROPERTY_SUCCESS:return n({},e,{fetching:!1,fetched:!0,data:t.properties});case R.EDIT_ROAD_STATUS_SUCCESS:return n({},e,{data:n({},e.data,{status:t.value})})}return e},geometry:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments[1];switch(t.type){case R.FETCH_ROAD_GEOMETRY:return n({},e,{fetching:!0,fetched:!1,error:!1});case R.FETCH_ROAD_GEOMETRY_ERROR:return n({},e,{fetching:!1,fetched:!0,error:!0});case R.FETCH_ROAD_GEOMETRY_SUCCESS:return n({},e,{fetching:!1,fetched:!0,data:t.geoJSON})}return e},operations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments[1];switch(t.type){case R.OP_ON_ROAD_PROPERTY:return n({},e,{processing:!0,error:!1});case R.OP_ON_ROAD_PROPERTY_SUCCESS:return n({},e,{processing:!1,error:!1,data:t.data});case R.OP_ON_ROAD_PROPERTY_ERROR:return n({},e,{processing:!1,error:!0})}return e}});a.default=(0,i.compose)(m.withRouter,(0,i.getContext)({language:c.default.PropTypes.string}),(0,i.withProps)(function(e){e.language;var a=e.params.vpromm,t=(0,u.find)((0,u.toPairs)(S.ADMIN_MAP.province),function(e){var t=s(e,2);t[0];return t[1].id===a.substring(0,2)}),n=s(t,2),o=n[0],r=n[1].name;return{vpromm:a,provinceName:r,aaId:o}}),(0,d.local)({key:function(e){return e.vpromm+"-road-map"},createStore:function(){return(0,p.createStore)(N)},mapStateToProps:function(e){return{roadProps:e.properties,roadGeo:e.geometry,roadPropsOp:e.operations}},filterGlobalActions:function(e){var t=e.type;return[R.FETCH_ROAD_GEOMETRY,R.FETCH_ROAD_GEOMETRY_SUCCESS,R.FETCH_ROAD_GEOMETRY_ERROR,R.FETCH_ROAD_PROPERTY,R.FETCH_ROAD_PROPERTY_SUCCESS,R.FETCH_ROAD_PROPERTY_ERROR,R.OP_ON_ROAD_PROPERTY,R.OP_ON_ROAD_PROPERTY_SUCCESS,R.OP_ON_ROAD_PROPERTY_ERROR,R.EDIT_ROAD_STATUS_SUCCESS].indexOf(t)>-1}}),(0,l.connect)(function(e,t){return{}},function(e){return{fetchRoadGeometry:function(){return e(R.fetchRoadGeometryEpic.apply(void 0,arguments))},fetchRoadProperty:function(){return e(R.fetchRoadPropertyEpic.apply(void 0,arguments))},opOnRoadProperty:function(){return e(R.opOnRoadPropertyEpic.apply(void 0,arguments))},deleteRoad:function(){return e(R.deleteRoadEpic.apply(void 0,arguments))},editRoad:function(){return e(R.editRoadEpic.apply(void 0,arguments))},editRoadStatus:function(){return e(R.editRoadStatusEpic.apply(void 0,arguments))}}}))(P)},{"../components/assets-edit-modal":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/assets-edit-modal.js","../components/confirmation-prompt":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/confirmation-prompt.js","../components/dropdown":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/dropdown.js","../components/t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js","../config":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/config.js","../constants":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/constants.js","../redux/modules/roads":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/roads.js","@turf/bbox":"@turf/bbox",classnames:"classnames",lodash:"lodash","mapbox-gl":"mapbox-gl",react:"react","react-redux":"react-redux","react-router":"react-router",recompose:"recompose",redux:"redux","redux-fractal":"redux-fractal"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/assets-index.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=m(e("react")),n=e("react-redux"),o=e("recompose"),r=e("lodash"),i=m(e("../components/t")),s=e("../actions/action-creators"),c=e("../redux/modules/roadCount"),u=m(e("../containers/province-table-container")),d=e("../constants"),p=m(e("../components/assets-create"));function m(e){return e&&e.__esModule?e:{default:e}}var f=function(e){var t=e.provinces,a=e.provincesRoadCount,n=e.provincesRoadCountStatus,o=e.fetchProvinces,r=e.fetchRoadCount;t||o(),a||"pending"===n||"error"===n||r()};a.default=(0,o.compose)((0,o.getContext)({language:l.default.PropTypes.string}),(0,n.connect)(function(e){return{provinces:e.provinces.data.province,provincesFetched:e.provinces.fetched,provincesRoadCount:e.roadCount.provinces.provinceCount,provincesRoadCountStatus:e.roadCount.provinces.status}},function(e){return{fetchProvinces:function(){return e((0,s.fetchProvinces)())},fetchRoadCount:function(){return e((0,c.fetchProvincesRoadCountEpic)())}}}),(0,o.lifecycle)({componentWillMount:function(){f(this.props)},componentWillReceiveProps:function(e){f(e)}}),(0,o.withProps)(function(e){var t=e.provincesRoadCount;e.provincesRoadCountStatus;return t?{totalRoadCount:(0,r.reduce)(t,function(e,t){return e+t.count},0),osmRoadCount:(0,r.reduce)(t,function(e,t){return e+t.osmCount},0)}:{}}))(function(e){var t=e.provinces,a=e.provincesFetched,n=e.provincesRoadCount,o=e.totalRoadCount,r=e.osmRoadCount,s=e.provincesRoadCountStatus;return l.default.createElement("div",{className:"incontainer"},l.default.createElement("div",{className:"incontainer__header"},l.default.createElement("div",{className:"incontainer__headline"},l.default.createElement("h2",{className:"incontainer__title"},l.default.createElement(i.default,null,"Overview"))),l.default.createElement("div",{className:"incontainer__hactions"},l.default.createElement(p.default,null))),"complete"===s&&l.default.createElement("div",{className:"a-main__status"},l.default.createElement("h2",null,l.default.createElement("strong",null,(r/o).toFixed(2),"% "),l.default.createElement(i.default,null,"of VPRoMMS Ids have field data collected")," (",r," of ",o,")"),l.default.createElement("div",{className:"meter"},l.default.createElement("div",{className:"meter__internal",style:{width:r/o+"%"}}))),a&&"complete"===s&&l.default.createElement(u.default,{provinces:t.filter(function(e){return d.ADMIN_MAP.province[e.id]}),provincesRoadCount:n}))})},{"../actions/action-creators":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/actions/action-creators.js","../components/assets-create":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/assets-create.js","../components/t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js","../constants":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/constants.js","../containers/province-table-container":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/containers/province-table-container.js","../redux/modules/roadCount":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/roadCount.js",lodash:"lodash",react:"react","react-redux":"react-redux",recompose:"recompose"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/assets.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=r(e("react")),o=r(e("../components/t"));function r(e){return e&&e.__esModule?e:{default:e}}a.default=function(e){var t=e.children;return n.default.createElement("section",{className:"inpage"},n.default.createElement("header",{className:"inpage__header"},n.default.createElement("div",{className:"inner"},n.default.createElement("div",{className:"inpage__headline"},n.default.createElement("h1",{className:"inpage__title"},n.default.createElement(o.default,null,"Assets"))))),n.default.createElement("div",{className:"inpage__body"},n.default.createElement("div",{className:"inner"},t)))}},{"../components/t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js",react:"react"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/editor.js":[function(e,t,a){"use strict";var s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,o=!1,r=void 0;try{for(var s,l=e[Symbol.iterator]();!(n=(s=l.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw r}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=d(e("react")),n=e("react-redux"),o=e("recompose"),l=d(e("../components/map-search")),i=d(e("../components/t")),c=e("../redux/modules/map"),u=d(e("../config"));function d(e){return e&&e.__esModule?e:{default:e}}var p=r.default.createClass({displayName:"Editor",propTypes:{setMapPosition:r.default.PropTypes.func,lng:r.default.PropTypes.number,lat:r.default.PropTypes.number,zoom:r.default.PropTypes.number,language:r.default.PropTypes.string.isRequired,way:r.default.PropTypes.string},messageListener:function(e){if("urlchange"===e.data.type)switch(e.data.id){case"or-editor":this.hash=e.data.url.replace(new RegExp("(http:|https:)?"+u.default.editorUrl+"/?#?"),"")}else"navigate"===e.data.type&&e.data.id},componentDidMount:function(){this.hash="",window.addEventListener("message",this.messageListener,!1)},componentWillReceiveProps:function(e){var t=e.lng,a=e.lat,n=e.zoom,o=e.way;this.props.setMapPosition(t,a,n,o)},componentWillUnmount:function(){window.removeEventListener("message",this.messageListener,!1);var e=/[0-9.]+\/[0-9.]+\/[0-9.]+$/.exec(this.hash);if(e&&e[0]&&3===e[0].split("/").length){var t=e[0].split("/").map(Number),a=s(t,3),n=a[0],o=a[1],r=a[2];this.props.setMapPosition(o,r,n)}},render:function(){var e=this.props,t=e.lng,a=e.lat,n=e.way,o=n?16:this.props.zoom;return r.default.createElement("section",{className:"inpage inpage--alt"},r.default.createElement("header",{className:"inpage__header"},r.default.createElement("div",{className:"inner"},r.default.createElement("div",{className:"inpage__headline"},r.default.createElement("h1",{className:"inpage__title"},r.default.createElement(i.default,null,"Editor"))),r.default.createElement("div",{className:"inpage__actions"},r.default.createElement(l.default,null)))),r.default.createElement("div",{className:"inpage__body"},r.default.createElement("div",{className:"inner"},r.default.createElement("figure",{className:"map"},r.default.createElement("iframe",{className:"map__media",src:u.default.editorUrl+"/#id="+n+"&map="+o+"/"+t+"/"+a,id:"main-frame",name:"main-frame",ref:"iframe"})))))}});t.exports=(0,o.compose)((0,o.getContext)({language:r.default.PropTypes.string}),(0,n.connect)(function(e){return{lng:e.map.lng||108.239,lat:e.map.lat||15.93,zoom:e.map.zoom||6,way:e.map.waySlug}},function(o){return{setMapPosition:function(e,t,a,n){return o((0,c.setMapPosition)(e,t,a,n))}}}))(p)},{"../components/map-search":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/map-search.js","../components/t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js","../config":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/config.js","../redux/modules/map":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/map.js",react:"react","react-redux":"react-redux",recompose:"recompose"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/explore.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=g(e("react")),o=e("react-redux"),r=e("recompose"),s=g(e("mapbox-gl")),l=g(e("../components/t")),i=g(e("../config")),c=g(e("../utils/line-colors")),u=e("../actions/action-creators"),d=e("../redux/modules/map"),p=e("../redux/modules/roads"),m=g(e("../components/map-search")),f=g(e("../components/map-options")),h=g(e("../components/map-legend")),E=e("react-router");function g(e){return e&&e.__esModule?e:{default:e}}var _=n.default.createClass({displayName:"Explore",propTypes:{layer:n.default.PropTypes.string,activeRoad:n.default.PropTypes.string,lng:n.default.PropTypes.number,lat:n.default.PropTypes.number,zoom:n.default.PropTypes.number,selectExploreMapLayer:n.default.PropTypes.func,exploreMapShowNoVpromms:n.default.PropTypes.func,setMapPosition:n.default.PropTypes.func,fetchActiveRoad:n.default.PropTypes.func},componentDidMount:function(){var e=this;s.default.accessToken=i.default.mbToken;var t=this.props,a=t.lng,n=t.lat,o=t.zoom,r=t.activeRoad;r&&this.props.fetchActiveRoad(r),this.map=new s.default.Map({container:"map",style:"mapbox://styles/mapbox/light-v9",failIfMajorPerformanceCaveat:!1,center:[a,n],zoom:o}),this.map.addControl(new s.default.NavigationControl,"top-left"),this.map.dragRotate.disable(),this.map.touchZoomRotate.disableRotation(),document.querySelector(".mapboxgl-ctrl .mapboxgl-ctrl-compass").remove(),this.map.on("load",function(){e.map.addLayer({id:"active_road",type:"line",source:{type:"vector",url:"mapbox://openroads.vietnam-conflated-1"},"source-layer":"conflated",paint:{"line-width":20,"line-color":"#D3D3D3"},layout:{"line-cap":"round"},filter:["==","or_vpromms",r]}).addLayer({id:"novpromm",type:"line",source:{type:"vector",url:"mapbox://openroads.vietnam-conflated-1"},"source-layer":"conflated",paint:{"line-width":["interpolate",["linear"],["zoom"],0,1,10,2]},layout:{"line-cap":"round"},filter:["!has","or_vpromms"],maxzoom:11}).addLayer({id:"novpromm_dashed",type:"line",source:{type:"vector",url:"mapbox://openroads.vietnam-conflated-1"},"source-layer":"conflated",paint:{"line-width":["interpolate",["linear"],["zoom"],0,1,10,2],"line-dasharray":[1,2,1]},layout:{"line-cap":"round"},filter:["!has","or_vpromms"],minzoom:10}).addLayer({id:"vpromm",type:"line",source:{type:"vector",url:"mapbox://openroads.vietnam-conflated-1"},"source-layer":"conflated",paint:{"line-width":["interpolate",["linear"],["zoom"],0,1,10,2]},layout:{"line-cap":"round"},filter:["has","or_vpromms"]}).setPaintProperty("novpromm","line-color",c.default.iri).setPaintProperty("novpromm_dashed","line-color",c.default.iri).setPaintProperty("vpromm","line-color",c.default.iri)})},componentWillReceiveProps:function(e){var t=e.lng,a=e.lat,n=e.zoom,o=e.activeRoad;t===this.props.lng&&a===this.props.lat&&n===this.props.zoom||this.map.flyTo({center:[t,a],zoom:n}),o!==this.props.activeRoad&&(this.map.setFilter("active_road",["==","or_vpromms",o]),this.props.fetchActiveRoad(o))},componentWillUnmount:function(){var e=this.map.getCenter(),t=e.lng,a=e.lat,n=this.map.getZoom();this.props.setMapPosition(t,a,n)},handleLayerChange:function(e){var t=e.target.value;this.props.selectExploreMapLayer(t),this.map.setPaintProperty("conflated","line-color",c.default[t])},handleShowNoVpromms:function(e){var t=e.target.checked;this.props.exploreMapShowNoVpromms(t),t?(this.map.setLayoutProperty("novpromm","visibility","visible"),this.map.setLayoutProperty("novpromm_dashed","visibility","visible")):(this.map.setLayoutProperty("novpromm","visibility","none"),this.map.setLayoutProperty("novpromm_dashed","visibility","none"))},render:function(){return n.default.createElement("section",{className:"inpage inpage--alt"},n.default.createElement("header",{className:"inpage__header"},n.default.createElement("div",{className:"inner"},n.default.createElement("div",{className:"inpage__headline"},n.default.createElement("h1",{className:"inpage__title"},n.default.createElement(l.default,null,"Explore"))),n.default.createElement("div",{className:"inpage__actions"},n.default.createElement(m.default,null)))),n.default.createElement("div",{className:"inpage__body"},n.default.createElement("div",{className:"inner"},n.default.createElement("figure",{className:"map"},n.default.createElement("div",{className:"map__media",id:"map"}),n.default.createElement("div",{className:"map__controls map__controls--top-right"},n.default.createElement(f.default,{handleLayerChange:this.handleLayerChange,handleShowNoVpromms:this.handleShowNoVpromms})),n.default.createElement("div",{className:"map__controls map__controls--bottom-right"},n.default.createElement(h.default,{layer:this.props.layer}))))))}});a.default=(0,r.compose)(E.withRouter,(0,r.withProps)(function(e){var t=e.location.query.activeRoad;return{activeRoad:void 0===t?"":t}}),(0,r.getContext)({language:n.default.PropTypes.string}),(0,o.connect)(function(e){return{layer:e.exploreMap.layer,lng:e.map.lng,lat:e.map.lat,zoom:e.map.zoom}},function(n,e){e.activeRoad;return{setMapPosition:function(e,t,a){return n((0,d.setMapPosition)(e,t,a))},selectExploreMapLayer:function(e){return n((0,u.selectExploreMapLayer)(e))},exploreMapShowNoVpromms:function(e){return n((0,u.exploreMapShowNoVpromms)(e))},fetchActiveRoad:function(e){return n((0,p.fetchRoadBboxEpic)(e))}}}))(_)},{"../actions/action-creators":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/actions/action-creators.js","../components/map-legend":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/map-legend.js","../components/map-options":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/map-options.js","../components/map-search":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/map-search.js","../components/t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js","../config":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/config.js","../redux/modules/map":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/map.js","../redux/modules/roads":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/roads.js","../utils/line-colors":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/utils/line-colors.js","mapbox-gl":"mapbox-gl",react:"react","react-redux":"react-redux","react-router":"react-router",recompose:"recompose"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/faq.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=l(e("react")),o=e("recompose"),r=e("../components/t"),s=l(r);function l(e){return e&&e.__esModule?e:{default:e}}a.default=(0,o.compose)((0,o.getContext)({language:n.default.PropTypes.string}))(function(e){var t=e.language;return n.default.createElement("section",{className:"inpage"},n.default.createElement("header",{className:"inpage__header"},n.default.createElement("div",{className:"inner"},n.default.createElement("div",{className:"inpage__headline"},n.default.createElement("h1",{className:"inpage__title"},n.default.createElement(s.default,null,"Frequently Asked Questions"))))),n.default.createElement("div",{className:"inpage__body"},n.default.createElement("div",{className:"inner"},"en"===t?n.default.createElement("section",{className:"question"},n.default.createElement("h3",{className:"inpage__title"},"I typed in the correct username and password but couldn’t open ORMA"),n.default.createElement("p",null,"Please change your Vietnamese typing into English")):n.default.createElement("section",{className:"question"},n.default.createElement("h3",{className:"inpage__title"},"Tôi đã nhập đúng tên người dùng và mật khẩu nhưng không thể mở ORMA"),n.default.createElement("p",null,"Hãy chuyển kiểu gõ Tiếng Việt sang tiếng Anh")),"en"===t?n.default.createElement("section",{className:"question"},n.default.createElement("h3",{className:"inpage__title"},"I tried to upload data multiple times but keep getting error"),n.default.createElement("p",null,"Make sure the following conditions are met"),n.default.createElement("ul",null,n.default.createElement("li",null,"The data hasn’t been uploaded before"),n.default.createElement("li",null,"The format of uploading file is ZIP"),n.default.createElement("li",null,"File size is less than 4MB"),n.default.createElement("li",null,"VPRoMMS ID in the data is correct"))):n.default.createElement("section",{className:"question"},n.default.createElement("h3",{className:"inpage__title"},"Tôi đã thử tải dữ liệu lên nhiều lần nhưng vẫn gặp lỗi"),n.default.createElement("p",null,"Chắc chắn rằng những điều kiện sau được thỏa mãn:"),n.default.createElement("ul",null,n.default.createElement("li",null,"Dữ liệu này chưa được tải lên trước đây"),n.default.createElement("li",null,"Định dạng tập tin là ZIP"),n.default.createElement("li",null,"Kích thước tập tin nhỏ hơn 4MB"),n.default.createElement("li",null,"Mã VPRoMMS trong dữ liệu chính xác"))),"en"===t?n.default.createElement("section",{className:"question"},n.default.createElement("h3",{className:"inpage__title"},"How can I show only one selected road on the map?"),n.default.createElement("p",null,"You can click on ‘Explore’ button next to a VPRoMMS ID")):n.default.createElement("section",{className:"question"},n.default.createElement("h3",{className:"inpage__title"},"Làm thế nào để chỉ hiện một đường đã chọn trên bản đồ?"),n.default.createElement("p",null,"Bạn có thể ấn vào nút ‘Hiển thị’ cạnh một mã VPRoMMS")),"en"===t?n.default.createElement("section",{className:"question"},n.default.createElement("h3",{className:"inpage__title"},"How can I know which VPRoMMS IDs are uploaded?"),n.default.createElement("p",null,"The uploaded VPRoMMS IDs are shown in red color.")):n.default.createElement("section",{className:"question"},n.default.createElement("h3",{className:"inpage__title"},"Làm sao tôi có thể biết những mã VPRoMMS nào đã được tải lên?"),n.default.createElement("p",null,"Những mã VPRoMMS đã được tải lên được hiển thị màu đỏ.")),"en"===t?n.default.createElement("section",{className:"question"},n.default.createElement("h3",{className:"inpage__title"},"Why can’t I click on some VPRoMMS IDs?"),n.default.createElement("p",null,"You can only choose a VPRoMMS ID when it has data attached to (the red one)")):n.default.createElement("section",{className:"question"},n.default.createElement("h3",{className:"inpage__title"},"Tại sao tôi không thể chọn một số mã VPRoMMS?"),n.default.createElement("p",null,"Bạn chỉ có thể chọn một mã VPRoMMS khi nó có dữ liệu đính kèm (mã màu đỏ)")),"en"===t?n.default.createElement("section",{className:"question"},n.default.createElement("h3",{className:"inpage__title"},"Why are there two different values of road length in one VPRoMMS ID?"),n.default.createElement("p",null,"There are two values of length in a VPRoMMS ID: one comes from VPRoMMS speardsheet, one is calculated from GPS trace in the field. In some cases, these can be different.")):n.default.createElement("section",{className:"question"},n.default.createElement("h3",{className:"inpage__title"},"Tại sao có hai giá trị của chiều dài đường trong một mã VPRoMMS?"),n.default.createElement("p",null,"Có hai giá trị của chiều dài đường trong một mã VPRoMMS: một là từ bảng dữ liệu VPRoMMS, một là được tính từ dữ liệu GPS từ hiện trường. Trong một số trường hợp, những dữ liệu này có thể khác nhau.")),"en"===t?n.default.createElement("section",{className:"question"},n.default.createElement("h3",{className:"inpage__title"},"What is ‘road without VPRoMMS ID’?"),n.default.createElement("p",null,"Some previously uploaded roads have no VPRoMMS IDs or the VPRoMMS IDs mismatch with VPRoMMS ID list in ORMA.")):n.default.createElement("section",{className:"question"},n.default.createElement("h3",{className:"inpage__title"},"‘đường không có mã VPRoMMS’ là gì?"),n.default.createElement("p",null,"Một số đường đã được tải lên từ trước không có mã VPRoMMS hoặc mã VPRoMMS không khớp với danh sách mã VPRoMMS trong ORMA")),"en"===t?n.default.createElement("section",{className:"question"},n.default.createElement("h3",{className:"inpage__title"},"In ‘Tasks’, the system shows that there are 3 roads but I can only see 2 roads."),n.default.createElement("p",null,"Please try to zoom in and look around the roads, you may find the third one.")):n.default.createElement("section",{className:"question"},n.default.createElement("h3",{className:"inpage__title"},"Trong mục ‘Nhiệm vụ’, hệ thống báo rằng có 3 đường đang được hiển thị nhưng tôi chỉ thấy 2 đường."),n.default.createElement("p",null,"Hãy thử phóng to và tìm xung quanh các đường đang hiển thị, bạn có thể tìm thấy đường thứ ba.")),n.default.createElement("section",null,n.default.createElement("p",null,n.default.createElement(s.default,null,"If you have any remaining questions"),n.default.createElement("a",{href:"mailto:dphan2@worldbank.org?cc=gost@worldbank.org&subject="+(0,r.translate)(t,"Question regarding ORMA, not answered in the FAQ")},n.default.createElement("button",{className:"button button--base-raised-light"},n.default.createElement(s.default,null,"email us"))))))))})},{"../components/t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js",react:"react",recompose:"recompose"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/home.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("react"),o=i(n),r=e("recompose"),s=e("react-router"),l=i(e("../components/t"));function i(e){return e&&e.__esModule?e:{default:e}}a.default=(0,r.getContext)({language:n.PropTypes.string})(function(e){var t=e.language;return o.default.createElement("section",null,o.default.createElement("header",{className:"page__header--landing"},o.default.createElement("div",{className:"page__headline--landing"},o.default.createElement("h1",{className:"page__title--landing"},o.default.createElement("img",{src:"assets/graphics/layout/openroads-vn-logo-hor-neg.svg",width:"736",height:"96",alt:"OpenRoads Vietnam logo"}),o.default.createElement("span",null,"OpenRoads")," ",o.default.createElement("strong",null,"Vietnam")),o.default.createElement("p",{className:"page__description--landing"},o.default.createElement(l.default,null,"Tracking and visualizing road assets in Vietnam for inclusive growth.")))),o.default.createElement("div",{className:"page__body--landing"},o.default.createElement("div",{className:"inner"},o.default.createElement("h2",null,o.default.createElement(l.default,null,"Access and improve Road Networks")),o.default.createElement("p",{className:"description"},o.default.createElement(l.default,null,"Work with the OpenRoads project to close this critical information gap and create a comprehensive road network of Vietnam")),o.default.createElement("div",{className:"cta-block"},o.default.createElement(s.Link,{to:"/"+t+"/assets",className:"button button--xlarge button--base-raised-light"},o.default.createElement(l.default,null,"View assets"))," ",o.default.createElement("small",null,"or")," ",o.default.createElement(s.Link,{to:"/"+t+"/explore",className:"button button--xlarge button--primary-raised-dark"},o.default.createElement(l.default,null,"Explore on map"))))))})},{"../components/t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js",react:"react","react-router":"react-router",recompose:"recompose"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/tasks.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var d=P(e("react")),n=e("recompose"),o=e("react-redux"),s=P(e("mapbox-gl")),l=P(e("../config")),i=P(e("turf-extent")),c=e("react-router"),m=P(e("@turf/line-intersect")),f=P(e("@turf/point-on-line")),h=P(e("turf-point")),E=e("@turf/meta"),g=P(e("@turf/distance")),p=P(e("moment")),r=e("../redux/modules/osm"),u=e("../redux/modules/map"),_=e("../redux/modules/tasks"),v=e("../actions/action-creators.js"),y=e("../utils/to-osm"),R=e("../components/t"),S=P(R),O=P(e("../components/task-list-item")),C=P(e("react-select")),T=P(e("lodash"));function P(e){return e&&e.__esModule?e:{default:e}}var b="collisions",k="road-hover",D="road-selected",N="road-selected-step1",M=[{id:"road",type:"line",source:b,paint:{"line-width":4,"line-opacity":.2},layout:{"line-cap":"round"}},{id:k,type:"line",source:b,paint:{"line-width":6,"line-opacity":.9},layout:{"line-cap":"round"},filter:["==","_id",""]},{id:D,type:"line",source:b,paint:{"line-width":6,"line-opacity":.9,"line-color":"#FF0000"},layout:{"line-cap":"round"},filter:["==","_id",""]},{id:N,type:"line",source:b,paint:{"line-width":6,"line-opacity":.9,"line-color":"#8F1812"},layout:{"line-cap":"round"},filter:["==","_id",""]}],A=M.map(function(e){return e.id}),w=d.default.createClass({displayName:"Tasks",getInitialState:function(){return{renderedFeatures:null,mode:"dedupe",step:0,hoverId:"",selectedIds:[],selectedStep0:[],selectedStep1:null,selectedProvince:null,selectedVpromm:null}},propTypes:{fetchNextTask:d.default.PropTypes.func,setMapPosition:d.default.PropTypes.func,_queryOsm:d.default.PropTypes.func,_markTaskAsDone:d.default.PropTypes.func,_deleteWays:d.default.PropTypes.func,skipTask:d.default.PropTypes.func,fetchTaskCount:d.default.PropTypes.func,osmStatus:d.default.PropTypes.string,taskStatus:d.default.PropTypes.string,meta:d.default.PropTypes.object,task:d.default.PropTypes.object,taskId:d.default.PropTypes.number,taskUpdatedAt:d.default.PropTypes.string,taskCount:d.default.PropTypes.number,selectOptions:d.default.PropTypes.object,selectedProvince:d.default.PropTypes.number,selectNextTaskProvince:d.default.PropTypes.func,dedupeWayTask:d.default.PropTypes.func,language:d.default.PropTypes.string},componentDidMount:function(){var o=this;s.default.accessToken=l.default.mbToken;var r=this.map=new s.default.Map({container:"map",style:"mapbox://styles/mapbox/light-v9",failIfMajorPerformanceCaveat:!1,zoom:12}).addControl(new s.default.NavigationControl,"top-left");this.map.dragRotate.disable(),this.map.touchZoomRotate.disableRotation(),document.querySelector(".mapboxgl-ctrl .mapboxgl-ctrl-compass").remove(),this.onMapLoaded(function(){r.on("mousemove",function(e){var t=r.queryRenderedFeatures(e.point,{layers:A}),a=void 0;t.length&&t[0].properties._id?(r.getCanvas().style.cursor="pointer",a=t[0].properties._id):a=r.getCanvas().style.cursor="",o.hoverItemOver(a)}),r.on("click",function(e){var t=o.state.step,a=r.queryRenderedFeatures(e.point,{layers:[k]});if(a.length&&a[0].properties._id){var n=a[0].properties._id;0===t?o.selectStep0(n):1===t&&o.selectStep1(n)}})})},componentWillReceiveProps:function(e){var t=this,a=e.task,n=(e.taskId,e.osmStatus);this.props.task!==a?this.setState({renderedFeatures:a},function(){return t.onMapLoaded(function(){return t.syncMap()})}):"pending"===this.props.osmStatus&&"complete"===n&&this.setState({selectedIds:[],mode:null})},componentWillUnmount:function(){var e=this.map.getCenter(),t=e.lng,a=e.lat,n=this.map.getZoom();this.props.setMapPosition(t,a,n)},onMapLoaded:function(e){this.map.loaded()?e():this.map.once("load",e)},syncMap:function(){var e=this.state.renderedFeatures,t=this.map,a=t.getSource(b),n=[].concat(this.state.selectedStep0),o=this.state.selectedStep1||"",r=this.state.hoverId;a?a.setData(e):(t.addSource(b,{type:"geojson",data:e}),M.forEach(function(e){t.addLayer(e)})),t.fitBounds((0,i.default)(e),{linear:!0,padding:25}),t.setFilter(D,["in","_id"].concat(n)),t.setFilter(k,["==","_id",r]),t.setFilter(N,["==","_id",o])},renderPropertiesOverlay:function(){var t=this.state.hoverId,a=this.props.task.features.find(function(e){return t===e.properties._id}).properties,e=Object.keys(a).filter(function(e){return"_"!==e.charAt(0)&&"string"===typeof a[e]}).map(function(e){return[d.default.createElement("dt",{key:e+"-key"},d.default.createElement("strong",null,e)),d.default.createElement("dd",{key:e+"-value"},a[e]?a[e]:"--")]});return d.default.createElement("div",{className:"map__controls map__controls--top-left"},d.default.createElement("figcaption",{className:"panel properties-panel"},d.default.createElement("div",{className:"panel__body"},d.default.createElement("dl",null,e))))},getPanelTitle:function(){var e=this.state,t=e.mode,a=e.step;return 0===a?"Prepare workflow":1===a&&"dedupe"===t?"Remove duplicates":1===a&&"join"===t?"Create intersection":2===a?"Workflow completed":void 0},renderInstrumentPanel:function(){var e=this.state,t=e.step,a=e.renderedFeatures,n=this.props,o=n.osmStatus,r=n.language,s=n.taskId,l=n.taskUpdatedAt,i=(0,p.default)().diff(l,"hours"),c=1===i?(0,R.translate)(r,"hour ago"):(0,R.translate)(r,"hours ago"),u=this.getPanelTitle();return"pending"===o?d.default.createElement("div",{className:"map__controls map__controls--column-right"},d.default.createElement("div",{className:"panel tasks-panel"},d.default.createElement("div",{className:"panel__body"},d.default.createElement("h2",null,d.default.createElement(S.default,null,"Performing action..."))))):d.default.createElement("div",{className:"map__controls map__controls--column-right"},d.default.createElement("article",{className:"panel task-panel"},a&&d.default.createElement("header",{className:"panel__header"},d.default.createElement("div",{className:"panel__headline"},d.default.createElement("h1",{className:"panel__sectitle"},d.default.createElement(S.default,null,"Task")," #",s),d.default.createElement("p",{className:"panel__subtitle"},d.default.createElement("time",{dateTime:l},i," ",c)),d.default.createElement("h2",{className:"panel__title"},d.default.createElement(S.default,null,u)))),0===t&&a&&this.renderStep0(),1===t&&a&&this.renderStep1(),2===t&&a&&this.renderStep2(),d.default.createElement("footer",{className:"panel__footer"},0===t&&a&&this.renderActionsStep0(),1===t&&a&&this.renderActionsStep1(),2===t&&a&&this.renderActionsStep2())))},handleChangeMode:function(e){this.setState({mode:e.target.value,selectedStep0:[]},this.syncMap)},selectStep0:function(e){var t=this.state,a=t.mode,n=t.selectedStep0,o=[].concat(n);"dedupe"===a?o.includes(e)?o.splice(o.indexOf(e)):o.push(e):"join"===a&&(o[0]===e?o=[]:o[0]=e),this.setState({selectedStep0:o},this.syncMap)},selectStep1:function(e){this.setState({selectedStep1:e},this.syncMap)},hoverItemOver:function(e){this.setState({hoverId:e},this.syncMap)},hoverItemOut:function(e){this.setState({hoverId:""},this.syncMap)},renderStep0:function(){var t=this,e=this.state,a=e.renderedFeatures,n=e.mode,o=e.selectedStep0,r=e.hoverId,s=this.props.language,l="dedupe"===n?"Select roads to work on":"Select road to work on",i="dedupe"===n?"checkbox":"radio",c=(0,R.translate)(s,"Remove duplicates"),u=(0,R.translate)(s,"Create intersection");return d.default.createElement("div",{className:"panel__body"},d.default.createElement("section",{className:"task-group"},d.default.createElement("header",{className:"task-group__header"},d.default.createElement("h1",{className:"task-group__title"},d.default.createElement(S.default,null,"Select action to perform"))),d.default.createElement("div",{className:"task-group__body"},d.default.createElement("form",{className:"form task-group__actions"},d.default.createElement("div",{className:"form__group"},d.default.createElement("label",{className:"form__label visually-hidden"},d.default.createElement(S.default,null,"Actions")),d.default.createElement("select",{className:"form__control",value:n,onChange:this.handleChangeMode},d.default.createElement("option",{value:"dedupe"},c),d.default.createElement("option",{value:"join"},u)))))),d.default.createElement("section",{className:"task-group"},d.default.createElement("header",{className:"task-group__header"},d.default.createElement("h1",{className:"task-group__title"},d.default.createElement(S.default,null,l))),d.default.createElement("div",{className:"task-group__body"},d.default.createElement("ul",{className:"road-list"},a.features.map(function(e){return d.default.createElement(O.default,{vpromm:e.properties.or_vpromms,province:e.properties.province,_id:e.properties._id,mode:n,type:i,language:s,key:e.properties._id,selected:o.includes(e.properties._id),isHighlighted:e.properties._id===r,onMouseOver:t.hoverItemOver,onMouseOut:t.hoverItemOut,toggleSelect:t.selectStep0})})))))},renderActionsStep0:function(){var e=this.state,t=e.mode,a=e.selectedStep0,n=void 0;return"dedupe"===t?n=a.length<2:"join"===t&&(n=0===a.length),d.default.createElement("div",{className:"panel__f-actions"},d.default.createElement("button",{type:"button",className:"pfa-secondary",onClick:this.next},d.default.createElement("span",null,d.default.createElement(S.default,null,"Skip task"))),d.default.createElement("button",{type:"button",className:"pfa-primary "+(n?"disabled":""),disabled:n,onClick:this.gotoStep1},d.default.createElement("span",null,d.default.createElement(S.default,null,"Continue"))))},renderActionsStep1:function(){var e=this.state,t=e.mode,a=!e.selectedStep1,n=void 0;return"join"===t?n=this.commitJoin:"dedupe"===t&&(n=this.commitDedupe),d.default.createElement("div",{className:"panel__f-actions"},d.default.createElement("button",{type:"button",className:"pfa-secondary",onClick:this.gotoStep0},d.default.createElement("span",null,d.default.createElement(S.default,null,"Back"))),d.default.createElement("button",{type:"button",className:"pfa-primary "+(a?"disabled":""),disabled:a,onClick:n},d.default.createElement("span",null,d.default.createElement(S.default,null,"Apply"))))},doMore:function(){this.setState({selectedStep0:[],selectedStep1:null,step:0},this.syncMap)},renderActionsStep2:function(){return d.default.createElement("div",{className:"panel__f-actions"},d.default.createElement("button",{type:"button",className:"pfa-secondary",onClick:this.doMore},d.default.createElement("span",null,d.default.createElement(S.default,null,"Do more"))),d.default.createElement("button",{type:"button",onClick:this.next,className:"pfa-primary"},d.default.createElement("span",null,d.default.createElement(S.default,null,"Next task"))))},getSelectedVpromms:function(){var e=this.state,t=e.renderedFeatures,a=e.selectedStep0,n=t.features.filter(function(e){return a.includes(e.properties._id)}).map(function(e){return e.properties.or_vpromms||"No ID"});return T.default.uniq(n)},renderStep1:function(){var t=this,e=this.state,a=e.mode,n=e.selectedStep0,o=e.selectedStep1,r=e.renderedFeatures,s=e.hoverId,l=this.props.language,i=void 0,c="dedupe"===a?"Select Road to Keep":"Select Road to Intersect With";"dedupe"===a?i=r.features.filter(function(e){return n.includes(e.properties._id)}):"join"===a&&(i=r.features.filter(function(e){return e.properties._id!==n[0]}));var u=this.getSelectedVpromms();return d.default.createElement("div",{className:"panel__body"},d.default.createElement("section",{className:"task-group"},d.default.createElement("header",{className:"task-group__header"},d.default.createElement("h1",{className:"task-group__title"},d.default.createElement(S.default,null,c))),d.default.createElement("div",{className:"task-group__body"},d.default.createElement("ul",{className:"road-list"},i.map(function(e){return d.default.createElement(O.default,{vpromm:e.properties.or_vpromms,province:e.properties.province,_id:e.properties._id,mode:a,type:"radio",language:l,key:e.properties._id,selected:o===e.properties._id,isHighlighted:e.properties._id===s,onMouseOver:t.hoverItemOver,onMouseOut:t.hoverItemOut,toggleSelect:t.selectStep1})})))),"dedupe"===a&&d.default.createElement("section",{className:"task-group"},d.default.createElement("header",{className:"task-group__header"},d.default.createElement("h1",{className:"task-group__title"},d.default.createElement(S.default,null,"Select VPROMMID to Apply"))),d.default.createElement("div",{className:"task-group__body"},d.default.createElement("form",{className:"form task-group__actions"},d.default.createElement("div",{className:"form__group"},d.default.createElement("label",{className:"form__label visually-hidden"},d.default.createElement(S.default,null,"VPROMMIDs")),d.default.createElement("select",{className:"form__control",onChange:this.selectVpromm},u.map(function(e){return d.default.createElement("option",{key:e,value:e},e)})))))))},renderStep2:function(){var e=this.state,t=e.mode,a=e.selectedStep0,n=this.props.language,o="dedupe"===t?a.length-1:2,r=1===o?(0,R.translate)(n,"road was"):(0,R.translate)(n,"roads were"),s="dedupe"===t?(0,R.translate)(n,"removed"):(0,R.translate)(n,"intersected");return d.default.createElement("div",{className:"panel__body"},d.default.createElement("div",{className:"prose task-prose"},d.default.createElement("p",null,o," ",r," ",s," ",d.default.createElement(S.default,null,"and submitted to the system for review.")),d.default.createElement("p",null,d.default.createElement(S.default,null,"Do you want to continue to work on this task or move to the next one?"))))},gotoStep0:function(){this.setState({step:0,selectedStep1:null},this.syncMap)},gotoStep1:function(){this.setState({step:1})},gotoStep2:function(){this.setState({step:2})},handleSelectVprommid:function(e){this.setState({applyVprommid:e})},commitDedupe:function(){var e=this.state,t=e.selectedStep1,a=e.renderedFeatures,n=e.applyVprommid,o=a.features.filter(function(e){return e.properties._id!==t}),r=t;this.props.dedupeWayTask(this.props.taskId,o.map(function(e){return e.properties._id}),r,"No ID"===n?null:n),this.props._markTaskAsDone(o.map(function(e){return e.properties._id})),this.gotoStep2()},commitJoin:function(){var e=this.state,t=e.selectedStep0,a=e.selectedStep1,n=e.renderedFeatures.features,o=n.find(function(e){return e.properties._id===t[0]}),r=n.find(function(e){return e.properties._id===a}),s=(0,m.default)(o,r),l=[];if(s.features.length){var i=s.features[0];l.push(I(o,i)),l.push(I(r,i))}else{var c=(0,E.coordReduce)(o,function(e,n){var o=null,t=(0,E.coordReduce)(r,function(e,t){var a=(0,g.default)(n,t);return a<e?(o=t,a):e},e.distance);return o?{distance:t,line1Point:n,line2Point:o}:e},{distance:1/0,line1Point:null,line2Point:null}),u=(0,f.default)(o,(0,h.default)(c.line1Point)),d=(0,f.default)(r,(0,h.default)(c.line2Point));0===u.properties.index||u.properties.index===o.geometry.coordinates.length-1?l.push(I(o,d)):0===d.properties.index||d.properties.index===r.geometry.coordinates.length-1?l.push(I(r,u)):(l.push(I(o,(0,h.default)(c.line2Point))),l.push(I(r,(0,h.default)(c.line1Point))))}var p=(0,y.createModifyLineString)(l);this.props._queryOsm(this.props.taskId,p),this.props._markTaskAsDone([o.properties._id,r.properties._id]),this.gotoStep2()},markAsDone:function(){this.props._markTaskAsDone(this.state.renderedFeatures.features.map(function(e){return Number(e.properties._id)})),this.props.fetchTaskCount(),this.next()},next:function(){this.map.setFilter(D,["all",["in","_id",""]]),this.props.skipTask(this.props.taskId),this.setState({selectedStep0:[],selectedStep1:null,mode:"dedupe",selectedVpromm:null,step:0,renderedFeatures:null},this.props.fetchNextTask)},handleProvinceChange:function(e){var t=e?e.value:null;this.props.selectNextTaskProvince(t),this.props.fetchNextTask()},renderProvinceSelect:function(){var e=this.props,t=e.selectedProvince,a=e.language,n=this.props.selectOptions.province.map(function(e){return{value:e.id,label:e.name_en}}),o=t;return d.default.createElement(C.default,{name:"form-province-select",value:o,onChange:this.handleProvinceChange,options:n,placeholder:(0,R.translate)(a,"Filter tasks by province")})},render:function(){var e=this.props,t=e.taskId,a=e.taskCount,n=e.taskStatus,o=this.state.hoverId,r=!("error"===n||"No tasks remaining"===n||!t&&"pending"===n);return d.default.createElement("section",{className:"inpage inpage--alt"},d.default.createElement("header",{className:"inpage__header"},d.default.createElement("div",{className:"inner"},d.default.createElement("div",{className:"inpage__headline"},d.default.createElement("h1",{className:"inpage__title"},d.default.createElement(S.default,null,"Tasks"))),d.default.createElement("nav",{className:"inpage__nav"},d.default.createElement("ul",{className:"inpage__menu"},d.default.createElement("li",null,d.default.createElement(c.Link,{to:"/"+this.props.language+"/tasks",className:"inpage__menu-link",activeClassName:"inpage__menu-link--active",title:"View"},d.default.createElement("span",null,d.default.createElement(S.default,null,"Solve")," ",d.default.createElement("small",{className:"label"},a)))),d.default.createElement("li",null,d.default.createElement("a",{className:"inpage__menu-link disabled",href:"#",title:"View"},d.default.createElement("span",null,d.default.createElement(S.default,null,"Stats")))))),d.default.createElement("div",{className:"inpage__actions"},d.default.createElement("div",{className:"form__group task-search"},d.default.createElement("label",{className:"form__label",htmlFor:"form-select-1"},d.default.createElement(S.default,null,"Search admin area")),this.props.selectOptions.province&&this.renderProvinceSelect())))),d.default.createElement("div",{className:"inpage__body"},d.default.createElement("div",{className:"inner"},d.default.createElement("figure",{className:"map"},d.default.createElement("div",{className:"map__media",id:"map"}),o&&this.renderPropertiesOverlay(),"error"===n&&d.default.createElement("div",{className:"placeholder__fullscreen"},d.default.createElement("h3",{className:"placeholder__message"},d.default.createElement(S.default,null,"Error"))),"No tasks remaining"===n&&d.default.createElement("div",{className:"placeholder__fullscreen"},d.default.createElement("h3",{className:"placeholder__message"},d.default.createElement(S.default,null,"No tasks remaining"))),!t&&"pending"===n&&d.default.createElement("div",{className:"placeholder__fullscreen"},d.default.createElement("h3",{className:"placeholder__message"},d.default.createElement(S.default,null,"Loading"))),r&&this.renderInstrumentPanel()))))}});function I(e,t){var a=(0,f.default)(e,t).properties.index,n=e.geometry.coordinates.slice(),o=0===a?0:a===n.length-1?n.length:(0,g.default)(t,n[a-1])<(0,g.default)(t,n[a+1])?a:a+1;return n.splice(o,0,t.geometry.coordinates),Object.assign({},e,{geometry:{type:"LineString",coordinates:n}})}a.default=(0,n.compose)((0,n.getContext)({language:d.default.PropTypes.string}),(0,o.connect)(function(e){return{task:e.waytasks.geoJSON,taskId:e.waytasks.id,taskUpdatedAt:e.waytasks.updatedAt,taskCount:e.waytasks.taskCount,taskStatus:e.waytasks.status,osmStatus:e.osmChange.status,selectOptions:e.provinces.data,selectedProvince:e.waytasks.selectedProvince}},function(o){return{fetchProvinces:function(){return o((0,v.fetchProvinces)())},selectNextTaskProvince:function(e){return o((0,_.selectWayTaskProvince)(e))},dedupeWayTask:function(e,t,a,n){return o((0,_.dedupeWayTaskEpic)(e,t,a,n))},fetchNextTask:function(){return o((0,_.fetchNextWayTaskEpic)())},fetchTaskCount:function(){return o((0,_.fetchWayTaskCountEpic)())},skipTask:function(e){return o((0,_.skipTask)(e))},_markTaskAsDone:function(e){return o((0,_.markWayTaskPendingEpic)(e))},_queryOsm:function(e,t){return o((0,r.queryOsmEpic)(e,t))},_deleteWays:function(e,t){return o((0,r.deleteEntireWaysEpic)(e,t))},setMapPosition:function(e,t,a){return o((0,u.setMapPosition)(e,t,a))}}}),(0,n.lifecycle)({componentDidMount:function(){this.props.fetchProvinces(),this.props.fetchNextTask(),this.props.fetchTaskCount()}}))(w)},{"../actions/action-creators.js":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/actions/action-creators.js","../components/t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js","../components/task-list-item":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/task-list-item.js","../config":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/config.js","../redux/modules/map":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/map.js","../redux/modules/osm":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/osm.js","../redux/modules/tasks":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/redux/modules/tasks.js","../utils/to-osm":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/utils/to-osm.js","@turf/distance":"@turf/distance","@turf/line-intersect":"@turf/line-intersect","@turf/meta":"@turf/meta","@turf/point-on-line":"@turf/point-on-line",lodash:"lodash","mapbox-gl":"mapbox-gl",moment:"moment",react:"react","react-redux":"react-redux","react-router":"react-router","react-select":"react-select",recompose:"recompose","turf-extent":"turf-extent","turf-point":"turf-point"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/uhoh.js":[function(e,t,a){"use strict";var n=r(e("react")),o=r(e("../components/t"));function r(e){return e&&e.__esModule?e:{default:e}}var s=n.default.createClass({displayName:"UhOh",render:function(){return n.default.createElement("div",{className:"inpage__body"},n.default.createElement("div",{className:"inner"},n.default.createElement("h2",null,n.default.createElement(o.default,null,"Page Not Found"))))}});t.exports=s},{"../components/t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js",react:"react"}],"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/views/upload.js":[function(e,t,a){"use strict";var n=s(e("react")),o=s(e("../config")),r=s(e("../components/t"));function s(e){return e&&e.__esModule?e:{default:e}}var l=n.default.createClass({displayName:"Upload",render:function(){return n.default.createElement("section",{className:"inpage"},n.default.createElement("header",{className:"inpage__header"},n.default.createElement("div",{className:"inner"},n.default.createElement("div",{className:"inpage__headline"},n.default.createElement("h1",{className:"inpage__title"},n.default.createElement(r.default,null,"Upload"))))),n.default.createElement("div",{className:"inpage__body"},n.default.createElement("div",{className:"inner"},n.default.createElement("h2",null,n.default.createElement(r.default,null,"Upload RoadLabPro ZIP files")),n.default.createElement("form",{className:"form upload-form",method:"post",encType:"multipart/form-data",action:o.default.api+"/fielddata/properties/rlp"},n.default.createElement("div",{className:"form__group"},n.default.createElement("label",{className:"form__label",htmlFor:"rlp-zip-properties"},n.default.createElement(r.default,null,"Road properties")),n.default.createElement("div",{className:"form__input-group form__input-group--medium"},n.default.createElement("input",{type:"file",className:"form__control",id:"rlp-zip-properties",name:"rlp-zip-properties",accept:".zip"}),n.default.createElement("button",{type:"Submit",className:"button button--primary-raised-dark",title:"Submit"},n.default.createElement("span",null,n.default.createElement(r.default,null,"Upload")))))),n.default.createElement("form",{className:"form upload-form",method:"post",encType:"multipart/form-data",action:o.default.api+"/fielddata/geometries/rlp"},n.default.createElement("div",{className:"form__group"},n.default.createElement("label",{className:"form__label",htmlFor:"rlp-zip-geometries"},n.default.createElement(r.default,null,"Road geometries")),n.default.createElement("div",{className:"form__input-group form__input-group--medium"},n.default.createElement("input",{type:"file",className:"form__control",id:"rlp-zip-geometries",name:"rlp-zip-geometries",accept:".zip"}),n.default.createElement("button",{type:"Submit",className:"button button--primary-raised-dark",title:"Submit"},n.default.createElement("span",null,n.default.createElement(r.default,null,"Upload")))))))))}});t.exports=l},{"../components/t":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/components/t.js","../config":"/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/config.js",react:"react"}]},{},["/home/tungst/Desktop/OpenRoads/openroads-vn-analytics/app/assets/scripts/main.js"]);